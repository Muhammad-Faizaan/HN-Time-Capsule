





<!DOCTYPE html>
<html
  lang="en"
  
  data-color-mode="auto" data-light-theme="light" data-dark-theme="dark_tritanopia"
  data-a11y-animated-images="system" data-a11y-link-underlines="true"
  
  >

    <style>
:root {
  --fontStack-monospace: "Monaspace Neon", ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace !important;
}
</style>




  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">
  <link rel="preconnect" href="https://github.githubassets.com" crossorigin>
  <link rel="preconnect" href="https://avatars.githubusercontent.com">

  


  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/light-dac525bbd821.css" /><link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/dark_tritanopia-f46d293c6ff3.css" /><link data-color-theme="light_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_high_contrast-56ccf4057897.css" /><link data-color-theme="light_colorblind" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_colorblind-0e24752a7d2b.css" /><link data-color-theme="light_colorblind_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_colorblind_high_contrast-412af2517363.css" /><link data-color-theme="light_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_tritanopia-6186e83663dc.css" /><link data-color-theme="light_tritanopia_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_tritanopia_high_contrast-9d33c7aea2e7.css" /><link data-color-theme="dark" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark-784387e86ac0.css" /><link data-color-theme="dark_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_high_contrast-79bd5fd84a86.css" /><link data-color-theme="dark_colorblind" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_colorblind-75db11311555.css" /><link data-color-theme="dark_colorblind_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_colorblind_high_contrast-f2c1045899a2.css" /><link data-color-theme="dark_tritanopia_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_tritanopia_high_contrast-e4b5684db29d.css" /><link data-color-theme="dark_dimmed" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed-72c58078e707.css" /><link data-color-theme="dark_dimmed_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed_high_contrast-956cb5dfcb85.css" />

  <style type="text/css">
    :root {
      --tab-size-preference: 4;
    }

    pre, code {
      tab-size: var(--tab-size-preference);
    }
  </style>

    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-primitives-c37d781e2da5.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-2a5c339a0b0a.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/global-5d4d8309269a.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-6d0965b43add.css" />
  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/repository-5d735668c600.css" />
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/code-f0247a8b45d0.css" />

  

  <script type="application/json" id="client-env">{"locale":"en","featureFlags":["a11y_status_checks_ruleset","action_yml_language_service","actions_custom_images_public_preview_visibility","actions_custom_images_storage_billing_ui_visibility","actions_enable_snapshot_keyword","actions_image_version_event","actions_workflow_language_service","actions_workflow_language_service_allow_case_function","agent_session_retry_fetch_capi_on_401","alternate_user_config_repo","api_insights_show_missing_data_banner","arianotify_comprehensive_migration","billing_hard_budget_limits_for_licenses","billing_ui_budget_pagination_enabled","codespaces_prebuild_region_target_update","coding_agent_model_selection","contentful_lp_footnotes","copilot_3p_agent_hovercards","copilot_agent_sessions_alive_updates","copilot_agent_task_list_v2","copilot_agent_task_submit_with_modifier","copilot_agent_tasks_btn_code_nav","copilot_agent_tasks_btn_code_view","copilot_agent_tasks_btn_code_view_lines","copilot_agent_tasks_btn_repo","copilot_agents_blankslate_mem_requests","copilot_api_agentic_issue_marshal_yaml","copilot_ask_mode_dropdown","copilot_capi_error_response_telemetry","copilot_chat_agents_empty_state","copilot_chat_attach_multiple_images","copilot_chat_clear_model_selection_for_default_change","copilot_chat_disable_model_picker_while_streaming","copilot_chat_file_redirect","copilot_chat_input_commands","copilot_chat_opening_thread_switch","copilot_chat_reduce_quota_checks","copilot_chat_search_bar_redirect","copilot_chat_selection_attachments","copilot_chat_vision_in_claude","copilot_chat_vision_preview_gate","copilot_coding_agent_task_response","copilot_custom_copilots","copilot_custom_copilots_feature_preview","copilot_duplicate_thread","copilot_extensions_hide_in_dotcom_chat","copilot_extensions_removal_on_marketplace","copilot_features_raycast_logo","copilot_features_sql_server_logo","copilot_features_zed_logo","copilot_file_block_ref_matching","copilot_ftp_hyperspace_upgrade_prompt","copilot_icebreakers_experiment_dashboard","copilot_icebreakers_experiment_hyperspace","copilot_immersive_job_result_preview","copilot_immersive_structured_model_picker","copilot_immersive_task_hyperlinking","copilot_immersive_task_within_chat_thread","copilot_issue_list_show_more","copilot_mc_cli_resume_any_users_task","copilot_org_policy_page_focus_mode","copilot_pipes_code_nodes","copilot_pipes_github_graphql_nodes","copilot_premium_request_quotas","copilot_redirect_header_button_to_agents","copilot_security_alert_assignee_options","copilot_share_active_subthread","copilot_spaces_ga","copilot_spaces_individual_policies_ga","copilot_spark_empty_state","copilot_spark_handle_nil_friendly_name","copilot_stable_conversation_view","copilot_swe_agent_progress_commands","copilot_swe_agent_use_subagents","copilot_unconfigured_is_inherited","custom_properties_consolidate_default_value_input","dashboard_indexeddb_caching","dashboard_lists_max_age_filter","dashboard_universe_2025","dashboard_universe_2025_feedback_dialog","dom_node_counts","enterprise_ai_controls","failbot_report_error_react_apps_on_page","fetch_graphql_filter_noise_errors","fgpat_permissions_selector_redesign","flex_cta_groups_mvp","github_models_scheduled_hydro_events","global_nav_react","hide_groups_list_for_few_groups","hyperspace_2025_logged_out_batch_1","initial_per_page_pagination_updates","issue_fields_compact_view","issue_fields_global_search","issue_fields_report_usage","issue_fields_timeline_events","issues_cache_operation_timeout","issues_cca_assign_actor_with_agent","issues_default_best_match_sort","issues_expanded_file_types","issues_index_semantic_search","issues_lazy_load_comment_box_suggestions","issues_preheating_main","issues_react_auto_retry_on_error","issues_react_bots_timeline_pagination","issues_react_chrome_container_query_fix","issues_react_client_side_caching_analytics","issues_react_client_side_caching_force_refresh","issues_react_custom_hpc_metric","issues_react_include_bots_in_pickers","issues_react_prohibit_title_fallback","issues_react_safari_scroll_preservation","issues_react_ui_feedback","issues_react_use_turbo_for_cross_repo_navigation","issues_report_sidebar_interactions","lifecycle_label_name_updates","loops_service_graphql_execution","marketing_pages_search_explore_provider","memex_default_issue_create_repository","memex_display_button_config_menu","memex_grouped_by_edit_route","memex_live_update_hovercard","memex_mwl_filter_field_delimiter","memex_roadmap_drag_style","mission_control_retry_on_401","mission_control_use_body_html","open_agent_session_in_vscode_insiders","open_agent_session_in_vscode_stable","pr_sfv_new_diff_fetch","pr_simple_diffs","primer_react_css_has_selector_perf","projects_assignee_max_limit","pull_request_files_accurate_size_estimates","pull_request_files_virtualization","react_quality_profiling","repos_insights_remove_new_url","repository_suggester_elastic_search","ruleset_deletion_confirmation","sample_network_conn_type","session_logs_ungroup_reasoning_text","site_calculator_actions_2025","site_features_copilot_universe","site_homepage_collaborate_video","spark_prompt_secret_scanning","spark_server_connection_status","suppress_non_representative_vitals","swe_agent_member_requests","swe_agent_member_requests_agent_panel","viewscreen_sandbox","webp_support","workbench_store_readonly"],"login":"Muhammad-Faizaan","copilotApiOverrideUrl":"https://api.individual.githubcopilot.com"}</script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/wp-runtime-b6165f46b8c2.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/6488-6dac972ad892.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/78298-4461f83ccb79.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/82075-733bf2915f42.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/environment-a87305361579.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/97068-cd18eb038c94.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/43784-56ff5e06fc38.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/4712-4012ead9381a.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/81028-196a2b669444.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/19681-01119aa85035.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/91853-1d514452fb18.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/78143-a5078efd9ce0.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/3042-4e8e39856f05.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/github-elements-b7722d872625.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/element-registry-b758316c39fa.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/react-core-724b11b8bc4a.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/react-lib-ef9414370f2a.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/90780-00ac8bf051f5.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/28546-373396140b52.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/17688-d822812c31fd.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/83770-3bb3fa8c5ff8.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/7332-28215e4d6136.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/70191-2ff8c1780a1e.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/66721-c8f8022fe832.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/51519-2093a99df21e.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/62941-12ac274b4455.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/87875-9d0cf8c3e6d5.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/96384-7e8820028ca6.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/19718-9f5f984a64d0.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/behaviors-87fd81cc5494.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/37911-925bc4afa4f7.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/notifications-global-376507b60942.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/53996-f76352731e87.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/code-menu-c6174eab8512.js" defer="defer"></script>
  
  <script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/primer-react-aabfc3cd65e8.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/octicons-react-d08b1c04b3f6.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/31475-a29a8d21ba6e.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/40746-d0df9fac557b.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/40799-9d163b66df02.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/99418-20de4c3ee5c3.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/33915-2fcb1ef9118e.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/51220-88337dd2c29d.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/46252-836c10bb031a.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/90108-7781896067a1.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/62029-b0f77bf948b1.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/59672-7a68bc81acac.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/40771-76429eb44c25.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/66990-fdd37fb94ced.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/29665-37792c442ad5.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/91232-ea5042f1952b.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/67129-b4b9e485d0cc.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/6623-0faa3f1d563e.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/48883-fcd952109873.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/19976-34f7623009ca.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/38175-9b9cce3ed36b.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/62393-b58273211574.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/3966-99c21dabb572.js" defer="defer"></script>
<script crossorigin="anonymous" type="module" src="https://github.githubassets.com/assets/react-code-view-8f7ea88b5209.js" defer="defer"></script>
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-react.7930ef41a571f44fa0c8.module.css" />
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/react-code-view.ec608a6bd4a868556b2c.module.css" />


  <title>hn-time-capsule/pipeline.py at master · karpathy/hn-time-capsule</title>



  <meta name="route-pattern" content="/:user_id/:repository/blob/*name(/*path)" data-turbo-transient>
  <meta name="route-controller" content="blob" data-turbo-transient>
  <meta name="route-action" content="show" data-turbo-transient>
  <meta name="fetch-nonce" content="v2:85e18c59-563d-9ea8-fe9f-456b77d1937e">

    
  <meta name="current-catalog-service-hash" content="f3abb0cc802f3d7b95fc8762b94bdcb13bf39634c40c357301c4aa1d67a256fb">


  <meta name="request-id" content="8B14:EB692:10F0B56:133CCF1:697CDC6D" data-turbo-transient="true" /><meta name="html-safe-nonce" content="84409d774c6f9f1e6c726a73f1a0f26dd441bd8bc24e683655e5cb3253b46b92" data-turbo-transient="true" /><meta name="visitor-payload" content="eyJyZWZlcnJlciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9rYXJwYXRoeS9obi10aW1lLWNhcHN1bGUiLCJyZXF1ZXN0X2lkIjoiOEIxNDpFQjY5MjoxMEYwQjU2OjEzM0NDRjE6Njk3Q0RDNkQiLCJ2aXNpdG9yX2lkIjoiMzQ4NjE1MDAyNTkzMzE5NzQ4MyIsInJlZ2lvbl9lZGdlIjoiY2VudHJhbGluZGlhIiwicmVnaW9uX3JlbmRlciI6ImlhZCJ9" data-turbo-transient="true" /><meta name="visitor-hmac" content="8d99c9ddbfd900ba51a54180ef833751222afd22f12f72791ff359c78117eb5f" data-turbo-transient="true" />


    <meta name="hovercard-subject-tag" content="repository:1113901108" data-turbo-transient>


  <meta name="github-keyboard-shortcuts" content="repository,source-code,file-tree,copilot" data-turbo-transient="true" />
  

  <meta name="selected-link" value="repo_source" data-turbo-transient>
  <link rel="assets" href="https://github.githubassets.com/">

    <meta name="google-site-verification" content="Apib7-x98H0j5cPqHWwSMm6dNU4GmODRoqxLiDzdx9I">

<meta name="octolytics-url" content="https://collector.github.com/github/collect" /><meta name="octolytics-actor-id" content="219181390" /><meta name="octolytics-actor-login" content="Muhammad-Faizaan" /><meta name="octolytics-actor-hash" content="e4e1c6ca10bb7a2e38f04dfb8958242782e529ff9ef6abf9f120d1755d1781ae" />

  <meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-turbo-transient="true" />

  




    <meta name="user-login" content="Muhammad-Faizaan">

  <link rel="sudo-modal" href="/sessions/sudo_modal">

    <meta name="viewport" content="width=device-width">

    

      <meta name="description" content="Analyzing Hacker News discussions from a decade ago in hindsight with LLMs - hn-time-capsule/pipeline.py at master · karpathy/hn-time-capsule">

      <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">

    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <meta property="fb:app_id" content="1401488693436528">
    <meta name="apple-itunes-app" content="app-id=1477376905, app-argument=https://github.com/karpathy/hn-time-capsule/blob/master/pipeline.py" />

      <meta name="twitter:image" content="https://opengraph.githubassets.com/5a4ca105f83f4be9d42b4b629f716363f37e90b87788eade7a44f067a1dd13f9/karpathy/hn-time-capsule" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:title" content="hn-time-capsule/pipeline.py at master · karpathy/hn-time-capsule" /><meta name="twitter:description" content="Analyzing Hacker News discussions from a decade ago in hindsight with LLMs - karpathy/hn-time-capsule" />
  <meta property="og:image" content="https://opengraph.githubassets.com/5a4ca105f83f4be9d42b4b629f716363f37e90b87788eade7a44f067a1dd13f9/karpathy/hn-time-capsule" /><meta property="og:image:alt" content="Analyzing Hacker News discussions from a decade ago in hindsight with LLMs - karpathy/hn-time-capsule" /><meta property="og:image:width" content="1200" /><meta property="og:image:height" content="600" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="hn-time-capsule/pipeline.py at master · karpathy/hn-time-capsule" /><meta property="og:url" content="https://github.com/karpathy/hn-time-capsule/blob/master/pipeline.py" /><meta property="og:description" content="Analyzing Hacker News discussions from a decade ago in hindsight with LLMs - karpathy/hn-time-capsule" />
  


      <link rel="shared-web-socket" href="wss://alive.github.com/_sockets/u/219181390/ws?session=eyJ2IjoiVjMiLCJ1IjoyMTkxODEzOTAsInMiOjE5NDk3NTg2MTcsImMiOjcwMjUwNTI2OCwidCI6MTc2OTc5MDU3NH0=--556089d790636197f1a3a99bb71d48ebfc3e9c4a8596e75b3c749f32f02b6711" data-refresh-url="/_alive" data-session-id="8e478665edf3f192f7b62ad2e45e5990f713551b60600e7c00903f8d113aeb1e">
      <link rel="shared-web-socket-src" href="/assets-cdn/worker/socket-worker-213b1993fcd8.js">


      <meta name="hostname" content="github.com">


      <meta name="keyboard-shortcuts-preference" content="all">
      <meta name="hovercards-preference" content="true">
      <meta name="announcement-preference-hovercard" content="true">

        <meta name="expected-hostname" content="github.com">


  <meta http-equiv="x-pjax-version" content="54dc3a898c380276c54ca67205ccf4581f18687ea07c4ec59eebaaa24834c16d" data-turbo-track="reload">
  <meta http-equiv="x-pjax-csp-version" content="21a43568025709b66240454fc92d4f09335a96863f8ab1c46b4a07f6a5b67102" data-turbo-track="reload">
  <meta http-equiv="x-pjax-css-version" content="840528fb24a6fc3375c0cab829357705fabc41b533bd2c9b4301d504b27c8b50" data-turbo-track="reload">
  <meta http-equiv="x-pjax-js-version" content="5f20df5019a7f846ce01350c443b1b5209bcc8b08d1ff80f92fdef440a0c7c89" data-turbo-track="reload">

  <meta name="turbo-cache-control" content="no-preview" data-turbo-transient="">

      <meta name="turbo-cache-control" content="no-cache" data-turbo-transient>

    <meta data-hydrostats="publish">

  <meta name="go-import" content="github.com/karpathy/hn-time-capsule git https://github.com/karpathy/hn-time-capsule.git">

  <meta name="octolytics-dimension-user_id" content="241138" /><meta name="octolytics-dimension-user_login" content="karpathy" /><meta name="octolytics-dimension-repository_id" content="1113901108" /><meta name="octolytics-dimension-repository_nwo" content="karpathy/hn-time-capsule" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="1113901108" /><meta name="octolytics-dimension-repository_network_root_nwo" content="karpathy/hn-time-capsule" />



    

    <meta name="turbo-body-classes" content="logged-in env-production page-responsive">
  <meta name="disable-turbo" content="false">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <meta name="release" content="0f08fae6208283a46e6e5febf9878b9cdddfaa23">
  <meta name="ui-target" content="full">

  <link rel="mask-icon" href="https://github.githubassets.com/assets/pinned-octocat-093da3e6fa40.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg" data-base-href="https://github.githubassets.com/favicons/favicon">

<meta name="theme-color" content="#1e2327">
<meta name="color-scheme" content="light dark" />

  <meta name="msapplication-TileImage" content="/windows-tile.png">
  <meta name="msapplication-TileColor" content="#ffffff">

  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-in env-production page-responsive" style="word-wrap: break-word;" >
    <div data-turbo-body class="logged-in env-production page-responsive" style="word-wrap: break-word;" >
      <div id="__primerPortalRoot__" role="region" style="z-index: 1000; position: absolute; width: 100%;" data-turbo-permanent></div>
      

    <div class="position-relative header-wrapper js-header-wrapper ">
      <a href="#start-of-content" data-skip-target-assigned="false" class="p-3 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content">Skip to content</a>

      <span data-view-component="true" class="progress-pjax-loader Progress position-fixed width-full">
    <span style="width: 0%;" data-view-component="true" class="Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis"></span>
</span>      
      
      <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-react.7930ef41a571f44fa0c8.module.css" />
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/keyboard-shortcuts-dialog.b374cfe79a93fb943a2c.module.css" />

<react-partial
  partial-name="keyboard-shortcuts-dialog"
  data-ssr="false"
  data-attempted-ssr="false"
  data-react-profiling="true"
>
  
  <script type="application/json" data-target="react-partial.embeddedData">{"props":{"docsUrl":"https://docs.github.com/get-started/accessibility/keyboard-shortcuts"}}</script>
  <div data-target="react-partial.reactRoot"></div>
</react-partial>





      

          

                  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-react.7930ef41a571f44fa0c8.module.css" />
<link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/global-nav-bar.0d0e627ce89b0ba071b5.module.css" />

<react-partial
  partial-name="global-nav-bar"
  data-ssr="true"
  data-attempted-ssr="true"
  data-react-profiling="true"
>
  
  <script type="application/json" data-target="react-partial.embeddedData">{"props":{"contextRegion":{"crumbs":[{"crumb_type":"user","label":"karpathy","is_root":false,"href":"/karpathy"},{"crumb_type":"repository","label":"hn-time-capsule","is_root":false,"href":"/karpathy/hn-time-capsule"}],"localNavigation":[{"id":"code","icon":"code","label":"Code","href":"/karpathy/hn-time-capsule","selectedLinks":["repo_source","repo_downloads","repo_commits","repo_releases","repo_tags","repo_branches","repo_packages","repo_deployments","repo_attestations"],"popoverTarget":false,"hotkey":"g c","reactNav":{"appTarget":"code-view","anchor":"code-view-repo-link"},"turboNav":{"frame":"repo-content-turbo-frame"}},{"id":"issues","icon":"issue-opened","label":"Issues","href":"/karpathy/hn-time-capsule/issues","selectedLinks":["repo_issues","repo_labels","repo_milestones"],"count":3,"popoverTarget":false,"hotkey":"g i","reactNav":{"appTarget":"issues-react","anchor":null},"turboNav":{"frame":"repo-content-turbo-frame"}},{"id":"pull-requests","icon":"git-pull-request","label":"Pull requests","href":"/karpathy/hn-time-capsule/pulls","selectedLinks":["repo_pulls","checks"],"count":9,"popoverTarget":false,"hotkey":"g p","reactNav":{"appTarget":null,"anchor":null},"turboNav":{"frame":"repo-content-turbo-frame"}},{"id":"actions","icon":"play","label":"Actions","href":"/karpathy/hn-time-capsule/actions","selectedLinks":["repo_actions"],"popoverTarget":false,"hotkey":"g a","reactNav":{"appTarget":null,"anchor":null},"turboNav":{"frame":"repo-content-turbo-frame"}},{"id":"security","icon":"shield","label":"Security","href":"/karpathy/hn-time-capsule/security","selectedLinks":["security","overview","alerts","policy","token_scanning","code_scanning"],"count":0,"popoverTarget":false,"hotkey":"g s","reactNav":{"appTarget":null,"anchor":null},"turboNav":{"frame":"repo-content-turbo-frame"}},{"id":"insights","icon":"graph","label":"Insights","href":"/karpathy/hn-time-capsule/pulse","selectedLinks":["repo_graphs","repo_contributors","dependency_graph","dependabot_updates","pulse","people","community"],"popoverTarget":false,"reactNav":{"appTarget":null,"anchor":null},"turboNav":{"frame":"repo-content-turbo-frame"}}],"selectedLink":"repo_source"},"navMenu":{"home":{"href":"https://github.com/dashboard","hotkey":"g d"},"feed":{"show":false,"href":"https://github.com/feed"},"issues":{"href":"https://github.com/issues","hotkey":"g i"},"pulls":{"href":"https://github.com/pulls","hotkey":"g p"},"contributedRepos":{"show":true,"href":"https://github.com/repos","hotkey":null},"projects":{"href":"https://github.com/projects"},"discussions":{"show":true,"href":"https://github.com/discussions"},"codespaces":{"show":true,"href":"https://github.com/codespaces"},"copilot":{"show":true,"href":"/copilot"},"spark":{"show":false,"href":null},"marketplace":{"show":true,"href":"https://github.com/marketplace"},"mcp":{"show":true,"href":"https://github.com/mcp"},"explore":{"show":true,"href":"https://github.com/explore"},"richContent":{"show":true,"contentUrl":"/_side-panels/global.json","repositoriesSearchUrl":"/_side-panel-items/global/repositories.json"}},"accountSwitchDialog":{"show":false},"globalTransactionalMessage":null,"userMenu":{"owner":{"login":"Muhammad-Faizaan","name":"MOHAMMED FAIZAN","avatarUrl":"https://avatars.githubusercontent.com/u/219181390?v=4"},"drawerId":"global-user-nav-drawer","lazyLoadItemDataFetchUrl":"/_side-panels/user.json","canAddAccount":true,"addAccountPath":"/login?add_account=1\u0026return_to=https%3A%2F%2Fgithub.com%2Fkarpathy%2Fhn-time-capsule%2Fblob%2Fmaster%2Fpipeline.py","switchAccountPath":"/switch_account","loginAccountPath":"/login?add_account=1","projectsPath":"/Muhammad-Faizaan?tab=projects","gistsUrl":"https://gist.github.com/mine","docsUrl":"https://docs.github.com","yourEnterpriseUrl":null,"enterpriseSettingsUrl":null,"supportUrl":"https://support.github.com","showAccountSwitcher":true,"showCopilot":true,"showEnterprises":true,"showEnterprise":false,"showGists":true,"showOrganizations":true,"showSponsors":true,"showUpgrade":true,"showFeaturesPreviews":true,"showEnterpriseSettings":false},"createMenu":{"showCreateRepo":true,"showImportRepo":true,"showCodespaces":true,"showSpark":false,"showCodingAgent":false,"showGist":true,"showCreateOrg":true,"showCreateProject":false,"showCreateLegacyProject":false,"showCreateIssue":true,"createProjectUrl":"/Muhammad-Faizaan?tab=projects","org":null,"owner":"karpathy","repo":"hn-time-capsule"},"headerLogo":{"href":"https://github.com/","hotkey":"g d","aria-label":"Homepage "},"notifications":{"hotkey":"g n","indicatorMode":"none","websocketChannel":"eyJjIjoibm90aWZpY2F0aW9uLWNoYW5nZWQ6MjE5MTgxMzkwIiwidCI6MTc2OTc5MDU3NH0=--31d0de4ce4b29b6aafa9e8da730de7aa2ac773e3c41c1cd8549bbe1ac9aaa298","fetchIndicatorSrc":"/notifications/indicator","fetchIndicatorEnabled":true},"issues":{"href":"https://github.com/issues","hotkey":"g i"},"pulls":{"href":"https://github.com/pulls","hotkey":"g p"},"contributedRepos":{"show":true,"href":"https://github.com/repos","hotkey":null},"copilot":{"show":true,"showCopilotTitle":false,"showAgentsButton":false,"copilotChatUrl":"/github-copilot/chat?skip_anchor=true","copilotApiUrl":"https://api.individual.githubcopilot.com","agentsPanel":{"popoverAvailable":true,"repository":{"id":1113901108,"name":"hn-time-capsule","ownerLogin":"karpathy"},"showNotification":false,"linkToSessionsInRepo":true,"freeUserPopoverAvailable":false}},"search":{"show":true,"searchHotkey":"s,/","showCommandPalette":false,"commandPaletteHotkey":null,"isSearchPage":false,"isJumpToSearch":false,"fragmentsPath":"/_global-navigation/fragments","fragmentsParams":null},"enterpriseBanner":{"show":false}}}</script>
  <div data-target="react-partial.reactRoot"><style data-styled="true" data-styled-version="5.3.11">.lpqgUB{width:32px;height:32px;}/*!sc*/
data-styled.g1[id="Box-sc-62in7e-0"]{content:"lpqgUB,"}/*!sc*/
</style><link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/219181390?v=4&amp;size=64"/><header role="banner" aria-label="Global Navigation Menu" class="GlobalNav styles-module__appHeader__Q_0R99X prc-Stack-Stack-UQ9k6" data-gap="none" data-direction="vertical" data-align="stretch" data-wrap="nowrap" data-justify="start" data-padding="none"><div class="prc-Stack-Stack-UQ9k6" data-direction="horizontal" data-align="center" data-wrap="nowrap" data-justify="center" data-padding="none"><div data-testid="top-nav-left" class="styles-module__left__lKVdYv9 styles-module__withLocalNavigation__HhaHtgj prc-Stack-Stack-UQ9k6" data-gap="condensed" data-direction="horizontal" data-align="stretch" data-wrap="nowrap" data-justify="start" data-padding="normal"><div data-loading-wrapper="true"><button data-component="IconButton" type="button" aria-haspopup="dialog" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_apb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-three-bars" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M1 2.75A.75.75 0 0 1 1.75 2h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 2.75Zm0 5A.75.75 0 0 1 1.75 7h12.5a.75.75 0 0 1 0 1.5H1.75A.75.75 0 0 1 1 7.75ZM1.75 12h12.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Z"></path></svg></button></div><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true" id="_R_apb_">Open menu</span><!--$!--><template></template><!--/$--><a data-component="IconButton" type="button" href="https://github.com/" data-hotkey="g d" hotkey="g d" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderHome__OBWaKrN prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_4pb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-mark-github" viewBox="0 0 24 24" width="32" height="32" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true"><span id="_R_4pb_">Homepage <span class="prc-src-InternalVisuallyHidden-2YaI6">(<!-- -->g then d<!-- -->)</span></span><span class="prc-TooltipV2-KeybindingHintContainer-Ymj-3 prc-TooltipV2-HasTextBefore-fdOXj" aria-hidden="true"><kbd class="prc-KeybindingHint-KeybindingHint-qpYIs prc-Text-Text-9mHv3" data-testid="keybinding-hint"><span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">g</span><span aria-hidden="true">G</span></span><span class="prc-src-InternalVisuallyHidden-2YaI6">then</span> <span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">d</span><span aria-hidden="true">D</span></span></kbd></span></span></div><div data-testid="top-nav-center" class="styles-module__center__NNVv52E styles-module__withLocalNavigation__HhaHtgj prc-Stack-Stack-UQ9k6" data-gap="condensed" data-direction="horizontal" data-align="stretch" data-wrap="nowrap" data-justify="start" data-padding="normal"><nav class="styles-module__contextRegion__ZPD9HvM prc-Breadcrumbs-BreadcrumbsBase-3Gb-B" aria-label="Breadcrumbs" data-overflow="menu" data-variant="normal"><ol class="prc-Breadcrumbs-BreadcrumbsList-BKjpe"><li class="prc-Breadcrumbs-ItemWrapper-k0NLn"><a class="styles-module__contextCrumb__it6ctiQ prc-Breadcrumbs-Item-jcraJ" href="/karpathy"><span class="">karpathy</span></a></li><li class="prc-Breadcrumbs-ItemWrapper-k0NLn"><a class="styles-module__contextCrumb__it6ctiQ prc-Breadcrumbs-Item-jcraJ" href="/karpathy/hn-time-capsule"><span class="styles-module__contextCrumbLast__cE7QReI">hn-time-capsule</span></a></li></ol></nav><div class="Search-module__searchButtonGroup__hY7L4L5 prc-ButtonGroup-ButtonGroup-vFUrY"><div><button type="button" aria-label="Search or jump to…" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx Search-module__searchButton__2zFiG0S" data-loading="false" data-size="medium" data-variant="invisible"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-search" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path></svg></span><span data-component="text" class="prc-Button-Label-FWkx3"><span class="Search-module__placeholder__Ke68F3b Search-module__text__uLTXutM Search-module__value__BhmdlyU">Type <kbd class="Search-module__kbd__eSZTVni">/</kbd> to search</span></span></span></button></div><div></div></div><button data-component="IconButton" type="button" data-hotkey="s,/" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx Search-module__smallSearchButton__NfoXPtH prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_l9b_"><svg aria-hidden="true" focusable="false" class="octicon octicon-search" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true"><span id="_R_l9b_">Search or jump to…<span class="prc-src-InternalVisuallyHidden-2YaI6">(<!-- -->s,/<!-- -->)</span></span><span class="prc-TooltipV2-KeybindingHintContainer-Ymj-3 prc-TooltipV2-HasTextBefore-fdOXj" aria-hidden="true"><kbd class="prc-KeybindingHint-KeybindingHint-qpYIs prc-Text-Text-9mHv3" data-testid="keybinding-hint"><span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">s,/</span><span aria-hidden="true">S,/</span></span></kbd></span></span><div class="d-none"></div></div><div data-testid="top-nav-right" class="styles-module__right__S4LjfwU styles-module__withLocalNavigation__HhaHtgj prc-Stack-Stack-UQ9k6" data-gap="condensed" data-direction="horizontal" data-align="center" data-wrap="nowrap" data-justify="start" data-padding="normal"><div data-testid="top-bar-actions" class="hide-sm hide-md prc-Stack-Stack-UQ9k6" data-gap="condensed" data-direction="horizontal" data-align="center" data-wrap="nowrap" data-justify="start" data-padding="none"><span><div class="prc-ButtonGroup-ButtonGroup-vFUrY"><div><a data-component="IconButton" type="button" href="/copilot" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_kjpb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-copilot" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.998 15.035c-4.562 0-7.873-2.914-7.998-3.749V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.201-.508-.254-1.084-.254-1.656 0-.87.128-1.769.693-2.484.579-.733 1.494-1.124 2.724-1.261 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .572-.053 1.148-.254 1.656.066.228.098.429.126.612.012.076.024.148.037.218.924.385 1.522 1.471 1.591 2.095v1.872c0 .766-3.351 3.795-8.002 3.795Zm0-1.485c2.28 0 4.584-1.11 5.002-1.433V7.862l-.023-.116c-.49.21-1.075.291-1.727.291-1.146 0-2.059-.327-2.71-.991A3.222 3.222 0 0 1 8 6.303a3.24 3.24 0 0 1-.544.743c-.65.664-1.563.991-2.71.991-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.419.323 2.722 1.433 5.002 1.433ZM6.762 2.83c-.193-.206-.637-.413-1.682-.297-1.019.113-1.479.404-1.713.7-.247.312-.369.789-.369 1.554 0 .793.129 1.171.308 1.371.162.181.519.379 1.442.379.853 0 1.339-.235 1.638-.54.315-.322.527-.827.617-1.553.117-.935-.037-1.395-.241-1.614Zm4.155-.297c-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.091.726.303 1.231.618 1.553.299.305.784.54 1.638.54.922 0 1.28-.198 1.442-.379.179-.2.308-.578.308-1.371 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7Z"></path><path d="M6.25 9.037a.75.75 0 0 1 .75.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 .75-.75Zm4.25.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 1.5 0Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true" id="_R_kjpb_">Chat with Copilot</span></div><div><div class="d-none"></div><button type="button" aria-label="Open Copilot…" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx CopilotItems-module__CopilotMenu__qX4eooY" data-loading="false" data-size="medium" data-variant="invisible" id="_R_54jpb_"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-copilot" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.998 15.035c-4.562 0-7.873-2.914-7.998-3.749V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.201-.508-.254-1.084-.254-1.656 0-.87.128-1.769.693-2.484.579-.733 1.494-1.124 2.724-1.261 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .572-.053 1.148-.254 1.656.066.228.098.429.126.612.012.076.024.148.037.218.924.385 1.522 1.471 1.591 2.095v1.872c0 .766-3.351 3.795-8.002 3.795Zm0-1.485c2.28 0 4.584-1.11 5.002-1.433V7.862l-.023-.116c-.49.21-1.075.291-1.727.291-1.146 0-2.059-.327-2.71-.991A3.222 3.222 0 0 1 8 6.303a3.24 3.24 0 0 1-.544.743c-.65.664-1.563.991-2.71.991-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.419.323 2.722 1.433 5.002 1.433ZM6.762 2.83c-.193-.206-.637-.413-1.682-.297-1.019.113-1.479.404-1.713.7-.247.312-.369.789-.369 1.554 0 .793.129 1.171.308 1.371.162.181.519.379 1.442.379.853 0 1.339-.235 1.638-.54.315-.322.527-.827.617-1.553.117-.935-.037-1.395-.241-1.614Zm4.155-.297c-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.091.726.303 1.231.618 1.553.299.305.784.54 1.638.54.922 0 1.28-.198 1.442-.379.179-.2.308-.578.308-1.371 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7Z"></path><path d="M6.25 9.037a.75.75 0 0 1 .75.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 .75-.75Zm4.25.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 1.5 0Z"></path></svg></span></span><span data-component="trailingAction" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-triangle-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg></span></button></div></div></span><div class="styles-module__itemDivider__wONk21o"></div><button type="button" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk GlobalCreateMenu-module__actionMenuButton__B8wKemq" data-loading="false" data-size="medium" data-variant="invisible" aria-labelledby="global-create-menu-tooltip-_R_1jpb_" id="_R_5jpb_"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-plus" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"></path></svg></span></span><span data-component="trailingAction" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-triangle-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg></span></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true" id="global-create-menu-tooltip-_R_1jpb_">Create new...</span><a data-component="IconButton" type="button" href="https://github.com/issues" data-hotkey="g i" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_63pb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-issue-opened" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true"><span id="_R_63pb_">Issues<span class="prc-src-InternalVisuallyHidden-2YaI6">(<!-- -->g then i<!-- -->)</span></span><span class="prc-TooltipV2-KeybindingHintContainer-Ymj-3 prc-TooltipV2-HasTextBefore-fdOXj" aria-hidden="true"><kbd class="prc-KeybindingHint-KeybindingHint-qpYIs prc-Text-Text-9mHv3" data-testid="keybinding-hint"><span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">g</span><span aria-hidden="true">G</span></span><span class="prc-src-InternalVisuallyHidden-2YaI6">then</span> <span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">i</span><span aria-hidden="true">I</span></span></kbd></span></span><a data-component="IconButton" type="button" href="https://github.com/pulls" data-hotkey="g p" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_a3pb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-git-pull-request" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true"><span id="_R_a3pb_">Pull requests<span class="prc-src-InternalVisuallyHidden-2YaI6">(<!-- -->g then p<!-- -->)</span></span><span class="prc-TooltipV2-KeybindingHintContainer-Ymj-3 prc-TooltipV2-HasTextBefore-fdOXj" aria-hidden="true"><kbd class="prc-KeybindingHint-KeybindingHint-qpYIs prc-Text-Text-9mHv3" data-testid="keybinding-hint"><span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">g</span><span aria-hidden="true">G</span></span><span class="prc-src-InternalVisuallyHidden-2YaI6">then</span> <span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">p</span><span aria-hidden="true">P</span></span></kbd></span></span><a data-component="IconButton" type="button" href="https://github.com/repos" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_e3pb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-repo" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true" id="_R_e3pb_">Repositories</span></div><a data-component="IconButton" type="button" href="/notifications" data-hotkey="g n" class="prc-Button-ButtonBase-9n-Xk styles-module__appHeaderButton__Xgl0aEx prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_5pb_"><svg aria-hidden="true" focusable="false" class="octicon octicon-inbox" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2.8 2.06A1.75 1.75 0 0 1 4.41 1h7.18c.7 0 1.333.417 1.61 1.06l2.74 6.395c.04.093.06.194.06.295v4.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25v-4.5c0-.101.02-.202.06-.295Zm1.61.44a.25.25 0 0 0-.23.152L1.887 8H4.75a.75.75 0 0 1 .6.3L6.625 10h2.75l1.275-1.7a.75.75 0 0 1 .6-.3h2.863L11.82 2.652a.25.25 0 0 0-.23-.152Zm10.09 7h-2.875l-1.275 1.7a.75.75 0 0 1-.6.3h-3.5a.75.75 0 0 1-.6-.3L4.375 9.5H1.5v3.75c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true"><span id="_R_5pb_">You have no unread notifications<span class="prc-src-InternalVisuallyHidden-2YaI6">(<!-- -->g then n<!-- -->)</span></span><span class="prc-TooltipV2-KeybindingHintContainer-Ymj-3 prc-TooltipV2-HasTextBefore-fdOXj" aria-hidden="true"><kbd class="prc-KeybindingHint-KeybindingHint-qpYIs prc-Text-Text-9mHv3" data-testid="keybinding-hint"><span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">g</span><span aria-hidden="true">G</span></span><span class="prc-src-InternalVisuallyHidden-2YaI6">then</span> <span class="prc-components-Chord-DdhWN prc-components-ChordOnEmphasis-O-4BS prc-components-ChordSmall-c-P-x prc-Text-Text-9mHv3" data-kbd-chord="true"> <span class="prc-src-InternalVisuallyHidden-2YaI6">n</span><span aria-hidden="true">N</span></span></kbd></span></span><div class="GlobalUserNavDrawer-module__container__ZzFc61t"><button data-component="IconButton" type="button" aria-haspopup="menu" data-login="Muhammad-Faizaan" class="prc-Button-ButtonBase-9n-Xk GlobalUserNavDrawer-module__anchor__e7LD9kD prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_2npb_"><img data-component="Avatar" class="Box-sc-62in7e-0 lpqgUB prc-Avatar-Avatar-0xaUi" alt="MOHAMMED FAIZAN" width="32" height="32" style="--avatarSize-regular:32px" src="https://avatars.githubusercontent.com/u/219181390?v=4&amp;size=64" data-testid="github-avatar"/></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="s" aria-hidden="true" id="_R_2npb_">Open user navigation menu</span></div><!--$!--><template></template><!--/$--><!--$!--><template></template><!--/$--></div></div><h2 class="prc-src-InternalVisuallyHidden-2YaI6">Repository navigation</h2><nav class="prc-components-UnderlineWrapper-eT-Yj LocalNavigation-module__LocalNavigation__Gd3iha6" aria-label="Repository" data-variant="inset"><ul class="prc-components-UnderlineItemList-xKlKC" role="list"><li class="prc-UnderlineNav-UnderlineNavItem-syRjR"><a href="/karpathy/hn-time-capsule" aria-current="page" data-hotkey="g c" data-react-nav="code-view" data-react-nav-anchor="code-view-repo-link" data-turbo-frame="repo-content-turbo-frame" class="prc-components-UnderlineItem-7fP-n"><span data-component="icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-code" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"></path></svg></span><span data-component="text" data-content="Code">Code</span></a></li><li class="prc-UnderlineNav-UnderlineNavItem-syRjR"><a href="/karpathy/hn-time-capsule/issues" data-hotkey="g i" data-react-nav="issues-react" data-turbo-frame="repo-content-turbo-frame" class="prc-components-UnderlineItem-7fP-n"><span data-component="icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-issue-opened" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg></span><span data-component="text" data-content="Issues">Issues</span><span data-component="counter"><span aria-hidden="true" data-variant="secondary" class="prc-CounterLabel-CounterLabel-X-kRU">3</span><span class="prc-VisuallyHidden-VisuallyHidden-Q0qSB"> (<!-- -->3<!-- -->)</span></span></a></li><li class="prc-UnderlineNav-UnderlineNavItem-syRjR"><a href="/karpathy/hn-time-capsule/pulls" data-hotkey="g p" data-turbo-frame="repo-content-turbo-frame" class="prc-components-UnderlineItem-7fP-n"><span data-component="icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-git-pull-request" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z"></path></svg></span><span data-component="text" data-content="Pull requests">Pull requests</span><span data-component="counter"><span aria-hidden="true" data-variant="secondary" class="prc-CounterLabel-CounterLabel-X-kRU">9</span><span class="prc-VisuallyHidden-VisuallyHidden-Q0qSB"> (<!-- -->9<!-- -->)</span></span></a></li><li class="prc-UnderlineNav-UnderlineNavItem-syRjR"><a href="/karpathy/hn-time-capsule/actions" data-hotkey="g a" data-turbo-frame="repo-content-turbo-frame" class="prc-components-UnderlineItem-7fP-n"><span data-component="icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-play" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg></span><span data-component="text" data-content="Actions">Actions</span></a></li><li class="prc-UnderlineNav-UnderlineNavItem-syRjR"><a href="/karpathy/hn-time-capsule/security" data-hotkey="g s" data-turbo-frame="repo-content-turbo-frame" class="prc-components-UnderlineItem-7fP-n"><span data-component="icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-shield" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.467.133a1.748 1.748 0 0 1 1.066 0l5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667Zm.61 1.429a.25.25 0 0 0-.153 0l-5.25 1.68a.25.25 0 0 0-.174.238V7c0 1.358.275 2.666 1.057 3.86.784 1.194 2.121 2.34 4.366 3.297a.196.196 0 0 0 .154 0c2.245-.956 3.582-2.104 4.366-3.298C13.225 9.666 13.5 8.36 13.5 7V3.48a.251.251 0 0 0-.174-.237l-5.25-1.68ZM8.75 4.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 1.5 0ZM9 10.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg></span><span data-component="text" data-content="Security">Security</span></a></li><li class="prc-UnderlineNav-UnderlineNavItem-syRjR"><a href="/karpathy/hn-time-capsule/pulse" data-turbo-frame="repo-content-turbo-frame" class="prc-components-UnderlineItem-7fP-n"><span data-component="icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-graph" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M1.5 1.75V13.5h13.75a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75V1.75a.75.75 0 0 1 1.5 0Zm14.28 2.53-5.25 5.25a.75.75 0 0 1-1.06 0L7 7.06 4.28 9.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.25-3.25a.75.75 0 0 1 1.06 0L10 7.94l4.72-4.72a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path></svg></span><span data-component="text" data-content="Insights">Insights</span></a></li></ul></nav></header><script type="application/json" id="__PRIMER_DATA__R_0___">{"resolvedServerColorMode":"day"}</script></div>
</react-partial>


      <div class="js-global-bar" style="display: none;">
        


<qbsearch-input class="search-input" data-scope="repo:karpathy/hn-time-capsule" data-custom-scopes-path="/search/custom_scopes" data-delete-custom-scopes-csrf="s0MCg-566nzNe_-75R1KTXVa8iajRyvFe0xVz3FucF4mIsr2yvEEt85vi6HU4uRuYKCzXWfr_e_pP8LMsldHgg" data-max-custom-scopes="10" data-header-redesign-enabled="true" data-initial-value="" data-blackbird-suggestions-path="/search/suggestions" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations" data-current-repository="karpathy/hn-time-capsule" data-current-org="" data-current-owner="karpathy" data-logged-in="true" data-copilot-chat-enabled="true" data-nl-search-enabled="false">
  <div
    class="search-input-container search-with-dialog position-relative d-flex flex-row flex-items-center height-auto color-bg-transparent border-0 color-fg-subtle mx-0"
    data-action="click:qbsearch-input#searchInputContainerClicked"
  >

    <input type="hidden" name="type" class="js-site-search-type-field">

    
<div class="Overlay--hidden " data-modal-dialog-overlay>
  <modal-dialog data-action="close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose" data-target="qbsearch-input.searchSuggestionsDialog" role="dialog" id="search-suggestions-dialog" aria-modal="true" aria-labelledby="search-suggestions-dialog-header" data-view-component="true" class="Overlay Overlay--width-medium Overlay--height-auto">
      <h1 id="search-suggestions-dialog-header" class="sr-only">Search code, repositories, users, issues, pull requests...</h1>
    <div class="Overlay-body Overlay-body--paddingNone">
      
          <div data-view-component="true">        <div class="search-suggestions position-absolute width-full color-shadow-large border color-fg-default color-bg-default overflow-hidden d-flex flex-column query-builder-container"
          style="border-radius: 12px;"
          data-target="qbsearch-input.queryBuilderContainer"
          hidden
        >
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form id="query-builder-test-form" action="" accept-charset="UTF-8" method="get">
  <query-builder data-target="qbsearch-input.queryBuilder" id="query-builder-query-builder-test" data-filter-key=":" data-view-component="true" class="QueryBuilder search-query-builder">
    <div class="FormControl FormControl--fullWidth">
      <label id="query-builder-test-label" for="query-builder-test" class="FormControl-label sr-only">
        Search
      </label>
      <div
        class="QueryBuilder-StyledInput width-fit "
        data-target="query-builder.styledInput"
      >
          <span id="query-builder-test-leadingvisual-wrap" class="FormControl-input-leadingVisualWrap QueryBuilder-leadingVisualWrap">
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search FormControl-input-leadingVisual">
    <path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path>
</svg>
          </span>
        <div data-target="query-builder.styledInputContainer" class="QueryBuilder-StyledInputContainer">
          <div
            aria-hidden="true"
            class="QueryBuilder-StyledInputContent"
            data-target="query-builder.styledInputContent"
          ></div>
          <div class="QueryBuilder-InputWrapper">
            <div aria-hidden="true" class="QueryBuilder-Sizer" data-target="query-builder.sizer"></div>
            <input id="query-builder-test" name="query-builder-test" value="" autocomplete="off" type="text" role="combobox" spellcheck="false" aria-expanded="false" aria-describedby="validation-2be448ba-f620-4748-aa3f-bcef735a1abd" data-target="query-builder.input" data-action="
          input:query-builder#inputChange
          blur:query-builder#inputBlur
          keydown:query-builder#inputKeydown
          focus:query-builder#inputFocus
        " data-view-component="true" class="FormControl-input QueryBuilder-Input FormControl-medium" />
          </div>
        </div>
          <span class="sr-only" id="query-builder-test-clear">Clear</span>
          <button role="button" id="query-builder-test-clear-button" aria-labelledby="query-builder-test-clear query-builder-test-label" data-target="query-builder.clearButton" data-action="
                click:query-builder#clear
                focus:query-builder#clearButtonFocus
                blur:query-builder#clearButtonBlur
              " variant="small" hidden="hidden" type="button" data-view-component="true" class="Button Button--iconOnly Button--invisible Button--medium mr-1 px-2 py-0 d-flex flex-items-center rounded-1 color-fg-muted">  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x-circle-fill Button-visual">
    <path d="M2.343 13.657A8 8 0 1 1 13.658 2.343 8 8 0 0 1 2.343 13.657ZM6.03 4.97a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042L6.94 8 4.97 9.97a.749.749 0 0 0 .326 1.275.749.749 0 0 0 .734-.215L8 9.06l1.97 1.97a.749.749 0 0 0 1.275-.326.749.749 0 0 0-.215-.734L9.06 8l1.97-1.97a.749.749 0 0 0-.326-1.275.749.749 0 0 0-.734.215L8 6.94Z"></path>
</svg>
</button>

      </div>
      <template id="search-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search">
    <path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path>
</svg>
</template>

<template id="code-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code">
    <path d="m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z"></path>
</svg>
</template>

<template id="file-code-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-file-code">
    <path d="M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 14.25 15h-9a.75.75 0 0 1 0-1.5h9a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 10 4.25V1.5H5.75a.25.25 0 0 0-.25.25v2.5a.75.75 0 0 1-1.5 0Zm1.72 4.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.47-1.47-1.47-1.47a.75.75 0 0 1 0-1.06ZM3.28 7.78 1.81 9.25l1.47 1.47a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Zm8.22-6.218V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path>
</svg>
</template>

<template id="history-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-history">
    <path d="m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5A.75.75 0 0 1 7.75 4Z"></path>
</svg>
</template>

<template id="repo-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo">
    <path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z"></path>
</svg>
</template>

<template id="bookmark-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-bookmark">
    <path d="M3 2.75C3 1.784 3.784 1 4.75 1h6.5c.966 0 1.75.784 1.75 1.75v11.5a.75.75 0 0 1-1.227.579L8 11.722l-3.773 3.107A.751.751 0 0 1 3 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.91l3.023-2.489a.75.75 0 0 1 .954 0l3.023 2.49V2.75a.25.25 0 0 0-.25-.25Z"></path>
</svg>
</template>

<template id="plus-circle-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-plus-circle">
    <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7.25-3.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z"></path>
</svg>
</template>

<template id="circle-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-dot-fill">
    <path d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
</svg>
</template>

<template id="trash-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-trash">
    <path d="M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z"></path>
</svg>
</template>

<template id="team-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-people">
    <path d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z"></path>
</svg>
</template>

<template id="project-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project">
    <path d="M1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0ZM1.5 1.75v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25ZM11.75 3a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5a.75.75 0 0 1 .75-.75Zm-8.25.75a.75.75 0 0 1 1.5 0v5.5a.75.75 0 0 1-1.5 0ZM8 3a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 3Z"></path>
</svg>
</template>

<template id="pencil-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-pencil">
    <path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"></path>
</svg>
</template>

<template id="copilot-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copilot">
    <path d="M7.998 15.035c-4.562 0-7.873-2.914-7.998-3.749V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.201-.508-.254-1.084-.254-1.656 0-.87.128-1.769.693-2.484.579-.733 1.494-1.124 2.724-1.261 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .572-.053 1.148-.254 1.656.066.228.098.429.126.612.012.076.024.148.037.218.924.385 1.522 1.471 1.591 2.095v1.872c0 .766-3.351 3.795-8.002 3.795Zm0-1.485c2.28 0 4.584-1.11 5.002-1.433V7.862l-.023-.116c-.49.21-1.075.291-1.727.291-1.146 0-2.059-.327-2.71-.991A3.222 3.222 0 0 1 8 6.303a3.24 3.24 0 0 1-.544.743c-.65.664-1.563.991-2.71.991-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.419.323 2.722 1.433 5.002 1.433ZM6.762 2.83c-.193-.206-.637-.413-1.682-.297-1.019.113-1.479.404-1.713.7-.247.312-.369.789-.369 1.554 0 .793.129 1.171.308 1.371.162.181.519.379 1.442.379.853 0 1.339-.235 1.638-.54.315-.322.527-.827.617-1.553.117-.935-.037-1.395-.241-1.614Zm4.155-.297c-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.091.726.303 1.231.618 1.553.299.305.784.54 1.638.54.922 0 1.28-.198 1.442-.379.179-.2.308-.578.308-1.371 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7Z"></path><path d="M6.25 9.037a.75.75 0 0 1 .75.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 .75-.75Zm4.25.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 1.5 0Z"></path>
</svg>
</template>

<template id="copilot-error-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copilot-error">
    <path d="M16 11.24c0 .112-.072.274-.21.467L13 9.688V7.862l-.023-.116c-.49.21-1.075.291-1.727.291-.198 0-.388-.009-.571-.029L6.833 5.226a4.01 4.01 0 0 0 .17-.782c.117-.935-.037-1.395-.241-1.614-.193-.206-.637-.413-1.682-.297-.683.076-1.115.231-1.395.415l-1.257-.91c.579-.564 1.413-.877 2.485-.996 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .572-.053 1.148-.254 1.656.066.228.098.429.126.612.012.076.024.148.037.218.924.385 1.522 1.471 1.591 2.095Zm-5.083-8.707c-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.091.726.303 1.231.618 1.553.299.305.784.54 1.638.54.922 0 1.28-.198 1.442-.379.179-.2.308-.578.308-1.371 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7Zm2.511 11.074c-1.393.776-3.272 1.428-5.43 1.428-4.562 0-7.873-2.914-7.998-3.749V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.18-.455-.241-.963-.252-1.475L.31 4.107A.747.747 0 0 1 0 3.509V3.49a.748.748 0 0 1 .625-.73c.156-.026.306.047.435.139l14.667 10.578a.592.592 0 0 1 .227.264.752.752 0 0 1 .046.249v.022a.75.75 0 0 1-1.19.596Zm-1.367-.991L5.635 7.964a5.128 5.128 0 0 1-.889.073c-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.419.323 2.722 1.433 5.002 1.433 1.539 0 3.089-.505 4.063-.934Z"></path>
</svg>
</template>

<template id="workflow-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-workflow">
    <path d="M0 1.75C0 .784.784 0 1.75 0h3.5C6.216 0 7 .784 7 1.75v3.5A1.75 1.75 0 0 1 5.25 7H4v4a1 1 0 0 0 1 1h4v-1.25C9 9.784 9.784 9 10.75 9h3.5c.966 0 1.75.784 1.75 1.75v3.5A1.75 1.75 0 0 1 14.25 16h-3.5A1.75 1.75 0 0 1 9 14.25v-.75H5A2.5 2.5 0 0 1 2.5 11V7h-.75A1.75 1.75 0 0 1 0 5.25Zm1.75-.25a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Zm9 9a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
</template>

<template id="book-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-book">
    <path d="M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z"></path>
</svg>
</template>

<template id="code-review-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code-review">
    <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 13H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25v-8.5C0 1.784.784 1 1.75 1ZM1.5 2.75v8.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Zm5.28 1.72a.75.75 0 0 1 0 1.06L5.31 7l1.47 1.47a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0Zm2.44 0a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L10.69 7 9.22 5.53a.75.75 0 0 1 0-1.06Z"></path>
</svg>
</template>

<template id="codespaces-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-codespaces">
    <path d="M0 11.25c0-.966.784-1.75 1.75-1.75h12.5c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm2-9.5C2 .784 2.784 0 3.75 0h8.5C13.216 0 14 .784 14 1.75v5a1.75 1.75 0 0 1-1.75 1.75h-8.5A1.75 1.75 0 0 1 2 6.75Zm1.75-.25a.25.25 0 0 0-.25.25v5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5a.25.25 0 0 0-.25-.25Zm-2 9.5a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25Z"></path><path d="M7 12.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm-4 0a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z"></path>
</svg>
</template>

<template id="comment-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-comment">
    <path d="M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 13.25 12H9.06l-2.573 2.573A1.458 1.458 0 0 1 4 13.543V12H2.75A1.75 1.75 0 0 1 1 10.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h4.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
</template>

<template id="comment-discussion-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-comment-discussion">
    <path d="M1.75 1h8.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 10.25 10H7.061l-2.574 2.573A1.458 1.458 0 0 1 2 11.543V10h-.25A1.75 1.75 0 0 1 0 8.25v-5.5C0 1.784.784 1 1.75 1ZM1.5 2.75v5.5c0 .138.112.25.25.25h1a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h3.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13 2a.25.25 0 0 0-.25-.25h-.5a.75.75 0 0 1 0-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 14.25 12H14v1.543a1.458 1.458 0 0 1-2.487 1.03L9.22 12.28a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l2.22 2.22v-2.19a.75.75 0 0 1 .75-.75h1a.25.25 0 0 0 .25-.25Z"></path>
</svg>
</template>

<template id="organization-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-organization">
    <path d="M1.75 16A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0h8.5C11.216 0 12 .784 12 1.75v12.5c0 .085-.006.168-.018.25h2.268a.25.25 0 0 0 .25-.25V8.285a.25.25 0 0 0-.111-.208l-1.055-.703a.749.749 0 1 1 .832-1.248l1.055.703c.487.325.779.871.779 1.456v5.965A1.75 1.75 0 0 1 14.25 16h-3.5a.766.766 0 0 1-.197-.026c-.099.017-.2.026-.303.026h-3a.75.75 0 0 1-.75-.75V14h-1v1.25a.75.75 0 0 1-.75.75Zm-.25-1.75c0 .138.112.25.25.25H4v-1.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v1.25h2.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM3.75 6h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 3.75A.75.75 0 0 1 3.75 3h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 3.75Zm4 3A.75.75 0 0 1 7.75 6h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 7 6.75ZM7.75 3h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 9.75A.75.75 0 0 1 3.75 9h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 9.75ZM7.75 9h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z"></path>
</svg>
</template>

<template id="rocket-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-rocket">
    <path d="M14.064 0h.186C15.216 0 16 .784 16 1.75v.186a8.752 8.752 0 0 1-2.564 6.186l-.458.459c-.314.314-.641.616-.979.904v3.207c0 .608-.315 1.172-.833 1.49l-2.774 1.707a.749.749 0 0 1-1.11-.418l-.954-3.102a1.214 1.214 0 0 1-.145-.125L3.754 9.816a1.218 1.218 0 0 1-.124-.145L.528 8.717a.749.749 0 0 1-.418-1.11l1.71-2.774A1.748 1.748 0 0 1 3.31 4h3.204c.288-.338.59-.665.904-.979l.459-.458A8.749 8.749 0 0 1 14.064 0ZM8.938 3.623h-.002l-.458.458c-.76.76-1.437 1.598-2.02 2.5l-1.5 2.317 2.143 2.143 2.317-1.5c.902-.583 1.74-1.26 2.499-2.02l.459-.458a7.25 7.25 0 0 0 2.123-5.127V1.75a.25.25 0 0 0-.25-.25h-.186a7.249 7.249 0 0 0-5.125 2.123ZM3.56 14.56c-.732.732-2.334 1.045-3.005 1.148a.234.234 0 0 1-.201-.064.234.234 0 0 1-.064-.201c.103-.671.416-2.273 1.15-3.003a1.502 1.502 0 1 1 2.12 2.12Zm6.94-3.935c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213ZM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path>
</svg>
</template>

<template id="shield-check-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-shield-check">
    <path d="m8.533.133 5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667l5.25-1.68a1.748 1.748 0 0 1 1.066 0Zm-.61 1.429.001.001-5.25 1.68a.251.251 0 0 0-.174.237V7c0 1.36.275 2.666 1.057 3.859.784 1.194 2.121 2.342 4.366 3.298a.196.196 0 0 0 .154 0c2.245-.957 3.582-2.103 4.366-3.297C13.225 9.666 13.5 8.358 13.5 7V3.48a.25.25 0 0 0-.174-.238l-5.25-1.68a.25.25 0 0 0-.153 0ZM11.28 6.28l-3.5 3.5a.75.75 0 0 1-1.06 0l-1.5-1.5a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l.97.97 2.97-2.97a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path>
</svg>
</template>

<template id="heart-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-heart">
    <path d="m8 14.25.345.666a.75.75 0 0 1-.69 0l-.008-.004-.018-.01a7.152 7.152 0 0 1-.31-.17 22.055 22.055 0 0 1-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.066 22.066 0 0 1-3.744 2.584l-.018.01-.006.003h-.002ZM4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.58 20.58 0 0 0 8 13.393a20.58 20.58 0 0 0 3.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 0 1-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5Z"></path>
</svg>
</template>

<template id="server-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-server">
    <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v4c0 .372-.116.717-.314 1 .198.283.314.628.314 1v4a1.75 1.75 0 0 1-1.75 1.75H1.75A1.75 1.75 0 0 1 0 12.75v-4c0-.358.109-.707.314-1a1.739 1.739 0 0 1-.314-1v-4C0 1.784.784 1 1.75 1ZM1.5 2.75v4c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Zm.25 5.75a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25ZM7 4.75A.75.75 0 0 1 7.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5A.75.75 0 0 1 7 4.75ZM7.75 10h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM3 4.75A.75.75 0 0 1 3.75 4h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 4.75ZM3.75 10h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z"></path>
</svg>
</template>

<template id="globe-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-globe">
    <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM5.78 8.75a9.64 9.64 0 0 0 1.363 4.177c.255.426.542.832.857 1.215.245-.296.551-.705.857-1.215A9.64 9.64 0 0 0 10.22 8.75Zm4.44-1.5a9.64 9.64 0 0 0-1.363-4.177c-.307-.51-.612-.919-.857-1.215a9.927 9.927 0 0 0-.857 1.215A9.64 9.64 0 0 0 5.78 7.25Zm-5.944 1.5H1.543a6.507 6.507 0 0 0 4.666 5.5c-.123-.181-.24-.365-.352-.552-.715-1.192-1.437-2.874-1.581-4.948Zm-2.733-1.5h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.507 6.507 0 0 0-4.666 5.5Zm10.181 1.5c-.144 2.074-.866 3.756-1.58 4.948-.12.197-.237.381-.353.552a6.507 6.507 0 0 0 4.666-5.5Zm2.733-1.5a6.507 6.507 0 0 0-4.666-5.5c.123.181.24.365.353.552.714 1.192 1.436 2.874 1.58 4.948Z"></path>
</svg>
</template>

<template id="issue-opened-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-issue-opened">
    <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path>
</svg>
</template>

<template id="device-mobile-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-device-mobile">
    <path d="M3.75 0h8.5C13.216 0 14 .784 14 1.75v12.5A1.75 1.75 0 0 1 12.25 16h-8.5A1.75 1.75 0 0 1 2 14.25V1.75C2 .784 2.784 0 3.75 0ZM3.5 1.75v12.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM8 13a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path>
</svg>
</template>

<template id="package-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-package">
    <path d="m8.878.392 5.25 3.045c.54.314.872.89.872 1.514v6.098a1.75 1.75 0 0 1-.872 1.514l-5.25 3.045a1.75 1.75 0 0 1-1.756 0l-5.25-3.045A1.75 1.75 0 0 1 1 11.049V4.951c0-.624.332-1.201.872-1.514L7.122.392a1.75 1.75 0 0 1 1.756 0ZM7.875 1.69l-4.63 2.685L8 7.133l4.755-2.758-4.63-2.685a.248.248 0 0 0-.25 0ZM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432Zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432Z"></path>
</svg>
</template>

<template id="credit-card-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-credit-card">
    <path d="M10.75 9a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z"></path><path d="M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25ZM14.5 6.5h-13v5.75c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25Zm0-2.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25V5h13Z"></path>
</svg>
</template>

<template id="play-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-play">
    <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path>
</svg>
</template>

<template id="gift-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-gift">
    <path d="M2 2.75A2.75 2.75 0 0 1 4.75 0c.983 0 1.873.42 2.57 1.232.268.318.497.668.68 1.042.183-.375.411-.725.68-1.044C9.376.42 10.266 0 11.25 0a2.75 2.75 0 0 1 2.45 4h.55c.966 0 1.75.784 1.75 1.75v2c0 .698-.409 1.301-1 1.582v4.918A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25V9.332C.409 9.05 0 8.448 0 7.75v-2C0 4.784.784 4 1.75 4h.55c-.192-.375-.3-.8-.3-1.25ZM7.25 9.5H2.5v4.75c0 .138.112.25.25.25h4.5Zm1.5 0v5h4.5a.25.25 0 0 0 .25-.25V9.5Zm0-4V8h5.5a.25.25 0 0 0 .25-.25v-2a.25.25 0 0 0-.25-.25Zm-7 0a.25.25 0 0 0-.25.25v2c0 .138.112.25.25.25h5.5V5.5h-5.5Zm3-4a1.25 1.25 0 0 0 0 2.5h2.309c-.233-.818-.542-1.401-.878-1.793-.43-.502-.915-.707-1.431-.707ZM8.941 4h2.309a1.25 1.25 0 0 0 0-2.5c-.516 0-1 .205-1.43.707-.337.392-.646.975-.879 1.793Z"></path>
</svg>
</template>

<template id="code-square-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code-square">
    <path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25Zm7.47 3.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L10.69 8 9.22 6.53a.75.75 0 0 1 0-1.06ZM6.78 6.53 5.31 8l1.47 1.47a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path>
</svg>
</template>

<template id="device-desktop-icon">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-device-desktop">
    <path d="M14.25 1c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 14.25 12h-3.727c.099 1.041.52 1.872 1.292 2.757A.752.752 0 0 1 11.25 16h-6.5a.75.75 0 0 1-.565-1.243c.772-.885 1.192-1.716 1.292-2.757H1.75A1.75 1.75 0 0 1 0 10.25v-7.5C0 1.784.784 1 1.75 1ZM1.75 2.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25ZM9.018 12H6.982a5.72 5.72 0 0 1-.765 2.5h3.566a5.72 5.72 0 0 1-.765-2.5Z"></path>
</svg>
</template>

        <div class="position-relative">
                <ul
                  role="listbox"
                  class="ActionListWrap QueryBuilder-ListWrap"
                  aria-label="Suggestions"
                  data-action="
                    combobox-commit:query-builder#comboboxCommit
                    mousedown:query-builder#resultsMousedown
                  "
                  data-target="query-builder.resultsList"
                  data-persist-list=false
                  id="query-builder-test-results"
                  tabindex="-1"
                ></ul>
        </div>
      <div class="FormControl-inlineValidation" id="validation-2be448ba-f620-4748-aa3f-bcef735a1abd" hidden="hidden">
        <span class="FormControl-inlineValidation--visual">
          <svg aria-hidden="true" height="12" viewBox="0 0 12 12" version="1.1" width="12" data-view-component="true" class="octicon octicon-alert-fill">
    <path d="M4.855.708c.5-.896 1.79-.896 2.29 0l4.675 8.351a1.312 1.312 0 0 1-1.146 1.954H1.33A1.313 1.313 0 0 1 .183 9.058ZM7 7V3H5v4Zm-1 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"></path>
</svg>
        </span>
        <span></span>
</div>    </div>
    <div data-target="query-builder.screenReaderFeedback" aria-live="polite" aria-atomic="true" class="sr-only"></div>
</query-builder></form>
          <div class="d-flex flex-row color-fg-muted px-3 text-small color-bg-default search-feedback-prompt">
            <a target="_blank" href="https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax" data-view-component="true" class="Link color-fg-accent text-normal ml-2">Search syntax tips</a>            <div class="d-flex flex-1"></div>
              <button data-action="click:qbsearch-input#showFeedbackDialog" type="button" data-view-component="true" class="Button--link Button--medium Button color-fg-accent text-normal ml-2">  <span class="Button-content">
    <span class="Button-label">Give feedback</span>
  </span>
</button>
          </div>
        </div>
</div>

    </div>
</modal-dialog></div>
  </div>
  <div data-action="click:qbsearch-input#retract" class="dark-backdrop position-fixed" hidden data-target="qbsearch-input.darkBackdrop"></div>
  <div class="color-fg-default">
    
<dialog-helper>
  <dialog data-target="qbsearch-input.feedbackDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="feedback-dialog" aria-modal="true" aria-labelledby="feedback-dialog-title" aria-describedby="feedback-dialog-description" data-view-component="true" class="Overlay Overlay-whenNarrow Overlay--size-medium Overlay--motion-scaleFade Overlay--disableScroll">
    <div data-view-component="true" class="Overlay-header">
  <div class="Overlay-headerContentWrap">
    <div class="Overlay-titleWrap">
      <h1 class="Overlay-title " id="feedback-dialog-title">
        Provide feedback
      </h1>
        
    </div>
    <div class="Overlay-actionWrap">
      <button data-close-dialog-id="feedback-dialog" aria-label="Close" aria-label="Close" type="button" data-view-component="true" class="close-button Overlay-closeButton"><svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg></button>
    </div>
  </div>
  
</div>
      <scrollable-region data-labelled-by="feedback-dialog-title">
        <div data-view-component="true" class="Overlay-body">        <!-- '"` --><!-- </textarea></xmp> --></option></form><form id="code-search-feedback-form" data-turbo="false" action="/search/feedback" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="_mjcpW6MZkp9LuDu60mSO3T3f0qiBBapymnzvv7cWiRGIsliysKVJPF2_4YSInjMveRVliFhpBLysz7V6GD7cA" />
          <p>We read every piece of feedback, and take your input very seriously.</p>
          <textarea name="feedback" class="form-control width-full mb-2" style="height: 120px" id="feedback"></textarea>
          <input name="include_email" id="include_email" aria-label="Include my email address so I can be contacted" class="form-control mr-2" type="checkbox">
          <label for="include_email" style="font-weight: normal">Include my email address so I can be contacted</label>
</form></div>
      </scrollable-region>
      <div data-view-component="true" class="Overlay-footer Overlay-footer--alignEnd">          <button data-close-dialog-id="feedback-dialog" type="button" data-view-component="true" class="btn">    Cancel
</button>
          <button form="code-search-feedback-form" data-action="click:qbsearch-input#submitFeedback" type="submit" data-view-component="true" class="btn-primary btn">    Submit feedback
</button>
</div>
</dialog></dialog-helper>

    <custom-scopes data-target="qbsearch-input.customScopesManager">
    
<dialog-helper>
  <dialog data-target="custom-scopes.customScopesModalDialog" data-action="close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose" id="custom-scopes-dialog" aria-modal="true" aria-labelledby="custom-scopes-dialog-title" aria-describedby="custom-scopes-dialog-description" data-view-component="true" class="Overlay Overlay-whenNarrow Overlay--size-medium Overlay--motion-scaleFade Overlay--disableScroll">
    <div data-view-component="true" class="Overlay-header Overlay-header--divided">
  <div class="Overlay-headerContentWrap">
    <div class="Overlay-titleWrap">
      <h1 class="Overlay-title " id="custom-scopes-dialog-title">
        Saved searches
      </h1>
        <h2 id="custom-scopes-dialog-description" class="Overlay-description">Use saved searches to filter your results more quickly</h2>
    </div>
    <div class="Overlay-actionWrap">
      <button data-close-dialog-id="custom-scopes-dialog" aria-label="Close" aria-label="Close" type="button" data-view-component="true" class="close-button Overlay-closeButton"><svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg></button>
    </div>
  </div>
  
</div>
      <scrollable-region data-labelled-by="custom-scopes-dialog-title">
        <div data-view-component="true" class="Overlay-body">        <div data-target="custom-scopes.customScopesModalDialogFlash"></div>

        <div hidden class="create-custom-scope-form" data-target="custom-scopes.createCustomScopeForm">
        <!-- '"` --><!-- </textarea></xmp> --></option></form><form id="custom-scopes-dialog-form" data-turbo="false" action="/search/custom_scopes" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="q9jwKDbcyT8sn0CyuhTOGg_u9iSF68SHFzdKqYzWxfNUzUk3uQXbAGYk3JJ7yksG76wGnTNkuL_J8DedigFGeQ" />
          <div data-target="custom-scopes.customScopesModalDialogFlash"></div>

          <input type="hidden" id="custom_scope_id" name="custom_scope_id" data-target="custom-scopes.customScopesIdField">

          <div class="form-group">
            <label for="custom_scope_name">Name</label>
            <auto-check src="/search/custom_scopes/check_name" required>
              <input
                type="text"
                name="custom_scope_name"
                id="custom_scope_name"
                data-target="custom-scopes.customScopesNameField"
                class="form-control"
                autocomplete="off"
                placeholder="github-ruby"
                required
                maxlength="50">
              <input type="hidden" value="yzLyOGHrp5HeEth5jqhDjfFIX6p4bTTs9lteAXVbohutcqU__-_VzL2iZofZKBoM2iCQnAAcOKaRGXTTJkxjWg" data-csrf="true" />
            </auto-check>
          </div>

          <div class="form-group">
            <label for="custom_scope_query">Query</label>
            <input
              type="text"
              name="custom_scope_query"
              id="custom_scope_query"
              data-target="custom-scopes.customScopesQueryField"
              class="form-control"
              autocomplete="off"
              placeholder="(repo:mona/a OR repo:mona/b) AND lang:python"
              required
              maxlength="500">
          </div>

          <p class="text-small color-fg-muted">
            To see all available qualifiers, see our <a class="Link--inTextBlock" href="https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax">documentation</a>.
          </p>
</form>        </div>

        <div data-target="custom-scopes.manageCustomScopesForm">
          <div data-target="custom-scopes.list"></div>
        </div>

</div>
      </scrollable-region>
      <div data-view-component="true" class="Overlay-footer Overlay-footer--alignEnd Overlay-footer--divided">          <button data-action="click:custom-scopes#customScopesCancel" type="button" data-view-component="true" class="btn">    Cancel
</button>
          <button form="custom-scopes-dialog-form" data-action="click:custom-scopes#customScopesSubmit" data-target="custom-scopes.customScopesSubmitButton" type="submit" data-view-component="true" class="btn-primary btn">    Create saved search
</button>
</div>
</dialog></dialog-helper>
    </custom-scopes>
  </div>
</qbsearch-input>  <input type="hidden" value="rf5sP_8EILhIwOX9eiF1QAiCwyBf5VOgz9slq94mY14QCYK_D5SVO1a1FSm519bBHMugDkkUVH1OU1YeGU6kzA" data-csrf="true" class="js-data-jump-to-suggestions-path-csrf" />


      </div>


      <div hidden="hidden" data-view-component="true" class="js-stale-session-flash stale-session-flash flash flash-warn flash-full">
  
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path>
</svg>
        <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a class="Link--inTextBlock" href="">Reload</a> to refresh your session.</span>
        <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a class="Link--inTextBlock" href="">Reload</a> to refresh your session.</span>
        <span class="js-stale-session-flash-switched" hidden>You switched accounts on another tab or window. <a class="Link--inTextBlock" href="">Reload</a> to refresh your session.</span>

    <button id="icon-button-f8a974dc-6f8f-43c2-8063-1942500e720d" aria-labelledby="tooltip-60296697-770e-44b1-b005-4b485b7ad3f7" type="button" data-view-component="true" class="Button Button--iconOnly Button--invisible Button--medium flash-close js-flash-close">  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x Button-visual">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
</button><tool-tip id="tooltip-60296697-770e-44b1-b005-4b485b7ad3f7" for="icon-button-f8a974dc-6f8f-43c2-8063-1942500e720d" popover="manual" data-direction="s" data-type="label" data-view-component="true" class="sr-only position-absolute">Dismiss alert</tool-tip>


  
</div>
        
          
    </div>

  <div id="start-of-content" class="show-on-focus"></div>








    <div id="js-flash-container" class="flash-container" data-turbo-replace>




  <template class="js-flash-template">
    
<div class="flash flash-full   {{ className }}">
  <div >
    <button autofocus class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
    </button>
    <div aria-atomic="true" role="alert" class="js-flash-alert">
      
      <div>{{ message }}</div>

    </div>
  </div>
</div>
  </template>
</div>


    
  <notification-shelf-watcher data-base-url="https://github.com/notifications/beta/shelf" data-channel="eyJjIjoibm90aWZpY2F0aW9uLWNoYW5nZWQ6MjE5MTgxMzkwIiwidCI6MTc2OTc5MDU3NH0=--31d0de4ce4b29b6aafa9e8da730de7aa2ac773e3c41c1cd8549bbe1ac9aaa298" data-view-component="true" class="js-socket-channel"></notification-shelf-watcher>
  <div hidden data-initial data-target="notification-shelf-watcher.placeholder"></div>






  <div
    class="application-main "
    data-commit-hovercards-enabled
    data-discussion-hovercards-enabled
    data-issue-and-pr-hovercards-enabled
    data-project-hovercards-enabled
  >
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main id="js-repo-pjax-container" >
      
      






    
  <div id="repository-container-header" data-turbo-replace hidden ></div>



<turbo-frame id="repo-content-turbo-frame" target="_top" data-turbo-action="advance" class="">
    <div id="repo-content-pjax-container" class="repository-content " >
      <a href="https://github.dev/" class="d-none js-github-dev-shortcut" data-hotkey=".,Mod+Alt+.">Open in github.dev</a>
  <a href="https://github.dev/" class="d-none js-github-dev-new-tab-shortcut" data-hotkey="Shift+.,Shift+&gt;,&gt;" target="_blank" rel="noopener noreferrer">Open in a new github.dev tab</a>
    <a class="d-none" data-hotkey=",,Mod+Alt+," target="_blank" href="/codespaces/new/karpathy/hn-time-capsule/tree/master?resume=1">Open in codespace</a>




    
      
    









<react-app
  app-name="react-code-view"
  initial-path="/karpathy/hn-time-capsule/blob/master/pipeline.py"
  style="display: block; min-height: calc(100vh - 64px);"
  data-attempted-ssr="true"
  data-ssr="true"
  data-lazy="false"
  data-alternate="false"
  data-data-router-enabled="false"
  data-react-profiling="true"
>
  
  <script type="application/json" data-target="react-app.embeddedData">{"payload":{"allShortcutsEnabled":true,"fileTree":{"":{"items":[{"name":".gitignore","path":".gitignore","contentType":"file"},{"name":".python-version","path":".python-version","contentType":"file"},{"name":"README.md","path":"README.md","contentType":"file"},{"name":"hnhero.png","path":"hnhero.png","contentType":"file"},{"name":"pipeline.py","path":"pipeline.py","contentType":"file"},{"name":"pyproject.toml","path":"pyproject.toml","contentType":"file"},{"name":"uv.lock","path":"uv.lock","contentType":"file"}],"totalCount":7}},"fileTreeProcessingTime":8.222827,"foldersToFetch":[],"incompleteFileTree":false,"repo":{"id":1113901108,"defaultBranch":"master","name":"hn-time-capsule","ownerLogin":"karpathy","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2025-12-10T21:10:52.000+05:00","ownerAvatar":"https://avatars.githubusercontent.com/u/241138?v=4","public":true,"private":false,"isOrgOwned":false},"codeLineWrapEnabled":false,"symbolsExpanded":false,"treeExpanded":true,"refInfo":{"name":"master","listCacheKey":"v0:1765383079.0","canEdit":true,"refType":"branch","currentOid":"ca02ebb4de5e953bf1629689abd1f82b454b6905","canEditOnDefaultBranch":true,"fileExistsOnDefault":true},"path":"pipeline.py","currentUser":{"id":219181390,"login":"Muhammad-Faizaan","userEmail":"mohammadfaizan0997@gmail.com"},"blob":{"rawLines":["\"\"\"","HN Time Capsule Pipeline","","Stages:","1. fetch    - Fetch frontpage and articles for a given date","2. prompt   - Generate LLM prompts for each article","3. analyze  - Run LLM analysis on prompts","4. parse    - Parse grades from LLM responses","5. render   - Generate HTML summary","\"\"\"","","import json","import os","import re","import html","import time","import urllib.request","import urllib.error","from dataclasses import dataclass, field, asdict","from datetime import date","from html.parser import HTMLParser","from pathlib import Path","","import requests","","","# -----------------------------------------------------------------------------","# Data structures","# -----------------------------------------------------------------------------","","@dataclass","class Article:","    rank: int","    title: str","    url: str","    hn_url: str","    points: int","    author: str","    comment_count: int","    item_id: str","","","@dataclass","class Comment:","    id: str","    author: str","    text: str","    children: list = field(default_factory=list)","","    def to_dict(self):","        return {","            'id': self.id,","            'author': self.author,","            'text': self.text,","            'children': [c.to_dict() for c in self.children]","        }","","    @classmethod","    def from_dict(cls, d):","        return cls(","            id=d['id'],","            author=d['author'],","            text=d['text'],","            children=[cls.from_dict(c) for c in d.get('children', [])]","        )","","","# -----------------------------------------------------------------------------","# HTML Parsing","# -----------------------------------------------------------------------------","","class HNFrontpageParser(HTMLParser):","    \"\"\"Parse HN frontpage HTML to extract article listings.\"\"\"","","    def __init__(self):","        super().__init__()","        self.articles = []","        self.current_article = {}","        self.in_titleline = False","        self.in_title_link = False","        self.in_subline = False","        self.in_score = False","        self.in_user = False","        self.in_subline_links = False","        self.current_rank = 0","","    def handle_starttag(self, tag, attrs):","        attrs_dict = dict(attrs)","        if tag == \"span\" and attrs_dict.get(\"class\") == \"rank\":","            self.in_titleline = True","        if tag == \"span\" and attrs_dict.get(\"class\") == \"titleline\":","            self.in_titleline = True","        if self.in_titleline and tag == \"a\" and \"href\" in attrs_dict:","            if not self.current_article.get(\"title\"):","                self.current_article[\"url\"] = attrs_dict[\"href\"]","                self.in_title_link = True","        if tag == \"span\" and attrs_dict.get(\"class\") == \"subline\":","            self.in_subline = True","        if self.in_subline:","            if tag == \"span\" and attrs_dict.get(\"class\") == \"score\":","                self.in_score = True","            if tag == \"a\" and attrs_dict.get(\"class\") == \"hnuser\":","                self.in_user = True","            if tag == \"a\" and \"href\" in attrs_dict and \"item?id=\" in attrs_dict[\"href\"]:","                href = attrs_dict[\"href\"]","                item_id = href.split(\"item?id=\")[-1]","                self.current_article[\"item_id\"] = item_id","                self.current_article[\"hn_url\"] = f\"https://news.ycombinator.com/{href}\"","                self.in_subline_links = True","","    def handle_data(self, data):","        data = data.strip()","        if not data:","            return","        if self.in_title_link:","            self.current_article[\"title\"] = data","        if self.in_score:","            try:","                self.current_article[\"points\"] = int(data.split()[0])","            except (ValueError, IndexError):","                self.current_article[\"points\"] = 0","        if self.in_user:","            self.current_article[\"author\"] = data","        if self.in_subline_links:","            if \"comment\" in data.lower():","                try:","                    self.current_article[\"comment_count\"] = int(data.split()[0])","                except (ValueError, IndexError):","                    self.current_article[\"comment_count\"] = 0","            elif data.lower() == \"discuss\":","                self.current_article[\"comment_count\"] = 0","        if data.endswith(\".\") and data[:-1].isdigit():","            self.current_rank = int(data[:-1])","            self.current_article[\"rank\"] = self.current_rank","","    def handle_endtag(self, tag):","        if tag == \"a\":","            self.in_title_link = False","            self.in_user = False","            self.in_subline_links = False","        if tag == \"span\":","            self.in_score = False","            if self.in_titleline:","                self.in_titleline = False","        if tag == \"tr\" and self.in_subline:","            self.in_subline = False","            if self.current_article.get(\"title\") and self.current_article.get(\"item_id\"):","                self.articles.append(Article(","                    rank=self.current_article.get(\"rank\", 0),","                    title=self.current_article.get(\"title\", \"\"),","                    url=self.current_article.get(\"url\", \"\"),","                    hn_url=self.current_article.get(\"hn_url\", \"\"),","                    points=self.current_article.get(\"points\", 0),","                    author=self.current_article.get(\"author\", \"\"),","                    comment_count=self.current_article.get(\"comment_count\", 0),","                    item_id=self.current_article.get(\"item_id\", \"\"),","                ))","            self.current_article = {}","","","class ArticleTextParser(HTMLParser):","    \"\"\"Extract main text content from article HTML.\"\"\"","","    def __init__(self):","        super().__init__()","        self.text_parts = []","        self.skip_tags = {'script', 'style', 'nav', 'header', 'footer', 'aside', 'noscript', 'iframe'}","        self.skip_depth = 0","","    def handle_starttag(self, tag, attrs):","        if tag in self.skip_tags:","            self.skip_depth += 1","        if tag == 'br':","            self.text_parts.append('\\n')","","    def handle_endtag(self, tag):","        if tag in self.skip_tags and self.skip_depth \u003e 0:","            self.skip_depth -= 1","        if tag in ('p', 'div', 'article', 'section', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'):","            self.text_parts.append('\\n\\n')","","    def handle_data(self, data):","        if self.skip_depth \u003e 0:","            return","        text = data.strip()","        if text:","            self.text_parts.append(text + ' ')","","    def get_text(self) -\u003e str:","        text = ''.join(self.text_parts)","        text = re.sub(r'[ \\t]+', ' ', text)","        text = re.sub(r'\\n{3,}', '\\n\\n', text)","        text = re.sub(r' +\\n', '\\n', text)","        return text.strip()","","","# -----------------------------------------------------------------------------","# Fetching functions","# -----------------------------------------------------------------------------","","def fetch_url(url: str, retries: int = 5, timeout: int = 15) -\u003e str:","    \"\"\"Fetch URL content with retry logic. Uses requests library to avoid TLS fingerprint blocking.\"\"\"","    headers = {","        \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",","        \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",","        \"Accept-Language\": \"en-US,en;q=0.5\",","    }","    for attempt in range(retries):","        try:","            if attempt \u003e 0:","                wait_time = 2 ** attempt  # 2, 4, 8, 16 seconds","                print(f\"  Retry {attempt}/{retries-1} after {wait_time}s...\")","                time.sleep(wait_time)","            response = requests.get(url, headers=headers, timeout=timeout)","            response.raise_for_status()","            return response.text","        except requests.exceptions.HTTPError as e:","            if e.response.status_code == 403 and attempt \u003c retries - 1:","                print(f\"  Got 403, will retry...\")","                continue","            raise","    raise Exception(f\"Failed to fetch {url} after {retries} retries\")","","","def fetch_frontpage(day: str) -\u003e list[Article]:","    \"\"\"Fetch HN frontpage for a specific day (YYYY-MM-DD format).\"\"\"","    url = f\"https://news.ycombinator.com/front?day={day}\"","    print(f\"Fetching frontpage: {url}\")","    page_html = fetch_url(url)","    parser = HNFrontpageParser()","    parser.feed(page_html)","    return parser.articles","","","def fetch_comments(item_id: str) -\u003e list[Comment]:","    \"\"\"Fetch all comments for an HN item using Algolia API.\"\"\"","    url = f\"https://hn.algolia.com/api/v1/items/{item_id}\"","    print(f\"  Fetching comments: {item_id}\")","    req = urllib.request.Request(url)","    with urllib.request.urlopen(req, timeout=30) as response:","        data = json.loads(response.read().decode(\"utf-8\"))","","    def parse_children(children) -\u003e list[Comment]:","        comments = []","        for child in children:","            if child.get(\"type\") != \"comment\" or child.get(\"text\") is None:","                continue","            comment = Comment(","                id=str(child.get(\"id\", \"\")),","                author=child.get(\"author\") or \"[deleted]\",","                text=clean_html_to_text(child.get(\"text\", \"\")),","                children=parse_children(child.get(\"children\", [])),","            )","            comments.append(comment)","        return comments","","    return parse_children(data.get(\"children\", []))","","","MAX_ARTICLE_CHARS = 15000","","","def fetch_article_content(url: str) -\u003e tuple[str, str | None]:","    \"\"\"Fetch and extract text from article URL. Returns (text, error).\"\"\"","    if not url.startswith(('http://', 'https://')):","        return \"\", \"Not a web URL\"","    if any(x in url for x in ['.pdf', 'youtube.com', 'youtu.be', 'twitter.com', 'x.com']):","        return \"\", f\"Skipped URL type\"","","    print(f\"  Fetching article: {url[:60]}...\")","    try:","        headers = {","            \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36\",","            \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",","        }","        req = urllib.request.Request(url, headers=headers)","        with urllib.request.urlopen(req, timeout=15) as response:","            content_type = response.headers.get('Content-Type', '')","            if 'text/html' not in content_type and 'application/xhtml' not in content_type:","                return \"\", f\"Not HTML: {content_type}\"","            data = response.read(5 * 1024 * 1024)","            try:","                page_html = data.decode('utf-8')","            except UnicodeDecodeError:","                page_html = data.decode('latin-1', errors='replace')","","        page_html = html.unescape(page_html)","        parser = ArticleTextParser()","        parser.feed(page_html)","        text = parser.get_text()","","        if len(text) \u003c 100:","            return \"\", \"Article too short or failed to extract\"","","        if len(text) \u003e MAX_ARTICLE_CHARS:","            truncate_at = text.rfind('. ', MAX_ARTICLE_CHARS - 500, MAX_ARTICLE_CHARS)","            if truncate_at == -1:","                truncate_at = MAX_ARTICLE_CHARS","            text = text[:truncate_at + 1] + \"\\n\\n[TRUNCATED]\"","","        return text, None","","    except urllib.error.HTTPError as e:","        return \"\", f\"HTTP {e.code}\"","    except urllib.error.URLError as e:","        return \"\", f\"URL error: {e.reason}\"","    except Exception as e:","        return \"\", f\"{type(e).__name__}: {e}\"","","","def clean_html_to_text(text: str) -\u003e str:","    \"\"\"Convert HN comment HTML to clean text.\"\"\"","    text = html.unescape(text)","    text = re.sub(r'\u003ca href=\"([^\"]+)\"[^\u003e]*\u003e([^\u003c]+)\u003c/a\u003e', r'[\\2](\\1)', text)","    text = re.sub(r'\u003ci\u003e([^\u003c]+)\u003c/i\u003e', r'*\\1*', text)","    text = re.sub(r'\u003cb\u003e([^\u003c]+)\u003c/b\u003e', r'**\\1**', text)","    text = re.sub(r'\u003ccode\u003e([^\u003c]+)\u003c/code\u003e', r'`\\1`', text)","    text = text.replace(\"\u003cp\u003e\", \"\\n\\n\").replace(\"\u003c/p\u003e\", \"\")","    text = re.sub(r'\u003c[^\u003e]+\u003e', '', text)","    text = re.sub(r'\\n{3,}', '\\n\\n', text)","    return text.strip()","","","# -----------------------------------------------------------------------------","# Prompt generation","# -----------------------------------------------------------------------------","","PROMPT_TEMPLATE = \"\"\"The following is an article that appeared on Hacker News 10 years ago, and the discussion thread.","","Let's use our benefit of hindsight now in 6 sections:","","1. Give a brief summary of the article and the discussion thread.","2. What ended up happening to this topic? (research the topic briefly and write a summary)","3. Give out awards for \"Most prescient\" and \"Most wrong\" comments, considering what happened.","4. Mention any other fun or notable aspects of the article or discussion.","5. Give out grades to specific people for their comments, considering what happened.","6. At the end, give a final score (from 0-10) for how interesting this article and its retrospect analysis was.","","As for the format of Section 5, use the header \"Final grades\" and follow it with simply an unordered list of people and their grades in the format of \"name: grade (optional comment)\". Here is an example:","","Final grades","- speckx: A+ (excellent predictions on ...)","- tosh: A (correctly predicted this or that ...)","- keepamovin: A","- bgwalter: D","- fsflover: F (completely wrong on ...)","","Your list may contain more people of course than just this toy example. Please follow the format exactly because I will be parsing it programmatically. The idea is that I will accumulate the grades for each account to identify the accounts that were over long periods of time the most prescient or the most wrong.","","As for the format of Section 6, use the prefix \"Article hindsight analysis interestingness score:\" and then the score (0-10) as a number. Give high scores to articles/discussions that are prominent, notable, or interesting in retrospect. Give low scores in cases where few predictions are made, or the topic is very niche or obscure, or the discussion is not very interesting in retrospect.","","Here is an example:","Article hindsight analysis interestingness score: 8","","---","","\"\"\"","","","def comments_to_markdown(comments: list[Comment], indent: int = 0) -\u003e str:","    \"\"\"Convert comment tree to markdown format.\"\"\"","    lines = []","    for comment in comments:","        prefix = \"  \" * indent","        lines.append(f\"{prefix}- **{comment.author}**: {comment.text}\")","        if comment.children:","            lines.append(comments_to_markdown(comment.children, indent + 1))","    return \"\\n\\n\".join(lines)","","","def generate_prompt(article: Article, article_text: str, article_error: str | None,","                    comments: list[Comment]) -\u003e str:","    \"\"\"Generate full LLM prompt for an article.\"\"\"","    lines = [","        PROMPT_TEMPLATE,","        f\"# {article.title}\",","        \"\",","        \"## Article Info\",","        \"\",","        f\"- **Original URL**: {article.url}\",","        f\"- **HN Discussion**: {article.hn_url}\",","        f\"- **Points**: {article.points}\",","        f\"- **Submitted by**: {article.author}\",","        f\"- **Comments**: {article.comment_count}\",","        \"\",","        \"## Article Content\",","        \"\",","    ]","","    if article_error:","        lines.append(f\"*Could not fetch article: {article_error}*\")","    else:","        lines.append(article_text)","","    lines.extend([","        \"\",","        \"## HN Discussion\",","        \"\",","        comments_to_markdown(comments),","    ])","","    return \"\\n\".join(lines)","","","# -----------------------------------------------------------------------------","# Grade parsing","# -----------------------------------------------------------------------------","","def parse_grades(text: str) -\u003e dict[str, dict]:","    \"\"\"Parse the Final grades section from LLM output.","","    Returns dict of username -\u003e {\"grade\": \"A\", \"rationale\": \"explanation...\"}","    \"\"\"","    grades = {}","    # Match \"Final grades\" with optional leading section number, #, or other prefixes","    pattern = r'(?:^|\\n)(?:\\d+[\\.\\)]\\s*)?(?:#+ *)?Final grades\\s*\\n'","    match = re.search(pattern, text, re.IGNORECASE)","    if not match:","        return grades","","    grades_section = text[match.end():]","    # Pattern: - username: GRADE (rationale text)","    # Also handle: - username (qualifier): GRADE (rationale)","    # Note: handle both ASCII +/- and Unicode minus (−)","    line_pattern = r'^[\\-\\*]\\s*([^:]+):\\s*([A-F][+\\-−]?)(?:\\s*\\(([^)]+)\\))?'","","    for line in grades_section.split('\\n'):","        line = line.strip()","        if not line:","            continue","        if line.startswith('#') or line.startswith('['):","            break","        m = re.match(line_pattern, line)","        if m:","            username = m.group(1).strip()","            grade = m.group(2).strip()","            rationale = m.group(3).strip() if m.group(3) else \"\"","            grades[username] = {\"grade\": grade, \"rationale\": rationale}","","    return grades","","","def grade_to_numeric(grade: str) -\u003e float:","    \"\"\"Convert letter grade to GPA.\"\"\"","    base = {'A': 4.0, 'B': 3.0, 'C': 2.0, 'D': 1.0, 'F': 0.0}","    if not grade:","        return 0.0","    value = base.get(grade[0].upper(), 0.0)","    if len(grade) \u003e 1:","        if grade[1] == '+':","            value += 0.3","        elif grade[1] in '-−':  # ASCII minus and Unicode minus","            value -= 0.3","    return value","","","def parse_interestingness_score(text: str) -\u003e int | None:","    \"\"\"Parse the interestingness score (0-10) from LLM output.\"\"\"","    pattern = r'Article hindsight analysis interestingness score:\\s*(\\d+)'","    match = re.search(pattern, text, re.IGNORECASE)","    if match:","        score = int(match.group(1))","        return max(0, min(10, score))  # Clamp to 0-10","    return None","","","# -----------------------------------------------------------------------------","# Pipeline stages","# -----------------------------------------------------------------------------","","def get_data_dir(target_date: str) -\u003e Path:","    \"\"\"Get the data directory for a given date.\"\"\"","    return Path(\"data\") / target_date","","","def get_output_dir(target_date: str | None = None) -\u003e Path:","    \"\"\"Get the output directory, optionally for a specific date.\"\"\"","    base = Path(\"output\")","    if target_date:","        return base / target_date","    return base","","","def stage_fetch(target_date: str, limit: int | None = None):","    \"\"\"Stage 1: Fetch frontpage and all article data.\"\"\"","    data_dir = get_data_dir(target_date)","    data_dir.mkdir(parents=True, exist_ok=True)","","    frontpage_file = data_dir / \"frontpage.json\"","","    # Fetch frontpage if not cached","    if frontpage_file.exists():","        print(f\"Loading cached frontpage from {frontpage_file}\")","        with open(frontpage_file) as f:","            articles = [Article(**a) for a in json.load(f)]","    else:","        articles = fetch_frontpage(target_date)","        with open(frontpage_file, 'w') as f:","            json.dump([asdict(a) for a in articles], f, indent=2)","        print(f\"Saved frontpage to {frontpage_file}\")","","    if limit:","        articles = articles[:limit]","","    print(f\"\\nFetching data for {len(articles)} articles...\")","","    for article in articles:","        article_dir = data_dir / article.item_id","        article_dir.mkdir(exist_ok=True)","","        # Save article metadata","        meta_file = article_dir / \"meta.json\"","        if not meta_file.exists():","            with open(meta_file, 'w') as f:","                json.dump(asdict(article), f, indent=2)","","        # Fetch article content","        article_file = article_dir / \"article.txt\"","        error_file = article_dir / \"article_error.txt\"","        if not article_file.exists() and not error_file.exists():","            text, error = fetch_article_content(article.url)","            if error:","                with open(error_file, 'w') as f:","                    f.write(error)","            else:","                with open(article_file, 'w') as f:","                    f.write(text)","            time.sleep(0.5)  # Be nice","","        # Fetch comments","        comments_file = article_dir / \"comments.json\"","        if not comments_file.exists():","            comments = fetch_comments(article.item_id)","            with open(comments_file, 'w') as f:","                json.dump([c.to_dict() for c in comments], f, indent=2)","            time.sleep(0.2)  # Be nice","","    print(f\"\\nFetch complete. Data saved to {data_dir}\")","","","def stage_prompt(target_date: str):","    \"\"\"Stage 2: Generate prompts for all articles.\"\"\"","    data_dir = get_data_dir(target_date)","","    for article_dir in sorted(data_dir.iterdir()):","        if not article_dir.is_dir():","            continue","","        prompt_file = article_dir / \"prompt.md\"","        if prompt_file.exists():","            continue","","        meta_file = article_dir / \"meta.json\"","        if not meta_file.exists():","            continue","","        with open(meta_file) as f:","            article = Article(**json.load(f))","","        # Load article content","        article_file = article_dir / \"article.txt\"","        error_file = article_dir / \"article_error.txt\"","        if article_file.exists():","            article_text = article_file.read_text()","            article_error = None","        elif error_file.exists():","            article_text = \"\"","            article_error = error_file.read_text()","        else:","            article_text = \"\"","            article_error = \"Not fetched\"","","        # Load comments","        comments_file = article_dir / \"comments.json\"","        if comments_file.exists():","            with open(comments_file) as f:","                comments = [Comment.from_dict(c) for c in json.load(f)]","        else:","            comments = []","","        # Generate prompt","        prompt = generate_prompt(article, article_text, article_error, comments)","        with open(prompt_file, 'w') as f:","            f.write(prompt)","","        print(f\"Generated prompt for {article.item_id}: {article.title[:50]}...\")","","    print(f\"\\nPrompts generated in {data_dir}\")","","","def stage_analyze(target_date: str, model: str = \"gpt-5.1\", max_workers: int = 5):","    \"\"\"Stage 3: Run LLM analysis on all prompts.\"\"\"","    from concurrent.futures import ThreadPoolExecutor, as_completed","    from dotenv import load_dotenv","    from openai import OpenAI","","    load_dotenv()","    client = OpenAI()","    data_dir = get_data_dir(target_date)","","    # Collect articles to analyze","    to_analyze = []","    for article_dir in sorted(data_dir.iterdir()):","        if not article_dir.is_dir():","            continue","","        prompt_file = article_dir / \"prompt.md\"","        response_file = article_dir / \"response.md\"","","        if not prompt_file.exists() or response_file.exists():","            continue","","        meta_file = article_dir / \"meta.json\"","        with open(meta_file) as f:","            article = Article(**json.load(f))","","        to_analyze.append((article_dir, article, prompt_file.read_text()))","","    if not to_analyze:","        print(\"No articles to analyze.\")","        return","","    print(f\"Analyzing {len(to_analyze)} articles with {max_workers} workers...\")","","    def analyze_one(item):","        article_dir, article, prompt = item","        response_file = article_dir / \"response.md\"","        try:","            response = client.responses.create(","                model=model,","                input=prompt,","                reasoning={\"effort\": \"medium\"},","                text={\"verbosity\": \"medium\"},","            )","            result = response.output_text","            with open(response_file, 'w') as f:","                f.write(result)","            return (article.item_id, article.title[:50], len(result), None)","        except Exception as e:","            return (article.item_id, article.title[:50], 0, str(e))","","    with ThreadPoolExecutor(max_workers=max_workers) as executor:","        futures = {executor.submit(analyze_one, item): item for item in to_analyze}","        for future in as_completed(futures):","            item_id, title, chars, error = future.result()","            if error:","                print(f\"  {item_id}: {title}... Error: {error}\")","            else:","                print(f\"  {item_id}: {title}... Done ({chars} chars)\")","","    print(f\"\\nAnalysis complete. Results in {data_dir}\")","","","def stage_parse(target_date: str):","    \"\"\"Stage 4: Parse grades from all responses.\"\"\"","    data_dir = get_data_dir(target_date)","    all_grades = {}  # username -\u003e list of {grade, rationale, article}","","    for article_dir in sorted(data_dir.iterdir()):","        if not article_dir.is_dir():","            continue","","        response_file = article_dir / \"response.md\"","        grades_file = article_dir / \"grades.json\"","        score_file = article_dir / \"score.json\"","","        if not response_file.exists():","            continue","","        response = response_file.read_text()","        grades = parse_grades(response)  # Now returns {username: {grade, rationale}}","        score = parse_interestingness_score(response)","","        with open(grades_file, 'w') as f:","            json.dump(grades, f, indent=2)","","        with open(score_file, 'w') as f:","            json.dump({\"interestingness\": score}, f, indent=2)","","        item_id = article_dir.name","        for username, grade_info in grades.items():","            if username not in all_grades:","                all_grades[username] = []","            all_grades[username].append({","                \"grade\": grade_info[\"grade\"],","                \"rationale\": grade_info[\"rationale\"],","                \"article\": item_id","            })","","        score_str = f\", score={score}\" if score is not None else \"\"","        print(f\"Parsed {len(grades)} grades from {item_id}{score_str}\")","","    # Save aggregated grades","    agg_file = data_dir / \"all_grades.json\"","    with open(agg_file, 'w') as f:","        json.dump(all_grades, f, indent=2)","","    print(f\"\\nParsed grades saved to {agg_file}\")","","    # Print summary","    if all_grades:","        print(\"\\n--- Grade Summary ---\")","        user_gpas = []","        for username, grades_list in all_grades.items():","            gpas = [grade_to_numeric(g[\"grade\"]) for g in grades_list]","            avg_gpa = sum(gpas) / len(gpas)","            user_gpas.append((username, avg_gpa, len(grades_list)))","","        user_gpas.sort(key=lambda x: x[1], reverse=True)","        for username, gpa, count in user_gpas[:10]:","            print(f\"  {username}: {gpa:.2f} ({count} articles)\")","","","def stage_clean(target_date: str, stage: str | None = None, article_id: str | None = None):","    \"\"\"Clean cached data for a date, optionally filtered by stage or article.\"\"\"","    data_dir = get_data_dir(target_date)","","    if not data_dir.exists():","        print(f\"No data directory for {target_date}\")","        return","","    # Define what files each stage produces","    stage_files = {","        \"fetch\": [\"meta.json\", \"article.txt\", \"article_error.txt\", \"comments.json\"],","        \"prompt\": [\"prompt.md\"],","        \"analyze\": [\"response.md\"],","        \"parse\": [\"grades.json\", \"score.json\"],","    }","","    # Stages and their downstream dependencies","    stage_order = [\"fetch\", \"prompt\", \"analyze\", \"parse\", \"render\"]","","    # Determine which stages to clean","    if stage:","        if stage not in stage_order:","            print(f\"Unknown stage: {stage}\")","            return","        # Clean this stage and all downstream stages","        stage_idx = stage_order.index(stage)","        stages_to_clean = stage_order[stage_idx:-1]  # exclude render (it's just summary.html)","    else:","        stages_to_clean = stage_order[:-1]  # all except render","","    files_to_delete = set()","    for s in stages_to_clean:","        files_to_delete.update(stage_files.get(s, []))","","    # Get article directories to clean","    if article_id:","        article_dirs = [data_dir / article_id]","        if not article_dirs[0].exists():","            print(f\"Article {article_id} not found\")","            return","    else:","        article_dirs = [d for d in data_dir.iterdir() if d.is_dir()]","","    # Clean files","    deleted_count = 0","    for article_dir in article_dirs:","        for filename in files_to_delete:","            filepath = article_dir / filename","            if filepath.exists():","                filepath.unlink()","                deleted_count += 1","","        # If cleaning fetch, remove the entire article directory if empty","        if \"fetch\" in stages_to_clean:","            if article_dir.exists() and not any(article_dir.iterdir()):","                article_dir.rmdir()","","    # Clean top-level files","    if not article_id:","        if \"fetch\" in stages_to_clean:","            frontpage = data_dir / \"frontpage.json\"","            if frontpage.exists():","                frontpage.unlink()","                deleted_count += 1","","        if \"parse\" in stages_to_clean:","            all_grades = data_dir / \"all_grades.json\"","            if all_grades.exists():","                all_grades.unlink()","                deleted_count += 1","","        # Always clean summary.html if cleaning any stage","        summary = data_dir / \"summary.html\"","        if summary.exists():","            summary.unlink()","            deleted_count += 1","","    stage_desc = f\"stage '{stage}' and downstream\" if stage else \"all stages\"","    article_desc = f\" for article {article_id}\" if article_id else \"\"","    print(f\"Cleaned {stage_desc}{article_desc}: {deleted_count} files deleted\")","","","def get_all_output_dates() -\u003e list[str]:","    \"\"\"Get all dates that have been rendered to output directory.\"\"\"","    output_base = get_output_dir()","    if not output_base.exists():","        return []","    dates = []","    for d in output_base.iterdir():","        if d.is_dir() and (d / \"index.html\").exists():","            dates.append(d.name)","    return sorted(dates)","","","def stage_render(target_date: str, update_index: bool = True):","    \"\"\"Stage 5: Render HTML summary to output directory.\"\"\"","    data_dir = get_data_dir(target_date)","    output_dir = get_output_dir(target_date)","    output_dir.mkdir(parents=True, exist_ok=True)","","    # Load frontpage","    frontpage_file = data_dir / \"frontpage.json\"","    with open(frontpage_file) as f:","        articles = [Article(**a) for a in json.load(f)]","","    # Collect all article data","    articles_data = []","    for article in articles:","        article_dir = data_dir / article.item_id","","        # Load response if available","        response_file = article_dir / \"response.md\"","        response = response_file.read_text() if response_file.exists() else \"\"","","        # Load prompt if available","        prompt_file = article_dir / \"prompt.md\"","        prompt = prompt_file.read_text() if prompt_file.exists() else \"\"","","        # Load interestingness score if available","        score_file = article_dir / \"score.json\"","        score = None","        if score_file.exists():","            with open(score_file) as f:","                score_data = json.load(f)","                score = score_data.get(\"interestingness\")","","        # Load grades if available","        grades_file = article_dir / \"grades.json\"","        grades = {}","        if grades_file.exists():","            with open(grades_file) as f:","                grades = json.load(f)","","        articles_data.append({","            \"article\": article,","            \"response\": response,","            \"prompt\": prompt,","            \"score\": score,","            \"grades\": grades,","        })","","    # Get all dates for navigation","    all_dates = get_all_output_dates()","    # Add current date if not yet in list (we're about to render it)","    if target_date not in all_dates:","        all_dates = sorted(all_dates + [target_date])","    current_idx = all_dates.index(target_date)","    prev_date = all_dates[current_idx - 1] if current_idx \u003e 0 else None","    next_date = all_dates[current_idx + 1] if current_idx \u003c len(all_dates) - 1 else None","","    # Build HTML","    html_parts = [f\"\"\"\u003c!DOCTYPE html\u003e","\u003chtml\u003e","\u003chead\u003e","    \u003cmeta charset=\"utf-8\"\u003e","    \u003ctitle\u003eHN Time Capsule - {target_date}\u003c/title\u003e","    \u003cstyle\u003e","        * {{ box-sizing: border-box; }}","        body {{ font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;","               margin: 0; padding: 0; line-height: 1.6; height: 100vh; overflow: hidden; }}","        .container {{ display: flex; height: 100vh; }}","","        /* Sidebar */","        .sidebar {{ width: 350px; min-width: 350px; background: #f5f5f5; border-right: 1px solid #ddd;","                   overflow-y: auto; padding: 15px; }}","        .sidebar h1 {{ color: #ff6600; font-size: 1.3em; margin: 0 0 5px 0; }}","        .sidebar h1 a {{ color: #ff6600; text-decoration: none; }}","        .sidebar h1 a:hover {{ text-decoration: underline; }}","        .sidebar h2 {{ font-size: 0.95em; color: #666; margin: 0 0 8px 0; font-weight: normal; }}","        .nav {{ display: flex; gap: 10px; margin-bottom: 15px; font-size: 0.85em; }}","        .nav a {{ color: #0066cc; text-decoration: none; }}","        .nav a:hover {{ text-decoration: underline; }}","        .nav .disabled {{ color: #ccc; }}","        .article-item {{ padding: 10px; margin-bottom: 8px; background: #fff; border-radius: 6px;","                        cursor: pointer; border: 2px solid transparent; transition: all 0.15s;","                        display: flex; align-items: flex-start; gap: 10px; }}","        .article-item:hover {{ border-color: #ff6600; }}","        .article-item.selected {{ border-color: #ff6600; background: #fff5f0; }}","        .article-item .score-box {{ width: 36px; height: 36px; border-radius: 6px; display: flex;","                                   align-items: center; justify-content: center; font-weight: bold;","                                   font-size: 0.85em; flex-shrink: 0; }}","        .article-item .score-box.score-10 {{ background: #c2410c; color: white; }}","        .article-item .score-box.score-9 {{ background: #ea580c; color: white; }}","        .article-item .score-box.score-8 {{ background: #f97316; color: white; }}","        .article-item .score-box.score-7 {{ background: #fb923c; color: #333; }}","        .article-item .score-box.score-6 {{ background: #fdba74; color: #333; }}","        .article-item .score-box.score-5 {{ background: #fed7aa; color: #333; }}","        .article-item .score-box.score-4 {{ background: #e5e7eb; color: #666; }}","        .article-item .score-box.score-3 {{ background: #d1d5db; color: #666; }}","        .article-item .score-box.score-2 {{ background: #9ca3af; color: white; }}","        .article-item .score-box.score-1 {{ background: #6b7280; color: white; }}","        .article-item .score-box.score-0 {{ background: #4b5563; color: white; }}","        .article-item .score-box.score-none {{ background: #eee; color: #999; font-size: 0.7em; }}","        .article-item .content {{ flex: 1; min-width: 0; }}","        .article-item .title {{ font-size: 0.9em; font-weight: 500; margin-bottom: 4px; color: #333; }}","        .article-item .meta {{ font-size: 0.75em; color: #888; }}","        .score {{ display: inline-block; padding: 2px 6px; border-radius: 10px; font-weight: bold;","                 font-size: 0.7em; margin-left: 6px; vertical-align: middle; }}","        .score.score-10 {{ background: #c2410c; color: white; }}","        .score.score-9 {{ background: #ea580c; color: white; }}","        .score.score-8 {{ background: #f97316; color: white; }}","        .score.score-7 {{ background: #fb923c; color: #333; }}","        .score.score-6 {{ background: #fdba74; color: #333; }}","        .score.score-5 {{ background: #fed7aa; color: #333; }}","        .score.score-4 {{ background: #e5e7eb; color: #666; }}","        .score.score-3 {{ background: #d1d5db; color: #666; }}","        .score.score-2 {{ background: #9ca3af; color: white; }}","        .score.score-1 {{ background: #6b7280; color: white; }}","        .score.score-0 {{ background: #4b5563; color: white; }}","","        /* Main content */","        .main {{ flex: 1; overflow-y: auto; padding: 30px 40px; background: #fff; }}","        .main-inner {{ max-width: 800px; }}","        .main h1 {{ margin-top: 0; font-size: 1.5em; color: #333; }}","        .main .article-meta {{ color: #666; font-size: 0.9em; margin-bottom: 20px; padding-bottom: 15px;","                              border-bottom: 1px solid #eee; }}","        .main .article-meta a {{ color: #0066cc; }}","        .analysis {{ font-size: 0.95em; line-height: 1.5; }}","        .grades-section {{ background: #f9f9f9; padding: 15px; border-radius: 6px; margin-top: 20px; }}","        .grade {{ display: inline-block; padding: 2px 8px; margin: 2px; border-radius: 3px; font-size: 0.8em; }}","        .grade-a {{ background: #c6efce; color: #006100; }}","        .grade-b {{ background: #ffeb9c; color: #9c5700; }}","        .grade-c {{ background: #ffc7ce; color: #9c0006; }}","        .grade-d, .grade-f {{ background: #f4cccc; color: #990000; }}","        .prompt-section {{ margin-top: 20px; }}","        .prompt-section summary {{ cursor: pointer; color: #0066cc; font-size: 0.9em; }}","        .prompt-content {{ white-space: pre-wrap; font-size: 0.85em; background: #f5f5f5;","                          padding: 15px; border-radius: 4px; margin-top: 10px; max-height: 400px; overflow-y: auto; }}","        .placeholder {{ color: #999; text-align: center; margin-top: 100px; }}","","        /* Markdown content styling */","        .analysis h1, .analysis h2, .analysis h3 {{ margin-top: 1.2em; margin-bottom: 0.4em; color: #333; }}","        .analysis h1 {{ font-size: 1.3em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }}","        .analysis h2 {{ font-size: 1.15em; }}","        .analysis h3 {{ font-size: 1.05em; }}","        .analysis p {{ margin: 0.6em 0; }}","        .analysis ul, .analysis ol {{ margin: 0.6em 0; padding-left: 1.5em; }}","        .analysis li {{ margin: 0.25em 0; }}","        .analysis strong {{ color: #333; }}","        .analysis blockquote {{ border-left: 3px solid #ff6600; margin: 0.8em 0; padding-left: 1em; color: #555; }}","        .analysis code {{ background: #f5f5f5; padding: 0.15em 0.4em; border-radius: 3px; font-size: 0.9em; }}","        .analysis pre {{ background: #f5f5f5; padding: 0.8em; border-radius: 4px; overflow-x: auto; margin: 0.6em 0; }}","        .analysis pre code {{ background: none; padding: 0; }}","        .analysis hr {{ border: none; border-top: 1px solid #eee; margin: 1em 0; }}","    \u003c/style\u003e","    \u003cscript src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"\u003e\u003c/script\u003e","\u003c/head\u003e","\u003cbody\u003e","    \u003cdiv class=\"container\"\u003e","        \u003cdiv class=\"sidebar\"\u003e","            \u003ch1\u003e\u003ca href=\"../index.html\"\u003eHN Time Capsule\u003c/a\u003e\u003c/h1\u003e","            \u003ch2\u003e{target_date} (10 years ago)\u003c/h2\u003e","            \u003cdiv class=\"nav\"\u003e","                {f'\u003ca href=\"../{prev_date}/index.html\"\u003e\u0026larr; {prev_date}\u003c/a\u003e' if prev_date else '\u003cspan class=\"disabled\"\u003e\u0026larr; prev\u003c/span\u003e'}","                \u003cspan\u003e|\u003c/span\u003e","                {f'\u003ca href=\"../{next_date}/index.html\"\u003e{next_date} \u0026rarr;\u003c/a\u003e' if next_date else '\u003cspan class=\"disabled\"\u003enext \u0026rarr;\u003c/span\u003e'}","            \u003c/div\u003e","\"\"\"]","","    # Sidebar items","    for i, data in enumerate(articles_data):","        article = data[\"article\"]","        score = data[\"score\"]","        if score is not None:","            score_class = f\"score-{score}\"","            score_box = f'\u003cdiv class=\"score-box {score_class}\"\u003e{score}\u003c/div\u003e'","        else:","            score_box = '\u003cdiv class=\"score-box score-none\"\u003e--\u003c/div\u003e'","","        selected = \"selected\" if i == 0 else \"\"","        html_parts.append(f\"\"\"","            \u003cdiv class=\"article-item {selected}\" id=\"article-{article.item_id}\" onclick=\"selectArticle({i})\"\u003e","                {score_box}","                \u003cdiv class=\"content\"\u003e","                    \u003cdiv class=\"title\"\u003e{article.rank}. {html.escape(article.title)}\u003c/div\u003e","                    \u003cdiv class=\"meta\"\u003e{article.points} pts \u0026middot; {article.comment_count} comments\u003c/div\u003e","                \u003c/div\u003e","            \u003c/div\u003e\"\"\")","","    html_parts.append(\"\"\"","        \u003c/div\u003e","        \u003cdiv class=\"main\"\u003e","            \u003cdiv class=\"main-inner\" id=\"main-content\"\u003e","                \u003cdiv class=\"placeholder\"\u003eSelect an article from the sidebar\u003c/div\u003e","            \u003c/div\u003e","        \u003c/div\u003e","    \u003c/div\u003e","","    \u003cscript\u003e","    // Configure marked for tighter output","    marked.setOptions({ breaks: false, gfm: true });","","    // Preprocess markdown to remove excessive whitespace","    function cleanMarkdown(md) {","        return md","            .replace(/  +$/gm, '')","            .replace(/\\\\n\\\\n\\\\n+/g, '\\\\n\\\\n');","    }","","    const articles = [\"\"\")","","    # JavaScript data","    for i, data in enumerate(articles_data):","        article = data[\"article\"]","        response = data[\"response\"]","        prompt = data[\"prompt\"]","        grades = data[\"grades\"]","        score = data[\"score\"]","","        # Build grades HTML","        grade_html = \"\"","        if grades:","            # Handle both old format (username: \"grade\") and new format (username: {grade, rationale})","            def get_grade(item):","                val = item[1]","                if isinstance(val, dict):","                    return val.get(\"grade\", \"\")","                return val","            sorted_grades = sorted(grades.items(), key=lambda x: -grade_to_numeric(get_grade(x)))","            for username, grade_info in sorted_grades[:20]:","                grade = get_grade((username, grade_info))","                if not grade:","                    continue","                grade_class = f\"grade-{grade[0].lower()}\"","                grade_html += f'\u003cspan class=\"grade {grade_class}\"\u003e{html.escape(username)}: {grade}\u003c/span\u003e '","","        # Escape for JS","        title_js = json.dumps(article.title)","        url_js = json.dumps(article.url)","        hn_url_js = json.dumps(article.hn_url)","        response_js = json.dumps(html.escape(response))","        prompt_js = json.dumps(html.escape(prompt))","        grade_html_js = json.dumps(grade_html)","","        html_parts.append(f\"\"\"","        {{","            id: \"{article.item_id}\",","            title: {title_js},","            url: {url_js},","            hn_url: {hn_url_js},","            points: {article.points},","            comments: {article.comment_count},","            score: {json.dumps(score)},","            response: {response_js},","            prompt: {prompt_js},","            grades: {grade_html_js}","        }},\"\"\")","","    html_parts.append(\"\"\"","    ];","","    function selectArticle(idx, updateHash = true) {","        // Update sidebar selection","        document.querySelectorAll('.article-item').forEach((el, i) =\u003e {","            el.classList.toggle('selected', i === idx);","        });","","        const a = articles[idx];","        const scoreHtml = a.score !== null ?","            `\u003cspan class=\"score score-${a.score}\"\u003e${a.score}/10\u003c/span\u003e` : '';","","        document.getElementById('main-content').innerHTML = `","            \u003ch1\u003e${a.title}${scoreHtml}\u003c/h1\u003e","            \u003cdiv class=\"article-meta\"\u003e","                ${a.points} points \u0026middot; ${a.comments} comments \u0026middot;","                \u003ca href=\"${a.url}\" target=\"_blank\"\u003eOriginal Article\u003c/a\u003e \u0026middot;","                \u003ca href=\"${a.hn_url}\" target=\"_blank\"\u003eHN Discussion\u003c/a\u003e","            \u003c/div\u003e","            ${a.grades ? `\u003cdiv class=\"grades-section\"\u003e\u003cstrong\u003eGrades:\u003c/strong\u003e ${a.grades}\u003c/div\u003e` : ''}","            \u003cdiv class=\"analysis\"\u003e${a.response ? marked.parse(cleanMarkdown(a.response)) : '\u003cem\u003eNo analysis available\u003c/em\u003e'}\u003c/div\u003e","            ${a.prompt ? `\u003cdetails class=\"prompt-section\"\u003e\u003csummary\u003eView LLM prompt\u003c/summary\u003e\u003cdiv class=\"prompt-content\"\u003e${a.prompt}\u003c/div\u003e\u003c/details\u003e` : ''}","        `;","","        // Update URL hash without scrolling","        if (updateHash) {","            history.replaceState(null, '', '#article-' + a.id);","        }","    }","","    function selectArticleById(id) {","        const idx = articles.findIndex(a =\u003e a.id === id);","        if (idx \u003e= 0) {","            selectArticle(idx, false);","            // Scroll sidebar item into view","            document.getElementById('article-' + id)?.scrollIntoView({block: 'nearest'});","        }","    }","","    // Handle initial load and hash changes","    function handleHash() {","        const hash = window.location.hash;","        if (hash.startsWith('#article-')) {","            const id = hash.substring(9);  // Remove '#article-'","            selectArticleById(id);","            return true;","        }","        return false;","    }","","    // On load: check for hash, otherwise select first","    if (!handleHash() \u0026\u0026 articles.length \u003e 0) {","        selectArticle(0);","    }","","    // Handle hash changes (e.g., back/forward navigation)","    window.addEventListener('hashchange', handleHash);","    \u003c/script\u003e","\u003c/body\u003e","\u003c/html\u003e\"\"\")","","    output_file = output_dir / \"index.html\"","    with open(output_file, 'w') as f:","        f.write(\"\\n\".join(html_parts))","","    print(f\"Rendered HTML to {output_file}\")","","    if update_index:","        stage_render_index()","","","def stage_render_index():","    \"\"\"Render the main index page and re-render all day pages to update navigation.\"\"\"","    output_base = get_output_dir()","    output_base.mkdir(parents=True, exist_ok=True)","","    # Find all dates that have data (not just output)","    data_base = Path(\"data\")","    all_dates = []","    if data_base.exists():","        for d in data_base.iterdir():","            if d.is_dir() and (d / \"frontpage.json\").exists():","                all_dates.append(d.name)","    all_dates = sorted(all_dates)","","    if not all_dates:","        print(\"No dates to index.\")","        return","","    # Re-render all day pages to update prev/next navigation","    print(f\"Re-rendering {len(all_dates)} day pages...\")","    for d in all_dates:","        stage_render(d, update_index=False)","","    html = \"\"\"\u003c!DOCTYPE html\u003e","\u003chtml\u003e","\u003chead\u003e","    \u003cmeta charset=\"utf-8\"\u003e","    \u003ctitle\u003eHN Time Capsule\u003c/title\u003e","    \u003cstyle\u003e","        * { box-sizing: border-box; }","        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;","               max-width: 800px; margin: 0 auto; padding: 40px 20px; line-height: 1.6; }","        h1 { color: #ff6600; }","        .intro { color: #666; margin-bottom: 30px; }","        .hall-of-fame-link { display: inline-block; margin-bottom: 30px; padding: 12px 24px;","                            background: linear-gradient(135deg, #fbbf24, #f59e0b); color: white;","                            text-decoration: none; border-radius: 8px; font-weight: 600;","                            transition: transform 0.15s, box-shadow 0.15s; }","        .hall-of-fame-link:hover { box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4); }","        h2 { color: #333; margin-top: 40px; margin-bottom: 20px; font-size: 1.2em; }","        .date-list { list-style: none; padding: 0; }","        .date-list li { margin-bottom: 10px; }","        .date-list a { display: block; padding: 15px 20px; background: #f5f5f5; border-radius: 6px;","                      text-decoration: none; color: #333; transition: all 0.15s; }","        .date-list a:hover { background: #ff6600; color: white; }","        .date-list .date { font-weight: 500; }","        .date-list .desc { font-size: 0.85em; color: #888; margin-top: 3px; }","        .date-list a:hover .desc { color: rgba(255,255,255,0.8); }","    \u003c/style\u003e","\u003c/head\u003e","\u003cbody\u003e","    \u003ch1\u003eHN Time Capsule\u003c/h1\u003e","    \u003cp class=\"intro\"\u003e","        LLMs revisit Hacker News frontpages from 10 years ago (December 2015), with the benefit of hindsight.","        Each day's articles and comments are analyzed by ChatGPT 5.1 (with thinking + browser tool) to compare what was said to what actually happened and users are graded on how prescient they were in retrospect. 30 articles per front page and 31 of them =\u003e 930 GPT 5.1 Thinking calls led to total cost of ~$60.","    \u003c/p\u003e","    \u003ch2\u003eBrowse by User\u003c/h2\u003e","    \u003ca href=\"hall-of-fame.html\" class=\"hall-of-fame-link\"\u003eHall of Fame\u003c/a\u003e","    \u003ch2\u003eBrowse by Date\u003c/h2\u003e","    \u003cul class=\"date-list\"\u003e","\"\"\"","","    for d in reversed(all_dates):  # Most recent first","        html += f\"\"\"        \u003cli\u003e","            \u003ca href=\"{d}/index.html\"\u003e","                \u003cdiv class=\"date\"\u003e{d}\u003c/div\u003e","                \u003cdiv class=\"desc\"\u003e10 years ago today\u003c/div\u003e","            \u003c/a\u003e","        \u003c/li\u003e","\"\"\"","","    html += \"\"\"    \u003c/ul\u003e","\u003c/body\u003e","\u003c/html\u003e\"\"\"","","    output_file = output_base / \"index.html\"","    with open(output_file, 'w') as f:","        f.write(html)","","    print(f\"Rendered index to {output_file} ({len(all_dates)} dates)\")","","    # Also render the Hall of Fame","    stage_render_hall_of_fame()","","","def stage_render_hall_of_fame():","    \"\"\"Render the Hall of Fame page aggregating all user grades across all dates.\"\"\"","    output_base = get_output_dir()","    data_base = Path(\"data\")","","    # Collect all grades from all dates","    all_user_grades = {}  # username -\u003e list of {grade, rationale, article, date, article_title, hn_url}","","    if not data_base.exists():","        print(\"No data directory found.\")","        return","","    for date_dir in sorted(data_base.iterdir()):","        if not date_dir.is_dir():","            continue","","        frontpage_file = date_dir / \"frontpage.json\"","        all_grades_file = date_dir / \"all_grades.json\"","","        if not all_grades_file.exists():","            continue","","        # Load frontpage for article titles","        article_info = {}","        if frontpage_file.exists():","            with open(frontpage_file) as f:","                for article in json.load(f):","                    article_info[article[\"item_id\"]] = {","                        \"title\": article[\"title\"],","                        \"hn_url\": article[\"hn_url\"]","                    }","","        # Load grades","        with open(all_grades_file) as f:","            grades_data = json.load(f)","","        target_date = date_dir.name","        for username, grade_list in grades_data.items():","            if username not in all_user_grades:","                all_user_grades[username] = []","","            for g in grade_list:","                article_id = g[\"article\"]","                info = article_info.get(article_id, {})","                all_user_grades[username].append({","                    \"grade\": g[\"grade\"],","                    \"rationale\": g.get(\"rationale\", \"\"),","                    \"article_id\": article_id,","                    \"date\": target_date,","                    \"article_title\": info.get(\"title\", f\"Article {article_id}\"),","                    \"hn_url\": info.get(\"hn_url\", f\"https://news.ycombinator.com/item?id={article_id}\")","                })","","    if not all_user_grades:","        print(\"No grades found to render.\")","        return","","    # Calculate stats for each user","    user_stats = []","    all_gpas = []  # Collect all GPAs for global mean","    for username, grades in all_user_grades.items():","        gpas = [grade_to_numeric(g[\"grade\"]) for g in grades]","        all_gpas.extend(gpas)","        avg_gpa = sum(gpas) / len(gpas)","        user_stats.append({","            \"username\": username,","            \"avg_gpa\": avg_gpa,","            \"num_grades\": len(grades),","            \"grades\": grades","        })","","    # Filter to users with at least 3 grades","    user_stats = [u for u in user_stats if u[\"num_grades\"] \u003e= 3]","","    # Bayesian weighted rating (IMDB formula)","    # weighted = (v * R + m * C) / (v + m)","    # v = number of votes, R = user's average, m = prior weight, C = global mean","    global_mean = sum(all_gpas) / len(all_gpas) if all_gpas else 3.0","    m = 3  # Prior weight - effectively adds 3 \"average\" votes to each user","","    for u in user_stats:","        v = u[\"num_grades\"]","        R = u[\"avg_gpa\"]","        u[\"weighted_gpa\"] = (v * R + m * global_mean) / (v + m)","","    # Sort by weighted GPA (highest first)","    user_stats.sort(key=lambda x: -x[\"weighted_gpa\"])","","    # Generate HTML","    def grade_color(grade: str) -\u003e str:","        \"\"\"Return background color for a grade with +/- variations.\"\"\"","        # Color mapping: each grade has base, plus, minus variants","        colors = {","            'A+': '#15803d',  # dark green","            'A':  '#22c55e',  # green","            'A-': '#4ade80',  # light green","            'A−': '#4ade80',  # light green (unicode minus)","            'B+': '#1d4ed8',  # dark blue","            'B':  '#3b82f6',  # blue","            'B-': '#60a5fa',  # light blue","            'B−': '#60a5fa',  # light blue (unicode minus)","            'C+': '#d97706',  # dark amber","            'C':  '#f59e0b',  # amber","            'C-': '#fbbf24',  # light amber","            'C−': '#fbbf24',  # light amber (unicode minus)","            'D+': '#ea580c',  # dark orange","            'D':  '#f97316',  # orange","            'D-': '#fb923c',  # light orange","            'D−': '#fb923c',  # light orange (unicode minus)","            'F':  '#ef4444',  # red","        }","        return colors.get(grade, '#6b7280')  # gray fallback","","    page_html = \"\"\"\u003c!DOCTYPE html\u003e","\u003chtml\u003e","\u003chead\u003e","    \u003cmeta charset=\"utf-8\"\u003e","    \u003ctitle\u003eHall of Fame - HN Time Capsule\u003c/title\u003e","    \u003cstyle\u003e","        *{box-sizing:border-box}","        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;max-width:1000px;margin:0 auto;padding:40px 20px;line-height:1.6}","        h1{color:#ff6600}","        .i{color:#666;margin-bottom:30px}","        .b{margin-bottom:20px}","        .b a{color:#ff6600;text-decoration:none}","        .b a:hover{text-decoration:underline}","        .uc{background:#f9fafb;border-radius:8px;padding:20px;margin-bottom:20px;border:1px solid #e5e7eb}","        .uh{display:flex;align-items:center;gap:15px;margin-bottom:15px}","        .un{font-size:1.25em;font-weight:600}","        .un a{color:#333;text-decoration:none}","        .un a:hover{color:#ff6600}","        .us{color:#666;font-size:0.9em}","        .ag{background:#ff6600;color:white;padding:4px 10px;border-radius:4px;font-weight:600;font-size:0.9em}","        .gl{display:flex;flex-direction:column;gap:10px}","        .gi{display:flex;align-items:flex-start;gap:12px;padding:10px;background:white;border-radius:6px;border:1px solid #e5e7eb}","        .gb{min-width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:white;font-weight:700;font-size:0.85em}","        .gc{flex:1}","        .ga{font-weight:500;margin-bottom:4px}","        .ga a{color:#333;text-decoration:none}","        .ga a:hover{color:#ff6600}","        .gr{color:#666;font-size:0.9em;font-style:italic}","        .gm{font-size:0.8em;color:#999;margin-top:4px}","        .gm a{color:#ff6600;text-decoration:none}","        .gm a:hover{text-decoration:underline}","        .rk{font-size:1.5em;font-weight:700;color:#d1d5db;min-width:40px}","        .rk.g{color:#fbbf24}","        .rk.s{color:#9ca3af}","        .rk.z{color:#d97706}","    \u003c/style\u003e","\u003c/head\u003e","\u003cbody\u003e","    \u003cdiv class=\"b\"\u003e\u003ca href=\"index.html\"\u003e\u0026larr; Back to dates\u003c/a\u003e\u003c/div\u003e","    \u003ch1\u003eHall of Fame\u003c/h1\u003e","    \u003cp class=\"i\"\u003e","        The most prescient Hacker News commenters, ranked by their average grade across all analyzed threads.","        Grades are assigned by an LLM evaluating how well each comment predicted the future with 10 years of hindsight.","    \u003c/p\u003e","\"\"\"","","    for i, user in enumerate(user_stats):","        rank = i + 1","        rank_class = \"\"","        if rank == 1:","            rank_class = \"g\"","        elif rank == 2:","            rank_class = \"s\"","        elif rank == 3:","            rank_class = \"z\"","","        # Format GPA as letter grade equivalent (use weighted GPA for ranking/display)","        gpa = user[\"weighted_gpa\"]","        if gpa \u003e= 3.85:","            gpa_letter = \"A\"","        elif gpa \u003e= 3.5:","            gpa_letter = \"A-\"","        elif gpa \u003e= 3.15:","            gpa_letter = \"B+\"","        elif gpa \u003e= 2.85:","            gpa_letter = \"B\"","        elif gpa \u003e= 2.5:","            gpa_letter = \"B-\"","        elif gpa \u003e= 2.15:","            gpa_letter = \"C+\"","        elif gpa \u003e= 1.85:","            gpa_letter = \"C\"","        elif gpa \u003e= 1.5:","            gpa_letter = \"C-\"","        elif gpa \u003e= 1.15:","            gpa_letter = \"D+\"","        elif gpa \u003e= 0.85:","            gpa_letter = \"D\"","        else:","            gpa_letter = \"F\"","","        hn_user_url = f\"https://news.ycombinator.com/user?id={html.escape(user['username'])}\"","","        page_html += f\"\"\"\u003cdiv class=\"uc\"\u003e\u003cdiv class=\"uh\"\u003e\u003cdiv class=\"rk {rank_class}\"\u003e#{rank}\u003c/div\u003e\u003cdiv class=\"un\"\u003e\u003ca href=\"{hn_user_url}\" target=\"_blank\"\u003e{html.escape(user['username'])}\u003c/a\u003e\u003c/div\u003e\u003cdiv class=\"ag\"\u003e{gpa_letter} ({gpa:.2f})\u003c/div\u003e\u003cdiv class=\"us\"\u003e{user['num_grades']} grade{\"s\" if user['num_grades'] \u003e 1 else \"\"}\u003c/div\u003e\u003c/div\u003e\u003cdiv class=\"gl\"\u003e\"\"\"","","        # Sort grades by grade (best first)","        sorted_grades = sorted(user[\"grades\"], key=lambda g: -grade_to_numeric(g[\"grade\"]))","","        for g in sorted_grades:","            color = grade_color(g[\"grade\"])","            rationale_part = f'\u003cdiv class=\"gr\"\u003e\"{html.escape(g[\"rationale\"])}\"\u003c/div\u003e' if g[\"rationale\"] else \"\"","            analysis_url = f\"{g['date']}/index.html#article-{g['article_id']}\"","","            page_html += f\"\"\"\u003cdiv class=\"gi\"\u003e\u003cdiv class=\"gb\" style=\"background:{color}\"\u003e{g['grade']}\u003c/div\u003e\u003cdiv class=\"gc\"\u003e\u003cdiv class=\"ga\"\u003e\u003ca href=\"{analysis_url}\"\u003e{html.escape(g['article_title'])}\u003c/a\u003e\u003c/div\u003e{rationale_part}\u003cdiv class=\"gm\"\u003e\u003ca href=\"{analysis_url}\"\u003eView\u003c/a\u003e \u0026middot; \u003ca href=\"{g['hn_url']}\" target=\"_blank\"\u003eHN\u003c/a\u003e \u0026middot; {g['date']}\u003c/div\u003e\u003c/div\u003e\u003c/div\u003e\"\"\"","","        page_html += \"\"\"\u003c/div\u003e\u003c/div\u003e","\"\"\"","","    page_html += \"\"\"\u003c/body\u003e","\u003c/html\u003e\"\"\"","","    output_file = output_base / \"hall-of-fame.html\"","    with open(output_file, 'w') as f:","        f.write(page_html)","","    print(f\"Rendered Hall of Fame to {output_file} ({len(user_stats)} users)\")","","","# -----------------------------------------------------------------------------","# CLI","# -----------------------------------------------------------------------------","","def main():","    import argparse","","    parser = argparse.ArgumentParser(description=\"HN Time Capsule Pipeline\")","    parser.add_argument(\"stage\", choices=[\"fetch\", \"prompt\", \"analyze\", \"parse\", \"render\", \"render-index\", \"all\", \"clean\"],","                        help=\"Pipeline stage to run\")","    parser.add_argument(\"--date\", default=None, help=\"Target date (YYYY-MM-DD), defaults to 10 years ago\")","    parser.add_argument(\"--limit\", type=int, default=None, help=\"Limit number of articles (for testing)\")","    parser.add_argument(\"--model\", default=\"gpt-5.1\", help=\"OpenAI model for analysis\")","    parser.add_argument(\"--workers\", type=int, default=15, help=\"Number of parallel workers for analysis\")","    parser.add_argument(\"--clean-stage\", choices=[\"fetch\", \"prompt\", \"analyze\", \"parse\"],","                        help=\"For clean: only clean this stage and downstream (default: all)\")","    parser.add_argument(\"--article\", help=\"For clean: only clean specific article by item_id\")","","    args = parser.parse_args()","","    if args.date:","        target_date = args.date","    else:","        today = date.today()","        target_date = today.replace(year=today.year - 10).isoformat()","","    print(f\"Target date: {target_date}\\n\")","","    if args.stage == \"clean\":","        stage_clean(target_date, args.clean_stage, args.article)","    elif args.stage == \"render-index\":","        stage_render_index()","    else:","        if args.stage == \"fetch\" or args.stage == \"all\":","            stage_fetch(target_date, args.limit)","        if args.stage == \"prompt\" or args.stage == \"all\":","            stage_prompt(target_date)","        if args.stage == \"analyze\" or args.stage == \"all\":","            stage_analyze(target_date, args.model, args.workers)","        if args.stage == \"parse\" or args.stage == \"all\":","            stage_parse(target_date)","        if args.stage == \"render\" or args.stage == \"all\":","            stage_render(target_date)  # This also calls stage_render_index()","","","if __name__ == \"__main__\":","    main()"],"stylingDirectives":null,"colorizedLines":["\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","\u003cspan class=pl-s\u003eHN Time Capsule Pipeline\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eStages:\u003c/span\u003e","\u003cspan class=pl-s\u003e1. fetch    - Fetch frontpage and articles for a given date\u003c/span\u003e","\u003cspan class=pl-s\u003e2. prompt   - Generate LLM prompts for each article\u003c/span\u003e","\u003cspan class=pl-s\u003e3. analyze  - Run LLM analysis on prompts\u003c/span\u003e","\u003cspan class=pl-s\u003e4. parse    - Parse grades from LLM responses\u003c/span\u003e","\u003cspan class=pl-s\u003e5. render   - Generate HTML summary\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003eos\u003c/span\u003e","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003etime\u003c/span\u003e","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-s1\u003erequest\u003c/span\u003e","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-s1\u003eerror\u003c/span\u003e","\u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003edataclasses\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003edataclass\u003c/span\u003e, \u003cspan class=pl-s1\u003efield\u003c/span\u003e, \u003cspan class=pl-s1\u003easdict\u003c/span\u003e","\u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003edatetime\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003edate\u003c/span\u003e","\u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-s1\u003eparser\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-v\u003eHTMLParser\u003c/span\u003e","\u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003epathlib\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-v\u003ePath\u003c/span\u003e","","\u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003erequests\u003c/span\u003e","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# Data structures\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-en\u003e@\u003cspan class=pl-s1\u003edataclass\u003c/span\u003e\u003c/span\u003e","\u003cspan class=pl-k\u003eclass\u003c/span\u003e \u003cspan class=pl-v\u003eArticle\u003c/span\u003e:","    \u003cspan class=pl-s1\u003erank\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e","    \u003cspan class=pl-s1\u003etitle\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003eurl\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003ehn_url\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003epoints\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e","    \u003cspan class=pl-s1\u003eauthor\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003ecomment_count\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e","    \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","","","\u003cspan class=pl-en\u003e@\u003cspan class=pl-s1\u003edataclass\u003c/span\u003e\u003c/span\u003e","\u003cspan class=pl-k\u003eclass\u003c/span\u003e \u003cspan class=pl-v\u003eComment\u003c/span\u003e:","    \u003cspan class=pl-s1\u003eid\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003eauthor\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e","    \u003cspan class=pl-s1\u003echildren\u003c/span\u003e: \u003cspan class=pl-smi\u003elist\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003efield\u003c/span\u003e(\u003cspan class=pl-s1\u003edefault_factory\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003elist\u003c/span\u003e)","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eto_dict\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e):","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e {","            \u003cspan class=pl-s\u003e\u0026#39;id\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eid\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026#39;author\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eauthor\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026#39;text\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003etext\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026#39;children\u0026#39;\u003c/span\u003e: [\u003cspan class=pl-s1\u003ec\u003c/span\u003e.\u003cspan class=pl-c1\u003eto_dict\u003c/span\u003e() \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ec\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003echildren\u003c/span\u003e]","        }","","    \u003cspan class=pl-en\u003e@\u003cspan class=pl-s1\u003eclassmethod\u003c/span\u003e\u003c/span\u003e","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003efrom_dict\u003c/span\u003e(\u003cspan class=pl-s1\u003ecls\u003c/span\u003e, \u003cspan class=pl-s1\u003ed\u003c/span\u003e):","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-en\u003ecls\u003c/span\u003e(","            \u003cspan class=pl-s1\u003eid\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003ed\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;id\u0026#39;\u003c/span\u003e],","            \u003cspan class=pl-s1\u003eauthor\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003ed\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;author\u0026#39;\u003c/span\u003e],","            \u003cspan class=pl-s1\u003etext\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003ed\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;text\u0026#39;\u003c/span\u003e],","            \u003cspan class=pl-s1\u003echildren\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e[\u003cspan class=pl-s1\u003ecls\u003c/span\u003e.\u003cspan class=pl-c1\u003efrom_dict\u003c/span\u003e(\u003cspan class=pl-s1\u003ec\u003c/span\u003e) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ec\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;children\u0026#39;\u003c/span\u003e, [])]","        )","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# HTML Parsing\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-k\u003eclass\u003c/span\u003e \u003cspan class=pl-v\u003eHNFrontpageParser\u003c/span\u003e(\u003cspan class=pl-v\u003eHTMLParser\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Parse HN frontpage HTML to extract article listings.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003e__init__\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e):","        \u003cspan class=pl-en\u003esuper\u003c/span\u003e().\u003cspan class=pl-c1\u003e__init__\u003c/span\u003e()","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003earticles\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_titleline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_title_link\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_score\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_user\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline_links\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_rank\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ehandle_starttag\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e, \u003cspan class=pl-s1\u003etag\u003c/span\u003e, \u003cspan class=pl-s1\u003eattrs\u003c/span\u003e):","        \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003edict\u003c/span\u003e(\u003cspan class=pl-s1\u003eattrs\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;span\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;class\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;rank\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_titleline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;span\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;class\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;titleline\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_titleline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_titleline\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;a\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;href\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e):","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;url\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;href\u0026quot;\u003c/span\u003e]","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_title_link\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;span\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;class\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;subline\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;span\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;class\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;score\u0026quot;\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_score\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;a\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;class\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;hnuser\u0026quot;\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_user\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;a\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;href\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;item?id=\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;href\u0026quot;\u003c/span\u003e]:","                \u003cspan class=pl-s1\u003ehref\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eattrs_dict\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;href\u0026quot;\u003c/span\u003e]","                \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ehref\u003c/span\u003e.\u003cspan class=pl-c1\u003esplit\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;item?id=\u0026quot;\u003c/span\u003e)[\u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e]","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;item_id\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;hn_url\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;https://news.ycombinator.com/\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehref\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline_links\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ehandle_data\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e, \u003cspan class=pl-s1\u003edata\u003c/span\u003e):","        \u003cspan class=pl-s1\u003edata\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e:","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_title_link\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_score\u003c/span\u003e:","            \u003cspan class=pl-k\u003etry\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;points\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eint\u003c/span\u003e(\u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003esplit\u003c/span\u003e()[\u003cspan class=pl-c1\u003e0\u003c/span\u003e])","            \u003cspan class=pl-k\u003eexcept\u003c/span\u003e (\u003cspan class=pl-v\u003eValueError\u003c/span\u003e, \u003cspan class=pl-v\u003eIndexError\u003c/span\u003e):","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;points\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_user\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;author\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline_links\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;comment\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003elower\u003c/span\u003e():","                \u003cspan class=pl-k\u003etry\u003c/span\u003e:","                    \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;comment_count\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eint\u003c/span\u003e(\u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003esplit\u003c/span\u003e()[\u003cspan class=pl-c1\u003e0\u003c/span\u003e])","                \u003cspan class=pl-k\u003eexcept\u003c/span\u003e (\u003cspan class=pl-v\u003eValueError\u003c/span\u003e, \u003cspan class=pl-v\u003eIndexError\u003c/span\u003e):","                    \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;comment_count\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e","            \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003elower\u003c/span\u003e() \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;discuss\u0026quot;\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;comment_count\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003eendswith\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;.\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[:\u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e].\u003cspan class=pl-c1\u003eisdigit\u003c/span\u003e():","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_rank\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eint\u003c/span\u003e(\u003cspan class=pl-s1\u003edata\u003c/span\u003e[:\u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e])","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;rank\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_rank\u003c/span\u003e","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ehandle_endtag\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e, \u003cspan class=pl-s1\u003etag\u003c/span\u003e):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;a\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_title_link\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_user\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline_links\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;span\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_score\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_titleline\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_titleline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;tr\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ein_subline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eFalse\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;item_id\u0026quot;\u003c/span\u003e):","                \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003earticles\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-en\u003eArticle\u003c/span\u003e(","                    \u003cspan class=pl-s1\u003erank\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;rank\u0026quot;\u003c/span\u003e, \u003cspan class=pl-c1\u003e0\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003etitle\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003eurl\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;url\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003ehn_url\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;hn_url\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003epoints\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;points\u0026quot;\u003c/span\u003e, \u003cspan class=pl-c1\u003e0\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003eauthor\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003ecomment_count\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;comment_count\u0026quot;\u003c/span\u003e, \u003cspan class=pl-c1\u003e0\u003c/span\u003e),","                    \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;item_id\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e),","                ))","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003ecurrent_article\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}","","","\u003cspan class=pl-k\u003eclass\u003c/span\u003e \u003cspan class=pl-v\u003eArticleTextParser\u003c/span\u003e(\u003cspan class=pl-v\u003eHTMLParser\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Extract main text content from article HTML.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003e__init__\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e):","        \u003cspan class=pl-en\u003esuper\u003c/span\u003e().\u003cspan class=pl-c1\u003e__init__\u003c/span\u003e()","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003etext_parts\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_tags\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {\u003cspan class=pl-s\u003e\u0026#39;script\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;style\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;nav\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;header\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;footer\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;aside\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;noscript\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;iframe\u0026#39;\u003c/span\u003e}","        \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_depth\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ehandle_starttag\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e, \u003cspan class=pl-s1\u003etag\u003c/span\u003e, \u003cspan class=pl-s1\u003eattrs\u003c/span\u003e):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_tags\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_depth\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;br\u0026#39;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003etext_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026#39;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ehandle_endtag\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e, \u003cspan class=pl-s1\u003etag\u003c/span\u003e):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_tags\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_depth\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_depth\u003c/span\u003e \u003cspan class=pl-c1\u003e-=\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etag\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e (\u003cspan class=pl-s\u003e\u0026#39;p\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;div\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;article\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;section\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;h1\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;h2\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;h3\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;h4\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;h5\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;h6\u0026#39;\u003c/span\u003e):","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003etext_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026#39;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ehandle_data\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e, \u003cspan class=pl-s1\u003edata\u003c/span\u003e):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003eskip_depth\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e:","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","        \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003etext_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39; \u0026#39;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eget_text\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003estr\u003c/span\u003e:","        \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;\u0026#39;\u003c/span\u003e.\u003cspan class=pl-c1\u003ejoin\u003c/span\u003e(\u003cspan class=pl-s1\u003eself\u003c/span\u003e.\u003cspan class=pl-c1\u003etext_parts\u003c/span\u003e)","        \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;[ \\t]+\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39; \u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","        \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\\n{3,}\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","        \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39; +\\n\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e.\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# Fetching functions\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003efetch_url\u003c/span\u003e(\u003cspan class=pl-s1\u003eurl\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003eretries\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e5\u003c/span\u003e, \u003cspan class=pl-s1\u003etimeout\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e15\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003estr\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Fetch URL content with retry logic. Uses requests library to avoid TLS fingerprint blocking.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003eheaders\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {","        \u003cspan class=pl-s\u003e\u0026quot;User-Agent\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;Accept\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;Accept-Language\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;en-US,en;q=0.5\u0026quot;\u003c/span\u003e,","    }","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eattempt\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003erange\u003c/span\u003e(\u003cspan class=pl-s1\u003eretries\u003c/span\u003e):","        \u003cspan class=pl-k\u003etry\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eattempt\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e:","                \u003cspan class=pl-s1\u003ewait_time\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e2\u003c/span\u003e \u003cspan class=pl-c1\u003e**\u003c/span\u003e \u003cspan class=pl-s1\u003eattempt\u003c/span\u003e  \u003cspan class=pl-c\u003e# 2, 4, 8, 16 seconds\u003c/span\u003e","                \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  Retry \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eattempt\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e/\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eretries\u003c/span\u003e\u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e after \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ewait_time\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003es...\u0026quot;\u003c/span\u003e)","                \u003cspan class=pl-s1\u003etime\u003c/span\u003e.\u003cspan class=pl-c1\u003esleep\u003c/span\u003e(\u003cspan class=pl-s1\u003ewait_time\u003c/span\u003e)","            \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003erequests\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s1\u003eurl\u003c/span\u003e, \u003cspan class=pl-s1\u003eheaders\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eheaders\u003c/span\u003e, \u003cspan class=pl-s1\u003etimeout\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003etimeout\u003c/span\u003e)","            \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003eraise_for_status\u003c/span\u003e()","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003etext\u003c/span\u003e","        \u003cspan class=pl-k\u003eexcept\u003c/span\u003e \u003cspan class=pl-s1\u003erequests\u003c/span\u003e.\u003cspan class=pl-c1\u003eexceptions\u003c/span\u003e.\u003cspan class=pl-c1\u003eHTTPError\u003c/span\u003e \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ee\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ee\u003c/span\u003e.\u003cspan class=pl-c1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003estatus_code\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-c1\u003e403\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s1\u003eattempt\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026lt;\u003c/span\u003e \u003cspan class=pl-s1\u003eretries\u003c/span\u003e \u003cspan class=pl-c1\u003e-\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e:","                \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  Got 403, will retry...\u0026quot;\u003c/span\u003e)","                \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","            \u003cspan class=pl-k\u003eraise\u003c/span\u003e","    \u003cspan class=pl-k\u003eraise\u003c/span\u003e \u003cspan class=pl-en\u003eException\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Failed to fetch \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eurl\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e after \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eretries\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e retries\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003efetch_frontpage\u003c/span\u003e(\u003cspan class=pl-s1\u003eday\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003elist\u003c/span\u003e[\u003cspan class=pl-smi\u003eArticle\u003c/span\u003e]:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Fetch HN frontpage for a specific day (YYYY-MM-DD format).\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003eurl\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;https://news.ycombinator.com/front?day=\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eday\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Fetching frontpage: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eurl\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003efetch_url\u003c/span\u003e(\u003cspan class=pl-s1\u003eurl\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eHNFrontpageParser\u003c/span\u003e()","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003efeed\u003c/span\u003e(\u003cspan class=pl-s1\u003epage_html\u003c/span\u003e)","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003earticles\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003efetch_comments\u003c/span\u003e(\u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003elist\u003c/span\u003e[\u003cspan class=pl-smi\u003eComment\u003c/span\u003e]:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Fetch all comments for an HN item using Algolia API.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003eurl\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;https://hn.algolia.com/api/v1/items/\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  Fetching comments: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003ereq\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-c1\u003erequest\u003c/span\u003e.\u003cspan class=pl-c1\u003eRequest\u003c/span\u003e(\u003cspan class=pl-s1\u003eurl\u003c/span\u003e)","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-c1\u003erequest\u003c/span\u003e.\u003cspan class=pl-c1\u003eurlopen\u003c/span\u003e(\u003cspan class=pl-s1\u003ereq\u003c/span\u003e, \u003cspan class=pl-s1\u003etimeout\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e30\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e:","        \u003cspan class=pl-s1\u003edata\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eloads\u003c/span\u003e(\u003cspan class=pl-s1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003eread\u003c/span\u003e().\u003cspan class=pl-c1\u003edecode\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;utf-8\u0026quot;\u003c/span\u003e))","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eparse_children\u003c/span\u003e(\u003cspan class=pl-s1\u003echildren\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003elist\u003c/span\u003e[\u003cspan class=pl-smi\u003eComment\u003c/span\u003e]:","        \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003echild\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003echildren\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003echild\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;type\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e!=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;comment\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003echild\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;text\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003eis\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e:","                \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","            \u003cspan class=pl-s1\u003ecomment\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eComment\u003c/span\u003e(","                \u003cspan class=pl-s1\u003eid\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-en\u003estr\u003c/span\u003e(\u003cspan class=pl-s1\u003echild\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;id\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e)),","                \u003cspan class=pl-s1\u003eauthor\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003echild\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;author\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;[deleted]\u0026quot;\u003c/span\u003e,","                \u003cspan class=pl-s1\u003etext\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-en\u003eclean_html_to_text\u003c/span\u003e(\u003cspan class=pl-s1\u003echild\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;text\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e)),","                \u003cspan class=pl-s1\u003echildren\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-en\u003eparse_children\u003c/span\u003e(\u003cspan class=pl-s1\u003echild\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;children\u0026quot;\u003c/span\u003e, [])),","            )","            \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s1\u003ecomment\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e","","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-en\u003eparse_children\u003c/span\u003e(\u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;children\u0026quot;\u003c/span\u003e, []))","","","\u003cspan class=pl-c1\u003eMAX_ARTICLE_CHARS\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e15000\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003efetch_article_content\u003c/span\u003e(\u003cspan class=pl-s1\u003eurl\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003etuple\u003c/span\u003e[\u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003estr\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e]:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Fetch and extract text from article URL. Returns (text, error).\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eurl\u003c/span\u003e.\u003cspan class=pl-c1\u003estartswith\u003c/span\u003e((\u003cspan class=pl-s\u003e\u0026#39;http://\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;https://\u0026#39;\u003c/span\u003e)):","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;Not a web URL\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-en\u003eany\u003c/span\u003e(\u003cspan class=pl-s1\u003ex\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eurl\u003c/span\u003e \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ex\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e [\u003cspan class=pl-s\u003e\u0026#39;.pdf\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;youtube.com\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;youtu.be\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;twitter.com\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;x.com\u0026#39;\u003c/span\u003e]):","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;Skipped URL type\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  Fetching article: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eurl\u003c/span\u003e[:\u003cspan class=pl-c1\u003e60\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e...\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-k\u003etry\u003c/span\u003e:","        \u003cspan class=pl-s1\u003eheaders\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {","            \u003cspan class=pl-s\u003e\u0026quot;User-Agent\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36\u0026quot;\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;Accept\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\u0026quot;\u003c/span\u003e,","        }","        \u003cspan class=pl-s1\u003ereq\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-c1\u003erequest\u003c/span\u003e.\u003cspan class=pl-c1\u003eRequest\u003c/span\u003e(\u003cspan class=pl-s1\u003eurl\u003c/span\u003e, \u003cspan class=pl-s1\u003eheaders\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eheaders\u003c/span\u003e)","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-c1\u003erequest\u003c/span\u003e.\u003cspan class=pl-c1\u003eurlopen\u003c/span\u003e(\u003cspan class=pl-s1\u003ereq\u003c/span\u003e, \u003cspan class=pl-s1\u003etimeout\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e15\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e:","            \u003cspan class=pl-s1\u003econtent_type\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003eheaders\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;Content-Type\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;\u0026#39;\u003c/span\u003e)","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;text/html\u0026#39;\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-s1\u003econtent_type\u003c/span\u003e \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;application/xhtml\u0026#39;\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-s1\u003econtent_type\u003c/span\u003e:","                \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;Not HTML: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003econtent_type\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-s1\u003edata\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003eread\u003c/span\u003e(\u003cspan class=pl-c1\u003e5\u003c/span\u003e \u003cspan class=pl-c1\u003e*\u003c/span\u003e \u003cspan class=pl-c1\u003e1024\u003c/span\u003e \u003cspan class=pl-c1\u003e*\u003c/span\u003e \u003cspan class=pl-c1\u003e1024\u003c/span\u003e)","            \u003cspan class=pl-k\u003etry\u003c/span\u003e:","                \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003edecode\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;utf-8\u0026#39;\u003c/span\u003e)","            \u003cspan class=pl-k\u003eexcept\u003c/span\u003e \u003cspan class=pl-v\u003eUnicodeDecodeError\u003c/span\u003e:","                \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e.\u003cspan class=pl-c1\u003edecode\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;latin-1\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003eerrors\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026#39;replace\u0026#39;\u003c/span\u003e)","","        \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eunescape\u003c/span\u003e(\u003cspan class=pl-s1\u003epage_html\u003c/span\u003e)","        \u003cspan class=pl-s1\u003eparser\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eArticleTextParser\u003c/span\u003e()","        \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003efeed\u003c/span\u003e(\u003cspan class=pl-s1\u003epage_html\u003c/span\u003e)","        \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eget_text\u003c/span\u003e()","","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e) \u003cspan class=pl-c1\u003e\u0026lt;\u003c/span\u003e \u003cspan class=pl-c1\u003e100\u003c/span\u003e:","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;Article too short or failed to extract\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e) \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003eMAX_ARTICLE_CHARS\u003c/span\u003e:","            \u003cspan class=pl-s1\u003etruncate_at\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e.\u003cspan class=pl-c1\u003erfind\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;. \u0026#39;\u003c/span\u003e, \u003cspan class=pl-c1\u003eMAX_ARTICLE_CHARS\u003c/span\u003e \u003cspan class=pl-c1\u003e-\u003c/span\u003e \u003cspan class=pl-c1\u003e500\u003c/span\u003e, \u003cspan class=pl-c1\u003eMAX_ARTICLE_CHARS\u003c/span\u003e)","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etruncate_at\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e:","                \u003cspan class=pl-s1\u003etruncate_at\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eMAX_ARTICLE_CHARS\u003c/span\u003e","            \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e[:\u003cspan class=pl-s1\u003etruncate_at\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e] \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e[TRUNCATED]\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e, \u003cspan class=pl-c1\u003eNone\u003c/span\u003e","","    \u003cspan class=pl-k\u003eexcept\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-c1\u003eerror\u003c/span\u003e.\u003cspan class=pl-c1\u003eHTTPError\u003c/span\u003e \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ee\u003c/span\u003e:","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;HTTP \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ee\u003c/span\u003e.\u003cspan class=pl-c1\u003ecode\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003eexcept\u003c/span\u003e \u003cspan class=pl-s1\u003eurllib\u003c/span\u003e.\u003cspan class=pl-c1\u003eerror\u003c/span\u003e.\u003cspan class=pl-c1\u003eURLError\u003c/span\u003e \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ee\u003c/span\u003e:","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;URL error: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ee\u003c/span\u003e.\u003cspan class=pl-c1\u003ereason\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003eexcept\u003c/span\u003e \u003cspan class=pl-v\u003eException\u003c/span\u003e \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ee\u003c/span\u003e:","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003etype\u003c/span\u003e(\u003cspan class=pl-s1\u003ee\u003c/span\u003e).\u003cspan class=pl-c1\u003e__name__\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ee\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eclean_html_to_text\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003estr\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Convert HN comment HTML to clean text.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eunescape\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\u0026lt;a href=\u0026quot;([^\u0026quot;]+)\u0026quot;[^\u0026gt;]*\u0026gt;([^\u0026lt;]+)\u0026lt;/a\u0026gt;\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003er\u0026#39;[\\2](\\1)\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\u0026lt;i\u0026gt;([^\u0026lt;]+)\u0026lt;/i\u0026gt;\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003er\u0026#39;*\\1*\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\u0026lt;b\u0026gt;([^\u0026lt;]+)\u0026lt;/b\u0026gt;\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003er\u0026#39;**\\1**\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\u0026lt;code\u0026gt;([^\u0026lt;]+)\u0026lt;/code\u0026gt;\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003er\u0026#39;`\\1`\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e.\u003cspan class=pl-c1\u003ereplace\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;\u0026lt;p\u0026gt;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026quot;\u003c/span\u003e).\u003cspan class=pl-c1\u003ereplace\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;\u0026lt;/p\u0026gt;\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\u0026lt;[^\u0026gt;]+\u0026gt;\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-s1\u003etext\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esub\u003c/span\u003e(\u003cspan class=pl-s\u003er\u0026#39;\\n{3,}\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026#39;\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e)","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e.\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# Prompt generation\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-c1\u003ePROMPT_TEMPLATE\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;The following is an article that appeared on Hacker News 10 years ago, and the discussion thread.\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eLet\u0026#39;s use our benefit of hindsight now in 6 sections:\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e1. Give a brief summary of the article and the discussion thread.\u003c/span\u003e","\u003cspan class=pl-s\u003e2. What ended up happening to this topic? (research the topic briefly and write a summary)\u003c/span\u003e","\u003cspan class=pl-s\u003e3. Give out awards for \u0026quot;Most prescient\u0026quot; and \u0026quot;Most wrong\u0026quot; comments, considering what happened.\u003c/span\u003e","\u003cspan class=pl-s\u003e4. Mention any other fun or notable aspects of the article or discussion.\u003c/span\u003e","\u003cspan class=pl-s\u003e5. Give out grades to specific people for their comments, considering what happened.\u003c/span\u003e","\u003cspan class=pl-s\u003e6. At the end, give a final score (from 0-10) for how interesting this article and its retrospect analysis was.\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eAs for the format of Section 5, use the header \u0026quot;Final grades\u0026quot; and follow it with simply an unordered list of people and their grades in the format of \u0026quot;name: grade (optional comment)\u0026quot;. Here is an example:\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eFinal grades\u003c/span\u003e","\u003cspan class=pl-s\u003e- speckx: A+ (excellent predictions on ...)\u003c/span\u003e","\u003cspan class=pl-s\u003e- tosh: A (correctly predicted this or that ...)\u003c/span\u003e","\u003cspan class=pl-s\u003e- keepamovin: A\u003c/span\u003e","\u003cspan class=pl-s\u003e- bgwalter: D\u003c/span\u003e","\u003cspan class=pl-s\u003e- fsflover: F (completely wrong on ...)\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eYour list may contain more people of course than just this toy example. Please follow the format exactly because I will be parsing it programmatically. The idea is that I will accumulate the grades for each account to identify the accounts that were over long periods of time the most prescient or the most wrong.\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eAs for the format of Section 6, use the prefix \u0026quot;Article hindsight analysis interestingness score:\u0026quot; and then the score (0-10) as a number. Give high scores to articles/discussions that are prominent, notable, or interesting in retrospect. Give low scores in cases where few predictions are made, or the topic is very niche or obscure, or the discussion is not very interesting in retrospect.\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003eHere is an example:\u003c/span\u003e","\u003cspan class=pl-s\u003eArticle hindsight analysis interestingness score: 8\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e---\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003ecomments_to_markdown\u003c/span\u003e(\u003cspan class=pl-s1\u003ecomments\u003c/span\u003e: \u003cspan class=pl-s1\u003elist\u003c/span\u003e[\u003cspan class=pl-smi\u003eComment\u003c/span\u003e], \u003cspan class=pl-s1\u003eindent\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003estr\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Convert comment tree to markdown format.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003elines\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ecomment\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e:","        \u003cspan class=pl-s1\u003eprefix\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;  \u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003e*\u003c/span\u003e \u003cspan class=pl-s1\u003eindent\u003c/span\u003e","        \u003cspan class=pl-s1\u003elines\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eprefix\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e- **\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ecomment\u003c/span\u003e.\u003cspan class=pl-c1\u003eauthor\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e**: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ecomment\u003c/span\u003e.\u003cspan class=pl-c1\u003etext\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ecomment\u003c/span\u003e.\u003cspan class=pl-c1\u003echildren\u003c/span\u003e:","            \u003cspan class=pl-s1\u003elines\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-en\u003ecomments_to_markdown\u003c/span\u003e(\u003cspan class=pl-s1\u003ecomment\u003c/span\u003e.\u003cspan class=pl-c1\u003echildren\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e))","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026quot;\u003c/span\u003e.\u003cspan class=pl-c1\u003ejoin\u003c/span\u003e(\u003cspan class=pl-s1\u003elines\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003egenerate_prompt\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e: \u003cspan class=pl-smi\u003eArticle\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle_text\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e: \u003cspan class=pl-s1\u003estr\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e,","                    \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e: \u003cspan class=pl-s1\u003elist\u003c/span\u003e[\u003cspan class=pl-smi\u003eComment\u003c/span\u003e]) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003estr\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Generate full LLM prompt for an article.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003elines\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [","        \u003cspan class=pl-c1\u003ePROMPT_TEMPLATE\u003c/span\u003e,","        \u003cspan class=pl-s\u003ef\u0026quot;# \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003etitle\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;## Article Info\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003ef\u0026quot;- **Original URL**: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eurl\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003ef\u0026quot;- **HN Discussion**: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003ehn_url\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003ef\u0026quot;- **Points**: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003epoints\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003ef\u0026quot;- **Submitted by**: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eauthor\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003ef\u0026quot;- **Comments**: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003ecomment_count\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;## Article Content\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e,","    ]","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e:","        \u003cspan class=pl-s1\u003elines\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;*Could not fetch article: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e*\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","        \u003cspan class=pl-s1\u003elines\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle_text\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003elines\u003c/span\u003e.\u003cspan class=pl-c1\u003eextend\u003c/span\u003e([","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;## HN Discussion\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e,","        \u003cspan class=pl-en\u003ecomments_to_markdown\u003c/span\u003e(\u003cspan class=pl-s1\u003ecomments\u003c/span\u003e),","    ])","","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026quot;\u003c/span\u003e.\u003cspan class=pl-c1\u003ejoin\u003c/span\u003e(\u003cspan class=pl-s1\u003elines\u003c/span\u003e)","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# Grade parsing\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eparse_grades\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003edict\u003c/span\u003e[\u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-smi\u003edict\u003c/span\u003e]:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Parse the Final grades section from LLM output.\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    Returns dict of username -\u0026gt; {\u0026quot;grade\u0026quot;: \u0026quot;A\u0026quot;, \u0026quot;rationale\u0026quot;: \u0026quot;explanation...\u0026quot;}\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003egrades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}","    \u003cspan class=pl-c\u003e# Match \u0026quot;Final grades\u0026quot; with optional leading section number, #, or other prefixes\u003c/span\u003e","    \u003cspan class=pl-s1\u003epattern\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003er\u0026#39;(?:^|\\n)(?:\\d+[\\.\\)]\\s*)?(?:#+ *)?Final grades\\s*\\n\u0026#39;\u003c/span\u003e","    \u003cspan class=pl-s1\u003ematch\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esearch\u003c/span\u003e(\u003cspan class=pl-s1\u003epattern\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e, \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003eIGNORECASE\u003c/span\u003e)","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003ematch\u003c/span\u003e:","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003egrades\u003c/span\u003e","","    \u003cspan class=pl-s1\u003egrades_section\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003etext\u003c/span\u003e[\u003cspan class=pl-s1\u003ematch\u003c/span\u003e.\u003cspan class=pl-c1\u003eend\u003c/span\u003e():]","    \u003cspan class=pl-c\u003e# Pattern: - username: GRADE (rationale text)\u003c/span\u003e","    \u003cspan class=pl-c\u003e# Also handle: - username (qualifier): GRADE (rationale)\u003c/span\u003e","    \u003cspan class=pl-c\u003e# Note: handle both ASCII +/- and Unicode minus (−)\u003c/span\u003e","    \u003cspan class=pl-s1\u003eline_pattern\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003er\u0026#39;^[\\-\\*]\\s*([^:]+):\\s*([A-F][+\\-−]?)(?:\\s*\\(([^)]+)\\))?\u0026#39;\u003c/span\u003e","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eline\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003egrades_section\u003c/span\u003e.\u003cspan class=pl-c1\u003esplit\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026#39;\u003c/span\u003e):","        \u003cspan class=pl-s1\u003eline\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eline\u003c/span\u003e.\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eline\u003c/span\u003e:","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eline\u003c/span\u003e.\u003cspan class=pl-c1\u003estartswith\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;#\u0026#39;\u003c/span\u003e) \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eline\u003c/span\u003e.\u003cspan class=pl-c1\u003estartswith\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026#39;[\u0026#39;\u003c/span\u003e):","            \u003cspan class=pl-k\u003ebreak\u003c/span\u003e","        \u003cspan class=pl-s1\u003em\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003ematch\u003c/span\u003e(\u003cspan class=pl-s1\u003eline_pattern\u003c/span\u003e, \u003cspan class=pl-s1\u003eline\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eusername\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e.\u003cspan class=pl-c1\u003egroup\u003c/span\u003e(\u003cspan class=pl-c1\u003e1\u003c/span\u003e).\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","            \u003cspan class=pl-s1\u003egrade\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e.\u003cspan class=pl-c1\u003egroup\u003c/span\u003e(\u003cspan class=pl-c1\u003e2\u003c/span\u003e).\u003cspan class=pl-c1\u003estrip\u003c/span\u003e()","            \u003cspan class=pl-s1\u003erationale\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e.\u003cspan class=pl-c1\u003egroup\u003c/span\u003e(\u003cspan class=pl-c1\u003e3\u003c/span\u003e).\u003cspan class=pl-c1\u003estrip\u003c/span\u003e() \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e.\u003cspan class=pl-c1\u003egroup\u003c/span\u003e(\u003cspan class=pl-c1\u003e3\u003c/span\u003e) \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-s1\u003egrades\u003c/span\u003e[\u003cspan class=pl-s1\u003eusername\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e {\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003egrade\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003erationale\u003c/span\u003e}","","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003egrades\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003egrade_to_numeric\u003c/span\u003e(\u003cspan class=pl-s1\u003egrade\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003efloat\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Convert letter grade to GPA.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003ebase\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {\u003cspan class=pl-s\u003e\u0026#39;A\u0026#39;\u003c/span\u003e: \u003cspan class=pl-c1\u003e4.0\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;B\u0026#39;\u003c/span\u003e: \u003cspan class=pl-c1\u003e3.0\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;C\u0026#39;\u003c/span\u003e: \u003cspan class=pl-c1\u003e2.0\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;D\u0026#39;\u003c/span\u003e: \u003cspan class=pl-c1\u003e1.0\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;F\u0026#39;\u003c/span\u003e: \u003cspan class=pl-c1\u003e0.0\u003c/span\u003e}","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003egrade\u003c/span\u003e:","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-c1\u003e0.0\u003c/span\u003e","    \u003cspan class=pl-s1\u003evalue\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ebase\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s1\u003egrade\u003c/span\u003e[\u003cspan class=pl-c1\u003e0\u003c/span\u003e].\u003cspan class=pl-c1\u003eupper\u003c/span\u003e(), \u003cspan class=pl-c1\u003e0.0\u003c/span\u003e)","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003egrade\u003c/span\u003e) \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e:","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003egrade\u003c/span\u003e[\u003cspan class=pl-c1\u003e1\u003c/span\u003e] \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;+\u0026#39;\u003c/span\u003e:","            \u003cspan class=pl-s1\u003evalue\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-c1\u003e0.3\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egrade\u003c/span\u003e[\u003cspan class=pl-c1\u003e1\u003c/span\u003e] \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;-−\u0026#39;\u003c/span\u003e:  \u003cspan class=pl-c\u003e# ASCII minus and Unicode minus\u003c/span\u003e","            \u003cspan class=pl-s1\u003evalue\u003c/span\u003e \u003cspan class=pl-c1\u003e-=\u003c/span\u003e \u003cspan class=pl-c1\u003e0.3\u003c/span\u003e","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003evalue\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eparse_interestingness_score\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003eint\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Parse the interestingness score (0-10) from LLM output.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003epattern\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003er\u0026#39;Article hindsight analysis interestingness score:\\s*(\\d+)\u0026#39;\u003c/span\u003e","    \u003cspan class=pl-s1\u003ematch\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003esearch\u003c/span\u003e(\u003cspan class=pl-s1\u003epattern\u003c/span\u003e, \u003cspan class=pl-s1\u003etext\u003c/span\u003e, \u003cspan class=pl-s1\u003ere\u003c/span\u003e.\u003cspan class=pl-c1\u003eIGNORECASE\u003c/span\u003e)","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ematch\u003c/span\u003e:","        \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eint\u003c/span\u003e(\u003cspan class=pl-s1\u003ematch\u003c/span\u003e.\u003cspan class=pl-c1\u003egroup\u003c/span\u003e(\u003cspan class=pl-c1\u003e1\u003c/span\u003e))","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-en\u003emax\u003c/span\u003e(\u003cspan class=pl-c1\u003e0\u003c/span\u003e, \u003cspan class=pl-en\u003emin\u003c/span\u003e(\u003cspan class=pl-c1\u003e10\u003c/span\u003e, \u003cspan class=pl-s1\u003escore\u003c/span\u003e))  \u003cspan class=pl-c\u003e# Clamp to 0-10\u003c/span\u003e","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# Pipeline stages\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003ePath\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Get the data directory for a given date.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-en\u003ePath\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;data\u0026quot;\u003c/span\u003e) \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eget_output_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-s1\u003estr\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003ePath\u003c/span\u003e:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Get the output directory, optionally for a specific date.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003ebase\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003ePath\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;output\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e:","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003ebase\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003ebase\u003c/span\u003e","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_fetch\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003elimit\u003c/span\u003e: \u003cspan class=pl-s1\u003eint\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Stage 1: Fetch frontpage and all article data.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003emkdir\u003c/span\u003e(\u003cspan class=pl-s1\u003eparents\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e, \u003cspan class=pl-s1\u003eexist_ok\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;frontpage.json\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-c\u003e# Fetch frontpage if not cached\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Loading cached frontpage from \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003earticles\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-en\u003eArticle\u003c/span\u003e(\u003cspan class=pl-c1\u003e**\u003c/span\u003e\u003cspan class=pl-s1\u003ea\u003c/span\u003e) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ea\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e)]","    \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticles\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003efetch_frontpage\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edump\u003c/span\u003e([\u003cspan class=pl-en\u003easdict\u003c/span\u003e(\u003cspan class=pl-s1\u003ea\u003c/span\u003e) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ea\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003earticles\u003c/span\u003e], \u003cspan class=pl-s1\u003ef\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e2\u003c/span\u003e)","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Saved frontpage to \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003elimit\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticles\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticles\u003c/span\u003e[:\u003cspan class=pl-s1\u003elimit\u003c/span\u003e]","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003eFetching data for \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003earticles\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e articles...\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003earticles\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e","        \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003emkdir\u003c/span\u003e(\u003cspan class=pl-s1\u003eexist_ok\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e)","","        \u003cspan class=pl-c\u003e# Save article metadata\u003c/span\u003e","        \u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;meta.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edump\u003c/span\u003e(\u003cspan class=pl-en\u003easdict\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e), \u003cspan class=pl-s1\u003ef\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e2\u003c/span\u003e)","","        \u003cspan class=pl-c\u003e# Fetch article content\u003c/span\u003e","        \u003cspan class=pl-s1\u003earticle_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;article.txt\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003eerror_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;article_error.txt\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e() \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eerror_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-s1\u003etext\u003c/span\u003e, \u003cspan class=pl-s1\u003eerror\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003efetch_article_content\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eurl\u003c/span\u003e)","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eerror\u003c/span\u003e:","                \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eerror_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                    \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s1\u003eerror\u003c/span\u003e)","            \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","                \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                    \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s1\u003etext\u003c/span\u003e)","            \u003cspan class=pl-s1\u003etime\u003c/span\u003e.\u003cspan class=pl-c1\u003esleep\u003c/span\u003e(\u003cspan class=pl-c1\u003e0.5\u003c/span\u003e)  \u003cspan class=pl-c\u003e# Be nice\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Fetch comments\u003c/span\u003e","        \u003cspan class=pl-s1\u003ecomments_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;comments.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003ecomments_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003efetch_comments\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e)","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003ecomments_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edump\u003c/span\u003e([\u003cspan class=pl-s1\u003ec\u003c/span\u003e.\u003cspan class=pl-c1\u003eto_dict\u003c/span\u003e() \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ec\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e], \u003cspan class=pl-s1\u003ef\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e2\u003c/span\u003e)","            \u003cspan class=pl-s1\u003etime\u003c/span\u003e.\u003cspan class=pl-c1\u003esleep\u003c/span\u003e(\u003cspan class=pl-c1\u003e0.2\u003c/span\u003e)  \u003cspan class=pl-c\u003e# Be nice\u003c/span\u003e","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003eFetch complete. Data saved to \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_prompt\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Stage 2: Generate prompts for all articles.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e()):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;prompt.md\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;meta.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eArticle\u003c/span\u003e(\u003cspan class=pl-c1\u003e**\u003c/span\u003e\u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e))","","        \u003cspan class=pl-c\u003e# Load article content\u003c/span\u003e","        \u003cspan class=pl-s1\u003earticle_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;article.txt\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003eerror_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;article_error.txt\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-s1\u003earticle_text\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eread_text\u003c/span\u003e()","            \u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003eerror_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-s1\u003earticle_text\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eerror_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eread_text\u003c/span\u003e()","        \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","            \u003cspan class=pl-s1\u003earticle_text\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;Not fetched\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Load comments\u003c/span\u003e","        \u003cspan class=pl-s1\u003ecomments_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;comments.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ecomments_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003ecomments_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-v\u003eComment\u003c/span\u003e.\u003cspan class=pl-c1\u003efrom_dict\u003c/span\u003e(\u003cspan class=pl-s1\u003ec\u003c/span\u003e) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ec\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e)]","        \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","            \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","","        \u003cspan class=pl-c\u003e# Generate prompt\u003c/span\u003e","        \u003cspan class=pl-s1\u003eprompt\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003egenerate_prompt\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle_text\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle_error\u003c/span\u003e, \u003cspan class=pl-s1\u003ecomments\u003c/span\u003e)","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s1\u003eprompt\u003c/span\u003e)","","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Generated prompt for \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003etitle\u003c/span\u003e[:\u003cspan class=pl-c1\u003e50\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e...\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003ePrompts generated in \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_analyze\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003emodel\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;gpt-5.1\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003emax_workers\u003c/span\u003e: \u003cspan class=pl-smi\u003eint\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e5\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Stage 3: Run LLM analysis on all prompts.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003econcurrent\u003c/span\u003e.\u003cspan class=pl-s1\u003efutures\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-v\u003eThreadPoolExecutor\u003c/span\u003e, \u003cspan class=pl-s1\u003eas_completed\u003c/span\u003e","    \u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003edotenv\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003eload_dotenv\u003c/span\u003e","    \u003cspan class=pl-k\u003efrom\u003c/span\u003e \u003cspan class=pl-s1\u003eopenai\u003c/span\u003e \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-v\u003eOpenAI\u003c/span\u003e","","    \u003cspan class=pl-en\u003eload_dotenv\u003c/span\u003e()","    \u003cspan class=pl-s1\u003eclient\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eOpenAI\u003c/span\u003e()","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Collect articles to analyze\u003c/span\u003e","    \u003cspan class=pl-s1\u003eto_analyze\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e()):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;prompt.md\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;response.md\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e() \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;meta.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003emeta_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eArticle\u003c/span\u003e(\u003cspan class=pl-c1\u003e**\u003c/span\u003e\u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e))","","        \u003cspan class=pl-s1\u003eto_analyze\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e((\u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle\u003c/span\u003e, \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eread_text\u003c/span\u003e()))","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eto_analyze\u003c/span\u003e:","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;No articles to analyze.\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Analyzing \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003eto_analyze\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e articles with \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003emax_workers\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e workers...\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eanalyze_one\u003c/span\u003e(\u003cspan class=pl-s1\u003eitem\u003c/span\u003e):","        \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle\u003c/span\u003e, \u003cspan class=pl-s1\u003eprompt\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eitem\u003c/span\u003e","        \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;response.md\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003etry\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eclient\u003c/span\u003e.\u003cspan class=pl-c1\u003eresponses\u003c/span\u003e.\u003cspan class=pl-c1\u003ecreate\u003c/span\u003e(","                \u003cspan class=pl-s1\u003emodel\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003emodel\u003c/span\u003e,","                \u003cspan class=pl-s1\u003einput\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eprompt\u003c/span\u003e,","                \u003cspan class=pl-s1\u003ereasoning\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e{\u003cspan class=pl-s\u003e\u0026quot;effort\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;medium\u0026quot;\u003c/span\u003e},","                \u003cspan class=pl-s1\u003etext\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e{\u003cspan class=pl-s\u003e\u0026quot;verbosity\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026quot;medium\u0026quot;\u003c/span\u003e},","            )","            \u003cspan class=pl-s1\u003eresult\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e.\u003cspan class=pl-c1\u003eoutput_text\u003c/span\u003e","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s1\u003eresult\u003c/span\u003e)","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e (\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003etitle\u003c/span\u003e[:\u003cspan class=pl-c1\u003e50\u003c/span\u003e], \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003eresult\u003c/span\u003e), \u003cspan class=pl-c1\u003eNone\u003c/span\u003e)","        \u003cspan class=pl-k\u003eexcept\u003c/span\u003e \u003cspan class=pl-v\u003eException\u003c/span\u003e \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ee\u003c/span\u003e:","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e (\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003etitle\u003c/span\u003e[:\u003cspan class=pl-c1\u003e50\u003c/span\u003e], \u003cspan class=pl-c1\u003e0\u003c/span\u003e, \u003cspan class=pl-en\u003estr\u003c/span\u003e(\u003cspan class=pl-s1\u003ee\u003c/span\u003e))","","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eThreadPoolExecutor\u003c/span\u003e(\u003cspan class=pl-s1\u003emax_workers\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003emax_workers\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003eexecutor\u003c/span\u003e:","        \u003cspan class=pl-s1\u003efutures\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {\u003cspan class=pl-s1\u003eexecutor\u003c/span\u003e.\u003cspan class=pl-c1\u003esubmit\u003c/span\u003e(\u003cspan class=pl-s1\u003eanalyze_one\u003c/span\u003e, \u003cspan class=pl-s1\u003eitem\u003c/span\u003e): \u003cspan class=pl-s1\u003eitem\u003c/span\u003e \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eitem\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eto_analyze\u003c/span\u003e}","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003efuture\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003eas_completed\u003c/span\u003e(\u003cspan class=pl-s1\u003efutures\u003c/span\u003e):","            \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e, \u003cspan class=pl-s1\u003etitle\u003c/span\u003e, \u003cspan class=pl-s1\u003echars\u003c/span\u003e, \u003cspan class=pl-s1\u003eerror\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003efuture\u003c/span\u003e.\u003cspan class=pl-c1\u003eresult\u003c/span\u003e()","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eerror\u003c/span\u003e:","                \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etitle\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e... Error: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eerror\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","            \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","                \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etitle\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e... Done (\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003echars\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e chars)\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003eAnalysis complete. Results in \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_parse\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Stage 4: Parse grades from all responses.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}  \u003cspan class=pl-c\u003e# username -\u0026gt; list of {grade, rationale, article}\u003c/span\u003e","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e()):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;response.md\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003egrades_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;grades.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003escore_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;score.json\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eread_text\u003c/span\u003e()","        \u003cspan class=pl-s1\u003egrades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eparse_grades\u003c/span\u003e(\u003cspan class=pl-s1\u003eresponse\u003c/span\u003e)  \u003cspan class=pl-c\u003e# Now returns {username: {grade, rationale}}\u003c/span\u003e","        \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eparse_interestingness_score\u003c/span\u003e(\u003cspan class=pl-s1\u003eresponse\u003c/span\u003e)","","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edump\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades\u003c/span\u003e, \u003cspan class=pl-s1\u003ef\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e2\u003c/span\u003e)","","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003escore_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edump\u003c/span\u003e({\u003cspan class=pl-s\u003e\u0026quot;interestingness\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003escore\u003c/span\u003e}, \u003cspan class=pl-s1\u003ef\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e2\u003c/span\u003e)","","        \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003ename\u003c/span\u003e","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egrade_info\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003egrades\u003c/span\u003e.\u003cspan class=pl-c1\u003eitems\u003c/span\u003e():","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e[\u003cspan class=pl-s1\u003eusername\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","            \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e[\u003cspan class=pl-s1\u003eusername\u003c/span\u003e].\u003cspan class=pl-c1\u003eappend\u003c/span\u003e({","                \u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003egrade_info\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e],","                \u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003egrade_info\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e],","                \u003cspan class=pl-s\u003e\u0026quot;article\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e","            })","","        \u003cspan class=pl-s1\u003escore_str\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;, score=\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003escore\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003eis\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Parsed \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e grades from \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003escore_str\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Save aggregated grades\u003c/span\u003e","    \u003cspan class=pl-s1\u003eagg_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all_grades.json\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eagg_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","        \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edump\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e, \u003cspan class=pl-s1\u003ef\u003c/span\u003e, \u003cspan class=pl-s1\u003eindent\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e2\u003c/span\u003e)","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003eParsed grades saved to \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eagg_file\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Print summary\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e:","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e--- Grade Summary ---\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-s1\u003euser_gpas\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egrades_list\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e.\u003cspan class=pl-c1\u003eitems\u003c/span\u003e():","            \u003cspan class=pl-s1\u003egpas\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-en\u003egrade_to_numeric\u003c/span\u003e(\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e]) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003egrades_list\u003c/span\u003e]","            \u003cspan class=pl-s1\u003eavg_gpa\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esum\u003c/span\u003e(\u003cspan class=pl-s1\u003egpas\u003c/span\u003e) \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003egpas\u003c/span\u003e)","            \u003cspan class=pl-s1\u003euser_gpas\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e((\u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003eavg_gpa\u003c/span\u003e, \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades_list\u003c/span\u003e)))","","        \u003cspan class=pl-s1\u003euser_gpas\u003c/span\u003e.\u003cspan class=pl-c1\u003esort\u003c/span\u003e(\u003cspan class=pl-s1\u003ekey\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-k\u003elambda\u003c/span\u003e \u003cspan class=pl-s1\u003ex\u003c/span\u003e: \u003cspan class=pl-s1\u003ex\u003c/span\u003e[\u003cspan class=pl-c1\u003e1\u003c/span\u003e], \u003cspan class=pl-s1\u003ereverse\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e)","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egpa\u003c/span\u003e, \u003cspan class=pl-s1\u003ecount\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003euser_gpas\u003c/span\u003e[:\u003cspan class=pl-c1\u003e10\u003c/span\u003e]:","            \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;  \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eusername\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egpa\u003c/span\u003e:.2f\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e (\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ecount\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e articles)\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_clean\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003estage\u003c/span\u003e: \u003cspan class=pl-s1\u003estr\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e, \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e: \u003cspan class=pl-s1\u003estr\u003c/span\u003e \u003cspan class=pl-c1\u003e|\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Clean cached data for a date, optionally filtered by stage or article.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;No data directory for \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","","    \u003cspan class=pl-c\u003e# Define what files each stage produces\u003c/span\u003e","    \u003cspan class=pl-s1\u003estage_files\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {","        \u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e: [\u003cspan class=pl-s\u003e\u0026quot;meta.json\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;article.txt\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;article_error.txt\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;comments.json\u0026quot;\u003c/span\u003e],","        \u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e: [\u003cspan class=pl-s\u003e\u0026quot;prompt.md\u0026quot;\u003c/span\u003e],","        \u003cspan class=pl-s\u003e\u0026quot;analyze\u0026quot;\u003c/span\u003e: [\u003cspan class=pl-s\u003e\u0026quot;response.md\u0026quot;\u003c/span\u003e],","        \u003cspan class=pl-s\u003e\u0026quot;parse\u0026quot;\u003c/span\u003e: [\u003cspan class=pl-s\u003e\u0026quot;grades.json\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;score.json\u0026quot;\u003c/span\u003e],","    }","","    \u003cspan class=pl-c\u003e# Stages and their downstream dependencies\u003c/span\u003e","    \u003cspan class=pl-s1\u003estage_order\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;analyze\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;parse\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;render\u0026quot;\u003c/span\u003e]","","    \u003cspan class=pl-c\u003e# Determine which stages to clean\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003estage\u003c/span\u003e:","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-s1\u003estage_order\u003c/span\u003e:","            \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Unknown stage: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003estage\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","        \u003cspan class=pl-c\u003e# Clean this stage and all downstream stages\u003c/span\u003e","        \u003cspan class=pl-s1\u003estage_idx\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003estage_order\u003c/span\u003e.\u003cspan class=pl-c1\u003eindex\u003c/span\u003e(\u003cspan class=pl-s1\u003estage\u003c/span\u003e)","        \u003cspan class=pl-s1\u003estages_to_clean\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003estage_order\u003c/span\u003e[\u003cspan class=pl-s1\u003estage_idx\u003c/span\u003e:\u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e]  \u003cspan class=pl-c\u003e# exclude render (it\u0026#39;s just summary.html)\u003c/span\u003e","    \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","        \u003cspan class=pl-s1\u003estages_to_clean\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003estage_order\u003c/span\u003e[:\u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-c1\u003e1\u003c/span\u003e]  \u003cspan class=pl-c\u003e# all except render\u003c/span\u003e","","    \u003cspan class=pl-s1\u003efiles_to_delete\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eset\u003c/span\u003e()","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003es\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003estages_to_clean\u003c/span\u003e:","        \u003cspan class=pl-s1\u003efiles_to_delete\u003c/span\u003e.\u003cspan class=pl-c1\u003eupdate\u003c/span\u003e(\u003cspan class=pl-s1\u003estage_files\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s1\u003es\u003c/span\u003e, []))","","    \u003cspan class=pl-c\u003e# Get article directories to clean\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticle_dirs\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e]","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dirs\u003c/span\u003e[\u003cspan class=pl-c1\u003e0\u003c/span\u003e].\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Article \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e not found\u0026quot;\u003c/span\u003e)","            \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","    \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticle_dirs\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e() \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e()]","","    \u003cspan class=pl-c\u003e# Clean files\u003c/span\u003e","    \u003cspan class=pl-s1\u003edeleted_count\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dirs\u003c/span\u003e:","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003efilename\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003efiles_to_delete\u003c/span\u003e:","            \u003cspan class=pl-s1\u003efilepath\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s1\u003efilename\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003efilepath\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","                \u003cspan class=pl-s1\u003efilepath\u003c/span\u003e.\u003cspan class=pl-c1\u003eunlink\u003c/span\u003e()","                \u003cspan class=pl-s1\u003edeleted_count\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# If cleaning fetch, remove the entire article directory if empty\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003estages_to_clean\u003c/span\u003e:","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e() \u003cspan class=pl-c1\u003eand\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-en\u003eany\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e()):","                \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003ermdir\u003c/span\u003e()","","    \u003cspan class=pl-c\u003e# Clean top-level files\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e:","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003estages_to_clean\u003c/span\u003e:","            \u003cspan class=pl-s1\u003efrontpage\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;frontpage.json\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003efrontpage\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","                \u003cspan class=pl-s1\u003efrontpage\u003c/span\u003e.\u003cspan class=pl-c1\u003eunlink\u003c/span\u003e()","                \u003cspan class=pl-s1\u003edeleted_count\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;parse\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003estages_to_clean\u003c/span\u003e:","            \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all_grades.json\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","                \u003cspan class=pl-s1\u003eall_grades\u003c/span\u003e.\u003cspan class=pl-c1\u003eunlink\u003c/span\u003e()","                \u003cspan class=pl-s1\u003edeleted_count\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Always clean summary.html if cleaning any stage\u003c/span\u003e","        \u003cspan class=pl-s1\u003esummary\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;summary.html\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003esummary\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-s1\u003esummary\u003c/span\u003e.\u003cspan class=pl-c1\u003eunlink\u003c/span\u003e()","            \u003cspan class=pl-s1\u003edeleted_count\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","","    \u003cspan class=pl-s1\u003estage_desc\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;stage \u0026#39;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003estage\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026#39; and downstream\u0026quot;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003estage\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all stages\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003earticle_desc\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot; for article \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Cleaned \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003estage_desc\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle_desc\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003edeleted_count\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e files deleted\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eget_all_output_dates\u003c/span\u003e() \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-s1\u003elist\u003c/span\u003e[\u003cspan class=pl-smi\u003estr\u003c/span\u003e]:","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Get all dates that have been rendered to output directory.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_output_dir\u003c/span\u003e()","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e []","    \u003cspan class=pl-s1\u003edates\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e():","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e() \u003cspan class=pl-c1\u003eand\u003c/span\u003e (\u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;index.html\u0026quot;\u003c/span\u003e).\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-s1\u003edates\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s1\u003ed\u003c/span\u003e.\u003cspan class=pl-c1\u003ename\u003c/span\u003e)","    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003edates\u003c/span\u003e)","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_render\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e, \u003cspan class=pl-s1\u003eupdate_index\u003c/span\u003e: \u003cspan class=pl-smi\u003ebool\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eTrue\u003c/span\u003e):","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Stage 5: Render HTML summary to output directory.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_data_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eoutput_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_output_dir\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eoutput_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003emkdir\u003c/span\u003e(\u003cspan class=pl-s1\u003eparents\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e, \u003cspan class=pl-s1\u003eexist_ok\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Load frontpage\u003c/span\u003e","    \u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;frontpage.json\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticles\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-en\u003eArticle\u003c/span\u003e(\u003cspan class=pl-c1\u003e**\u003c/span\u003e\u003cspan class=pl-s1\u003ea\u003c/span\u003e) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ea\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e)]","","    \u003cspan class=pl-c\u003e# Collect all article data\u003c/span\u003e","    \u003cspan class=pl-s1\u003earticles_data\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003earticles\u003c/span\u003e:","        \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Load response if available\u003c/span\u003e","        \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;response.md\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eread_text\u003c/span\u003e() \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eresponse_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e() \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Load prompt if available\u003c/span\u003e","        \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;prompt.md\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003eprompt\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eread_text\u003c/span\u003e() \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eprompt_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e() \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Load interestingness score if available\u003c/span\u003e","        \u003cspan class=pl-s1\u003escore_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;score.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003escore_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003escore_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-s1\u003escore_data\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e)","                \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003escore_data\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;interestingness\u0026quot;\u003c/span\u003e)","","        \u003cspan class=pl-c\u003e# Load grades if available\u003c/span\u003e","        \u003cspan class=pl-s1\u003egrades_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;grades.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003egrades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003egrades_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-s1\u003egrades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e)","","        \u003cspan class=pl-s1\u003earticles_data\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e({","            \u003cspan class=pl-s\u003e\u0026quot;article\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003earticle\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;response\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eprompt\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;score\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003escore\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;grades\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003egrades\u003c/span\u003e,","        })","","    \u003cspan class=pl-c\u003e# Get all dates for navigation\u003c/span\u003e","    \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_all_output_dates\u003c/span\u003e()","    \u003cspan class=pl-c\u003e# Add current date if not yet in list (we\u0026#39;re about to render it)\u003c/span\u003e","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e:","        \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e [\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e])","    \u003cspan class=pl-s1\u003ecurrent_idx\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e.\u003cspan class=pl-c1\u003eindex\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eprev_date\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e[\u003cspan class=pl-s1\u003ecurrent_idx\u003c/span\u003e \u003cspan class=pl-c1\u003e-\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e] \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ecurrent_idx\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e","    \u003cspan class=pl-s1\u003enext_date\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e[\u003cspan class=pl-s1\u003ecurrent_idx\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e] \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ecurrent_idx\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026lt;\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e","","    \u003cspan class=pl-c\u003e# Build HTML\u003c/span\u003e","    \u003cspan class=pl-s1\u003ehtml_parts\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-s\u003ef\u0026quot;\u0026quot;\u0026quot;\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;html\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;head\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;title\u0026gt;HN Time Capsule - \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/title\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;style\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        * {{ box-sizing: border-box; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        body {{ font-family: -apple-system, BlinkMacSystemFont, \u0026#39;Segoe UI\u0026#39;, Roboto, sans-serif;\u003c/span\u003e","\u003cspan class=pl-s\u003e               margin: 0; padding: 0; line-height: 1.6; height: 100vh; overflow: hidden; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .container {{ display: flex; height: 100vh; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        /* Sidebar */\u003c/span\u003e","\u003cspan class=pl-s\u003e        .sidebar {{ width: 350px; min-width: 350px; background: #f5f5f5; border-right: 1px solid #ddd;\u003c/span\u003e","\u003cspan class=pl-s\u003e                   overflow-y: auto; padding: 15px; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .sidebar h1 {{ color: #ff6600; font-size: 1.3em; margin: 0 0 5px 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .sidebar h1 a {{ color: #ff6600; text-decoration: none; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .sidebar h1 a:hover {{ text-decoration: underline; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .sidebar h2 {{ font-size: 0.95em; color: #666; margin: 0 0 8px 0; font-weight: normal; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .nav {{ display: flex; gap: 10px; margin-bottom: 15px; font-size: 0.85em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .nav a {{ color: #0066cc; text-decoration: none; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .nav a:hover {{ text-decoration: underline; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .nav .disabled {{ color: #ccc; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item {{ padding: 10px; margin-bottom: 8px; background: #fff; border-radius: 6px;\u003c/span\u003e","\u003cspan class=pl-s\u003e                        cursor: pointer; border: 2px solid transparent; transition: all 0.15s;\u003c/span\u003e","\u003cspan class=pl-s\u003e                        display: flex; align-items: flex-start; gap: 10px; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item:hover {{ border-color: #ff6600; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item.selected {{ border-color: #ff6600; background: #fff5f0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box {{ width: 36px; height: 36px; border-radius: 6px; display: flex;\u003c/span\u003e","\u003cspan class=pl-s\u003e                                   align-items: center; justify-content: center; font-weight: bold;\u003c/span\u003e","\u003cspan class=pl-s\u003e                                   font-size: 0.85em; flex-shrink: 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-10 {{ background: #c2410c; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-9 {{ background: #ea580c; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-8 {{ background: #f97316; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-7 {{ background: #fb923c; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-6 {{ background: #fdba74; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-5 {{ background: #fed7aa; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-4 {{ background: #e5e7eb; color: #666; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-3 {{ background: #d1d5db; color: #666; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-2 {{ background: #9ca3af; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-1 {{ background: #6b7280; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-0 {{ background: #4b5563; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .score-box.score-none {{ background: #eee; color: #999; font-size: 0.7em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .content {{ flex: 1; min-width: 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .title {{ font-size: 0.9em; font-weight: 500; margin-bottom: 4px; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .article-item .meta {{ font-size: 0.75em; color: #888; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score {{ display: inline-block; padding: 2px 6px; border-radius: 10px; font-weight: bold;\u003c/span\u003e","\u003cspan class=pl-s\u003e                 font-size: 0.7em; margin-left: 6px; vertical-align: middle; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-10 {{ background: #c2410c; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-9 {{ background: #ea580c; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-8 {{ background: #f97316; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-7 {{ background: #fb923c; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-6 {{ background: #fdba74; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-5 {{ background: #fed7aa; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-4 {{ background: #e5e7eb; color: #666; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-3 {{ background: #d1d5db; color: #666; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-2 {{ background: #9ca3af; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-1 {{ background: #6b7280; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .score.score-0 {{ background: #4b5563; color: white; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        /* Main content */\u003c/span\u003e","\u003cspan class=pl-s\u003e        .main {{ flex: 1; overflow-y: auto; padding: 30px 40px; background: #fff; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .main-inner {{ max-width: 800px; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .main h1 {{ margin-top: 0; font-size: 1.5em; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .main .article-meta {{ color: #666; font-size: 0.9em; margin-bottom: 20px; padding-bottom: 15px;\u003c/span\u003e","\u003cspan class=pl-s\u003e                              border-bottom: 1px solid #eee; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .main .article-meta a {{ color: #0066cc; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis {{ font-size: 0.95em; line-height: 1.5; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .grades-section {{ background: #f9f9f9; padding: 15px; border-radius: 6px; margin-top: 20px; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .grade {{ display: inline-block; padding: 2px 8px; margin: 2px; border-radius: 3px; font-size: 0.8em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .grade-a {{ background: #c6efce; color: #006100; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .grade-b {{ background: #ffeb9c; color: #9c5700; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .grade-c {{ background: #ffc7ce; color: #9c0006; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .grade-d, .grade-f {{ background: #f4cccc; color: #990000; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .prompt-section {{ margin-top: 20px; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .prompt-section summary {{ cursor: pointer; color: #0066cc; font-size: 0.9em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .prompt-content {{ white-space: pre-wrap; font-size: 0.85em; background: #f5f5f5;\u003c/span\u003e","\u003cspan class=pl-s\u003e                          padding: 15px; border-radius: 4px; margin-top: 10px; max-height: 400px; overflow-y: auto; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .placeholder {{ color: #999; text-align: center; margin-top: 100px; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        /* Markdown content styling */\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis h1, .analysis h2, .analysis h3 {{ margin-top: 1.2em; margin-bottom: 0.4em; color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis h1 {{ font-size: 1.3em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis h2 {{ font-size: 1.15em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis h3 {{ font-size: 1.05em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis p {{ margin: 0.6em 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis ul, .analysis ol {{ margin: 0.6em 0; padding-left: 1.5em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis li {{ margin: 0.25em 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis strong {{ color: #333; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis blockquote {{ border-left: 3px solid #ff6600; margin: 0.8em 0; padding-left: 1em; color: #555; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis code {{ background: #f5f5f5; padding: 0.15em 0.4em; border-radius: 3px; font-size: 0.9em; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis pre {{ background: #f5f5f5; padding: 0.8em; border-radius: 4px; overflow-x: auto; margin: 0.6em 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis pre code {{ background: none; padding: 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .analysis hr {{ border: none; border-top: 1px solid #eee; margin: 1em 0; }}\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/style\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/marked/marked.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;body\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;div class=\u0026quot;container\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        \u0026lt;div class=\u0026quot;sidebar\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;h1\u0026gt;\u0026lt;a href=\u0026quot;../index.html\u0026quot;\u0026gt;HN Time Capsule\u0026lt;/a\u0026gt;\u0026lt;/h1\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;h2\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e (10 years ago)\u0026lt;/h2\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;div class=\u0026quot;nav\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s\u003ef\u0026#39;\u0026lt;a href=\u0026quot;../\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eprev_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e/index.html\u0026quot;\u0026gt;\u0026amp;larr; \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eprev_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/a\u0026gt;\u0026#39;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eprev_date\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;\u0026lt;span class=\u0026quot;disabled\u0026quot;\u0026gt;\u0026amp;larr; prev\u0026lt;/span\u0026gt;\u0026#39;\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;span\u0026gt;|\u0026lt;/span\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s\u003ef\u0026#39;\u0026lt;a href=\u0026quot;../\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003enext_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e/index.html\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003enext_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e \u0026amp;rarr;\u0026lt;/a\u0026gt;\u0026#39;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003enext_date\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;\u0026lt;span class=\u0026quot;disabled\u0026quot;\u0026gt;next \u0026amp;rarr;\u0026lt;/span\u0026gt;\u0026#39;\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e]","","    \u003cspan class=pl-c\u003e# Sidebar items\u003c/span\u003e","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ei\u003c/span\u003e, \u003cspan class=pl-s1\u003edata\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003eenumerate\u003c/span\u003e(\u003cspan class=pl-s1\u003earticles_data\u003c/span\u003e):","        \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;article\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;score\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003eis\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-c1\u003eNone\u003c/span\u003e:","            \u003cspan class=pl-s1\u003escore_class\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;score-\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003escore\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-s1\u003escore_box\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026#39;\u0026lt;div class=\u0026quot;score-box \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003escore_class\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003escore\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","            \u003cspan class=pl-s1\u003escore_box\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026#39;\u0026lt;div class=\u0026quot;score-box score-none\u0026quot;\u0026gt;--\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e","","        \u003cspan class=pl-s1\u003eselected\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;selected\u0026quot;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ei\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-c1\u003e0\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003ehtml_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;div class=\u0026quot;article-item \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eselected\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot; id=\u0026quot;article-\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot; onclick=\u0026quot;selectArticle(\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ei\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e)\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003escore_box\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;div class=\u0026quot;content\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                    \u0026lt;div class=\u0026quot;title\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003erank\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e. \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003etitle\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                    \u0026lt;div class=\u0026quot;meta\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003epoints\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e pts \u0026amp;middot; \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003ecomment_count\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e comments\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;/div\u0026gt;\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003ehtml_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","\u003cspan class=pl-s\u003e        \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        \u0026lt;div class=\u0026quot;main\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;div class=\u0026quot;main-inner\u0026quot; id=\u0026quot;main-content\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;div class=\u0026quot;placeholder\u0026quot;\u0026gt;Select an article from the sidebar\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;script\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    // Configure marked for tighter output\u003c/span\u003e","\u003cspan class=pl-s\u003e    marked.setOptions({ breaks: false, gfm: true });\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    // Preprocess markdown to remove excessive whitespace\u003c/span\u003e","\u003cspan class=pl-s\u003e    function cleanMarkdown(md) {\u003c/span\u003e","\u003cspan class=pl-s\u003e        return md\u003c/span\u003e","\u003cspan class=pl-s\u003e            .replace(/  +$/gm, \u0026#39;\u0026#39;)\u003c/span\u003e","\u003cspan class=pl-s\u003e            .replace(/\u003cspan class=pl-cce\u003e\\\\\u003c/span\u003en\u003cspan class=pl-cce\u003e\\\\\u003c/span\u003en\u003cspan class=pl-cce\u003e\\\\\u003c/span\u003en+/g, \u0026#39;\u003cspan class=pl-cce\u003e\\\\\u003c/span\u003en\u003cspan class=pl-cce\u003e\\\\\u003c/span\u003en\u0026#39;);\u003c/span\u003e","\u003cspan class=pl-s\u003e    }\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    const articles = [\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# JavaScript data\u003c/span\u003e","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ei\u003c/span\u003e, \u003cspan class=pl-s1\u003edata\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003eenumerate\u003c/span\u003e(\u003cspan class=pl-s1\u003earticles_data\u003c/span\u003e):","        \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;article\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-s1\u003eresponse\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;response\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-s1\u003eprompt\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-s1\u003egrades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grades\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-s1\u003escore\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edata\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;score\u0026quot;\u003c/span\u003e]","","        \u003cspan class=pl-c\u003e# Build grades HTML\u003c/span\u003e","        \u003cspan class=pl-s1\u003egrade_html\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003egrades\u003c/span\u003e:","            \u003cspan class=pl-c\u003e# Handle both old format (username: \u0026quot;grade\u0026quot;) and new format (username: {grade, rationale})\u003c/span\u003e","            \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003eget_grade\u003c/span\u003e(\u003cspan class=pl-s1\u003eitem\u003c/span\u003e):","                \u003cspan class=pl-s1\u003eval\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eitem\u003c/span\u003e[\u003cspan class=pl-c1\u003e1\u003c/span\u003e]","                \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-en\u003eisinstance\u003c/span\u003e(\u003cspan class=pl-s1\u003eval\u003c/span\u003e, \u003cspan class=pl-s1\u003edict\u003c/span\u003e):","                    \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003eval\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e)","                \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003eval\u003c/span\u003e","            \u003cspan class=pl-s1\u003esorted_grades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades\u003c/span\u003e.\u003cspan class=pl-c1\u003eitems\u003c/span\u003e(), \u003cspan class=pl-s1\u003ekey\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-k\u003elambda\u003c/span\u003e \u003cspan class=pl-s1\u003ex\u003c/span\u003e: \u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-en\u003egrade_to_numeric\u003c/span\u003e(\u003cspan class=pl-en\u003eget_grade\u003c/span\u003e(\u003cspan class=pl-s1\u003ex\u003c/span\u003e)))","            \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egrade_info\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003esorted_grades\u003c/span\u003e[:\u003cspan class=pl-c1\u003e20\u003c/span\u003e]:","                \u003cspan class=pl-s1\u003egrade\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_grade\u003c/span\u003e((\u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egrade_info\u003c/span\u003e))","                \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003egrade\u003c/span\u003e:","                    \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","                \u003cspan class=pl-s1\u003egrade_class\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;grade-\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egrade\u003c/span\u003e[\u003cspan class=pl-c1\u003e0\u003c/span\u003e].\u003cspan class=pl-c1\u003elower\u003c/span\u003e()\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","                \u003cspan class=pl-s1\u003egrade_html\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026#39;\u0026lt;span class=\u0026quot;grade \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egrade_class\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003eusername\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egrade\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/span\u0026gt; \u0026#39;\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Escape for JS\u003c/span\u003e","        \u003cspan class=pl-s1\u003etitle_js\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003etitle\u003c/span\u003e)","        \u003cspan class=pl-s1\u003eurl_js\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eurl\u003c/span\u003e)","        \u003cspan class=pl-s1\u003ehn_url_js\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003ehn_url\u003c/span\u003e)","        \u003cspan class=pl-s1\u003eresponse_js\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003eresponse\u003c/span\u003e))","        \u003cspan class=pl-s1\u003eprompt_js\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003eprompt\u003c/span\u003e))","        \u003cspan class=pl-s1\u003egrade_html_js\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003egrade_html\u003c/span\u003e)","","        \u003cspan class=pl-s1\u003ehtml_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","\u003cspan class=pl-s\u003e        {{\u003c/span\u003e","\u003cspan class=pl-s\u003e            id: \u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003eitem_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;,\u003c/span\u003e","\u003cspan class=pl-s\u003e            title: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etitle_js\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            url: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eurl_js\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            hn_url: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehn_url_js\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            points: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003epoints\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            comments: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle\u003c/span\u003e.\u003cspan class=pl-c1\u003ecomment_count\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            score: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003edumps\u003c/span\u003e(\u003cspan class=pl-s1\u003escore\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            response: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eresponse_js\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            prompt: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eprompt_js\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e,\u003c/span\u003e","\u003cspan class=pl-s\u003e            grades: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egrade_html_js\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        }},\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003ehtml_parts\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","\u003cspan class=pl-s\u003e    ];\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    function selectArticle(idx, updateHash = true) {\u003c/span\u003e","\u003cspan class=pl-s\u003e        // Update sidebar selection\u003c/span\u003e","\u003cspan class=pl-s\u003e        document.querySelectorAll(\u0026#39;.article-item\u0026#39;).forEach((el, i) =\u0026gt; {\u003c/span\u003e","\u003cspan class=pl-s\u003e            el.classList.toggle(\u0026#39;selected\u0026#39;, i === idx);\u003c/span\u003e","\u003cspan class=pl-s\u003e        });\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        const a = articles[idx];\u003c/span\u003e","\u003cspan class=pl-s\u003e        const scoreHtml = a.score !== null ?\u003c/span\u003e","\u003cspan class=pl-s\u003e            `\u0026lt;span class=\u0026quot;score score-${a.score}\u0026quot;\u0026gt;${a.score}/10\u0026lt;/span\u0026gt;` : \u0026#39;\u0026#39;;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        document.getElementById(\u0026#39;main-content\u0026#39;).innerHTML = `\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;h1\u0026gt;${a.title}${scoreHtml}\u0026lt;/h1\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;div class=\u0026quot;article-meta\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                ${a.points} points \u0026amp;middot; ${a.comments} comments \u0026amp;middot;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;a href=\u0026quot;${a.url}\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;Original Article\u0026lt;/a\u0026gt; \u0026amp;middot;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;a href=\u0026quot;${a.hn_url}\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;HN Discussion\u0026lt;/a\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            ${a.grades ? `\u0026lt;div class=\u0026quot;grades-section\u0026quot;\u0026gt;\u0026lt;strong\u0026gt;Grades:\u0026lt;/strong\u0026gt; ${a.grades}\u0026lt;/div\u0026gt;` : \u0026#39;\u0026#39;}\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;div class=\u0026quot;analysis\u0026quot;\u0026gt;${a.response ? marked.parse(cleanMarkdown(a.response)) : \u0026#39;\u0026lt;em\u0026gt;No analysis available\u0026lt;/em\u0026gt;\u0026#39;}\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            ${a.prompt ? `\u0026lt;details class=\u0026quot;prompt-section\u0026quot;\u0026gt;\u0026lt;summary\u0026gt;View LLM prompt\u0026lt;/summary\u0026gt;\u0026lt;div class=\u0026quot;prompt-content\u0026quot;\u0026gt;${a.prompt}\u0026lt;/div\u0026gt;\u0026lt;/details\u0026gt;` : \u0026#39;\u0026#39;}\u003c/span\u003e","\u003cspan class=pl-s\u003e        `;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e        // Update URL hash without scrolling\u003c/span\u003e","\u003cspan class=pl-s\u003e        if (updateHash) {\u003c/span\u003e","\u003cspan class=pl-s\u003e            history.replaceState(null, \u0026#39;\u0026#39;, \u0026#39;#article-\u0026#39; + a.id);\u003c/span\u003e","\u003cspan class=pl-s\u003e        }\u003c/span\u003e","\u003cspan class=pl-s\u003e    }\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    function selectArticleById(id) {\u003c/span\u003e","\u003cspan class=pl-s\u003e        const idx = articles.findIndex(a =\u0026gt; a.id === id);\u003c/span\u003e","\u003cspan class=pl-s\u003e        if (idx \u0026gt;= 0) {\u003c/span\u003e","\u003cspan class=pl-s\u003e            selectArticle(idx, false);\u003c/span\u003e","\u003cspan class=pl-s\u003e            // Scroll sidebar item into view\u003c/span\u003e","\u003cspan class=pl-s\u003e            document.getElementById(\u0026#39;article-\u0026#39; + id)?.scrollIntoView({block: \u0026#39;nearest\u0026#39;});\u003c/span\u003e","\u003cspan class=pl-s\u003e        }\u003c/span\u003e","\u003cspan class=pl-s\u003e    }\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    // Handle initial load and hash changes\u003c/span\u003e","\u003cspan class=pl-s\u003e    function handleHash() {\u003c/span\u003e","\u003cspan class=pl-s\u003e        const hash = window.location.hash;\u003c/span\u003e","\u003cspan class=pl-s\u003e        if (hash.startsWith(\u0026#39;#article-\u0026#39;)) {\u003c/span\u003e","\u003cspan class=pl-s\u003e            const id = hash.substring(9);  // Remove \u0026#39;#article-\u0026#39;\u003c/span\u003e","\u003cspan class=pl-s\u003e            selectArticleById(id);\u003c/span\u003e","\u003cspan class=pl-s\u003e            return true;\u003c/span\u003e","\u003cspan class=pl-s\u003e        }\u003c/span\u003e","\u003cspan class=pl-s\u003e        return false;\u003c/span\u003e","\u003cspan class=pl-s\u003e    }\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    // On load: check for hash, otherwise select first\u003c/span\u003e","\u003cspan class=pl-s\u003e    if (!handleHash() \u0026amp;\u0026amp; articles.length \u0026gt; 0) {\u003c/span\u003e","\u003cspan class=pl-s\u003e        selectArticle(0);\u003c/span\u003e","\u003cspan class=pl-s\u003e    }\u003c/span\u003e","\u003cspan class=pl-s\u003e\u003c/span\u003e","\u003cspan class=pl-s\u003e    // Handle hash changes (e.g., back/forward navigation)\u003c/span\u003e","\u003cspan class=pl-s\u003e    window.addEventListener(\u0026#39;hashchange\u0026#39;, handleHash);\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/script\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/html\u0026gt;\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eoutput_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;index.html\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","        \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026quot;\u003c/span\u003e.\u003cspan class=pl-c1\u003ejoin\u003c/span\u003e(\u003cspan class=pl-s1\u003ehtml_parts\u003c/span\u003e))","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Rendered HTML to \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eupdate_index\u003c/span\u003e:","        \u003cspan class=pl-en\u003estage_render_index\u003c/span\u003e()","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_render_index\u003c/span\u003e():","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Render the main index page and re-render all day pages to update navigation.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_output_dir\u003c/span\u003e()","    \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e.\u003cspan class=pl-c1\u003emkdir\u003c/span\u003e(\u003cspan class=pl-s1\u003eparents\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e, \u003cspan class=pl-s1\u003eexist_ok\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eTrue\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Find all dates that have data (not just output)\u003c/span\u003e","    \u003cspan class=pl-s1\u003edata_base\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003ePath\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;data\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003edata_base\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003edata_base\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e():","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e() \u003cspan class=pl-c1\u003eand\u003c/span\u003e (\u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;frontpage.json\u0026quot;\u003c/span\u003e).\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","                \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e(\u003cspan class=pl-s1\u003ed\u003c/span\u003e.\u003cspan class=pl-c1\u003ename\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e)","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e:","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;No dates to index.\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","","    \u003cspan class=pl-c\u003e# Re-render all day pages to update prev/next navigation\u003c/span\u003e","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Re-rendering \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e day pages...\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e:","        \u003cspan class=pl-en\u003estage_render\u003c/span\u003e(\u003cspan class=pl-s1\u003ed\u003c/span\u003e, \u003cspan class=pl-s1\u003eupdate_index\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eFalse\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;html\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;head\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;title\u0026gt;HN Time Capsule\u0026lt;/title\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;style\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        * { box-sizing: border-box; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        body { font-family: -apple-system, BlinkMacSystemFont, \u0026#39;Segoe UI\u0026#39;, Roboto, sans-serif;\u003c/span\u003e","\u003cspan class=pl-s\u003e               max-width: 800px; margin: 0 auto; padding: 40px 20px; line-height: 1.6; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        h1 { color: #ff6600; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .intro { color: #666; margin-bottom: 30px; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .hall-of-fame-link { display: inline-block; margin-bottom: 30px; padding: 12px 24px;\u003c/span\u003e","\u003cspan class=pl-s\u003e                            background: linear-gradient(135deg, #fbbf24, #f59e0b); color: white;\u003c/span\u003e","\u003cspan class=pl-s\u003e                            text-decoration: none; border-radius: 8px; font-weight: 600;\u003c/span\u003e","\u003cspan class=pl-s\u003e                            transition: transform 0.15s, box-shadow 0.15s; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .hall-of-fame-link:hover { box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4); }\u003c/span\u003e","\u003cspan class=pl-s\u003e        h2 { color: #333; margin-top: 40px; margin-bottom: 20px; font-size: 1.2em; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list { list-style: none; padding: 0; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list li { margin-bottom: 10px; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list a { display: block; padding: 15px 20px; background: #f5f5f5; border-radius: 6px;\u003c/span\u003e","\u003cspan class=pl-s\u003e                      text-decoration: none; color: #333; transition: all 0.15s; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list a:hover { background: #ff6600; color: white; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list .date { font-weight: 500; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list .desc { font-size: 0.85em; color: #888; margin-top: 3px; }\u003c/span\u003e","\u003cspan class=pl-s\u003e        .date-list a:hover .desc { color: rgba(255,255,255,0.8); }\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/style\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;body\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;h1\u0026gt;HN Time Capsule\u0026lt;/h1\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;p class=\u0026quot;intro\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        LLMs revisit Hacker News frontpages from 10 years ago (December 2015), with the benefit of hindsight.\u003c/span\u003e","\u003cspan class=pl-s\u003e        Each day\u0026#39;s articles and comments are analyzed by ChatGPT 5.1 (with thinking + browser tool) to compare what was said to what actually happened and users are graded on how prescient they were in retrospect. 30 articles per front page and 31 of them =\u0026gt; 930 GPT 5.1 Thinking calls led to total cost of ~$60.\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/p\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;h2\u0026gt;Browse by User\u0026lt;/h2\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;a href=\u0026quot;hall-of-fame.html\u0026quot; class=\u0026quot;hall-of-fame-link\u0026quot;\u0026gt;Hall of Fame\u0026lt;/a\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;h2\u0026gt;Browse by Date\u0026lt;/h2\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;ul class=\u0026quot;date-list\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ed\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003ereversed\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e):  \u003cspan class=pl-c\u003e# Most recent first\u003c/span\u003e","        \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;\u0026quot;\u0026quot;        \u0026lt;li\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;a href=\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ed\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e/index.html\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;div class=\u0026quot;date\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ed\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e                \u0026lt;div class=\u0026quot;desc\u0026quot;\u0026gt;10 years ago today\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e            \u0026lt;/a\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        \u0026lt;/li\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-s1\u003ehtml\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;    \u0026lt;/ul\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/html\u0026gt;\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;index.html\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","        \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e)","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Rendered index to \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e (\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_dates\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e dates)\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Also render the Hall of Fame\u003c/span\u003e","    \u003cspan class=pl-en\u003estage_render_hall_of_fame\u003c/span\u003e()","","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003estage_render_hall_of_fame\u003c/span\u003e():","    \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Render the Hall of Fame page aggregating all user grades across all dates.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003eget_output_dir\u003c/span\u003e()","    \u003cspan class=pl-s1\u003edata_base\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003ePath\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;data\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Collect all grades from all dates\u003c/span\u003e","    \u003cspan class=pl-s1\u003eall_user_grades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}  \u003cspan class=pl-c\u003e# username -\u0026gt; list of {grade, rationale, article, date, article_title, hn_url}\u003c/span\u003e","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003edata_base\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;No data directory found.\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003edate_dir\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003edata_base\u003c/span\u003e.\u003cspan class=pl-c1\u003eiterdir\u003c/span\u003e()):","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003edate_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003eis_dir\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edate_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;frontpage.json\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-s1\u003eall_grades_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edate_dir\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all_grades.json\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eall_grades_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003econtinue\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Load frontpage for article titles\u003c/span\u003e","        \u003cspan class=pl-s1\u003earticle_info\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {}","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e.\u003cspan class=pl-c1\u003eexists\u003c/span\u003e():","            \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003efrontpage_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","                \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003earticle\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e):","                    \u003cspan class=pl-s1\u003earticle_info\u003c/span\u003e[\u003cspan class=pl-s1\u003earticle\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;item_id\u0026quot;\u003c/span\u003e]] \u003cspan class=pl-c1\u003e=\u003c/span\u003e {","                        \u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003earticle\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e],","                        \u003cspan class=pl-s\u003e\u0026quot;hn_url\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003earticle\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;hn_url\u0026quot;\u003c/span\u003e]","                    }","","        \u003cspan class=pl-c\u003e# Load grades\u003c/span\u003e","        \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_grades_file\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egrades_data\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ejson\u003c/span\u003e.\u003cspan class=pl-c1\u003eload\u003c/span\u003e(\u003cspan class=pl-s1\u003ef\u003c/span\u003e)","","        \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edate_dir\u003c/span\u003e.\u003cspan class=pl-c1\u003ename\u003c/span\u003e","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egrade_list\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003egrades_data\u003c/span\u003e.\u003cspan class=pl-c1\u003eitems\u003c/span\u003e():","            \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e \u003cspan class=pl-c1\u003e\u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e\u003c/span\u003e \u003cspan class=pl-s1\u003eall_user_grades\u003c/span\u003e:","                \u003cspan class=pl-s1\u003eall_user_grades\u003c/span\u003e[\u003cspan class=pl-s1\u003eusername\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","","            \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003egrade_list\u003c/span\u003e:","                \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;article\u0026quot;\u003c/span\u003e]","                \u003cspan class=pl-s1\u003einfo\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003earticle_info\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e, {})","                \u003cspan class=pl-s1\u003eall_user_grades\u003c/span\u003e[\u003cspan class=pl-s1\u003eusername\u003c/span\u003e].\u003cspan class=pl-c1\u003eappend\u003c/span\u003e({","                    \u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e],","                    \u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eg\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e),","                    \u003cspan class=pl-s\u003e\u0026quot;article_id\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e,","                    \u003cspan class=pl-s\u003e\u0026quot;date\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e,","                    \u003cspan class=pl-s\u003e\u0026quot;article_title\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003einfo\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;Article \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e),","                    \u003cspan class=pl-s\u003e\u0026quot;hn_url\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003einfo\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;hn_url\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003ef\u0026quot;https://news.ycombinator.com/item?id=\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003earticle_id\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e)","                })","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-c1\u003enot\u003c/span\u003e \u003cspan class=pl-s1\u003eall_user_grades\u003c/span\u003e:","        \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;No grades found to render.\u0026quot;\u003c/span\u003e)","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e","","    \u003cspan class=pl-c\u003e# Calculate stats for each user\u003c/span\u003e","    \u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []","    \u003cspan class=pl-s1\u003eall_gpas\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e []  \u003cspan class=pl-c\u003e# Collect all GPAs for global mean\u003c/span\u003e","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eusername\u003c/span\u003e, \u003cspan class=pl-s1\u003egrades\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003eall_user_grades\u003c/span\u003e.\u003cspan class=pl-c1\u003eitems\u003c/span\u003e():","        \u003cspan class=pl-s1\u003egpas\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-en\u003egrade_to_numeric\u003c/span\u003e(\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e]) \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003egrades\u003c/span\u003e]","        \u003cspan class=pl-s1\u003eall_gpas\u003c/span\u003e.\u003cspan class=pl-c1\u003eextend\u003c/span\u003e(\u003cspan class=pl-s1\u003egpas\u003c/span\u003e)","        \u003cspan class=pl-s1\u003eavg_gpa\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esum\u003c/span\u003e(\u003cspan class=pl-s1\u003egpas\u003c/span\u003e) \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003egpas\u003c/span\u003e)","        \u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e.\u003cspan class=pl-c1\u003eappend\u003c/span\u003e({","            \u003cspan class=pl-s\u003e\u0026quot;username\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eusername\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;avg_gpa\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003eavg_gpa\u003c/span\u003e,","            \u003cspan class=pl-s\u003e\u0026quot;num_grades\u0026quot;\u003c/span\u003e: \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003egrades\u003c/span\u003e),","            \u003cspan class=pl-s\u003e\u0026quot;grades\u0026quot;\u003c/span\u003e: \u003cspan class=pl-s1\u003egrades\u003c/span\u003e","        })","","    \u003cspan class=pl-c\u003e# Filter to users with at least 3 grades\u003c/span\u003e","    \u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e [\u003cspan class=pl-s1\u003eu\u003c/span\u003e \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eu\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eu\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;num_grades\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e3\u003c/span\u003e]","","    \u003cspan class=pl-c\u003e# Bayesian weighted rating (IMDB formula)\u003c/span\u003e","    \u003cspan class=pl-c\u003e# weighted = (v * R + m * C) / (v + m)\u003c/span\u003e","    \u003cspan class=pl-c\u003e# v = number of votes, R = user\u0026#39;s average, m = prior weight, C = global mean\u003c/span\u003e","    \u003cspan class=pl-s1\u003eglobal_mean\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esum\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_gpas\u003c/span\u003e) \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003eall_gpas\u003c/span\u003e) \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eall_gpas\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-c1\u003e3.0\u003c/span\u003e","    \u003cspan class=pl-s1\u003em\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-c1\u003e3\u003c/span\u003e  \u003cspan class=pl-c\u003e# Prior weight - effectively adds 3 \u0026quot;average\u0026quot; votes to each user\u003c/span\u003e","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eu\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e:","        \u003cspan class=pl-s1\u003ev\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eu\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;num_grades\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-c1\u003eR\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eu\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;avg_gpa\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-s1\u003eu\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;weighted_gpa\u0026quot;\u003c/span\u003e] \u003cspan class=pl-c1\u003e=\u003c/span\u003e (\u003cspan class=pl-s1\u003ev\u003c/span\u003e \u003cspan class=pl-c1\u003e*\u003c/span\u003e \u003cspan class=pl-c1\u003eR\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e \u003cspan class=pl-c1\u003e*\u003c/span\u003e \u003cspan class=pl-s1\u003eglobal_mean\u003c/span\u003e) \u003cspan class=pl-c1\u003e/\u003c/span\u003e (\u003cspan class=pl-s1\u003ev\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-s1\u003em\u003c/span\u003e)","","    \u003cspan class=pl-c\u003e# Sort by weighted GPA (highest first)\u003c/span\u003e","    \u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e.\u003cspan class=pl-c1\u003esort\u003c/span\u003e(\u003cspan class=pl-s1\u003ekey\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-k\u003elambda\u003c/span\u003e \u003cspan class=pl-s1\u003ex\u003c/span\u003e: \u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-s1\u003ex\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;weighted_gpa\u0026quot;\u003c/span\u003e])","","    \u003cspan class=pl-c\u003e# Generate HTML\u003c/span\u003e","    \u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003egrade_color\u003c/span\u003e(\u003cspan class=pl-s1\u003egrade\u003c/span\u003e: \u003cspan class=pl-smi\u003estr\u003c/span\u003e) \u003cspan class=pl-c1\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=pl-smi\u003estr\u003c/span\u003e:","        \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;Return background color for a grade with +/- variations.\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-c\u003e# Color mapping: each grade has base, plus, minus variants\u003c/span\u003e","        \u003cspan class=pl-s1\u003ecolors\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e {","            \u003cspan class=pl-s\u003e\u0026#39;A+\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#15803d\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# dark green\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;A\u0026#39;\u003c/span\u003e:  \u003cspan class=pl-s\u003e\u0026#39;#22c55e\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# green\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;A-\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#4ade80\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light green\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;A−\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#4ade80\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light green (unicode minus)\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;B+\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#1d4ed8\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# dark blue\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;B\u0026#39;\u003c/span\u003e:  \u003cspan class=pl-s\u003e\u0026#39;#3b82f6\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# blue\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;B-\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#60a5fa\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light blue\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;B−\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#60a5fa\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light blue (unicode minus)\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;C+\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#d97706\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# dark amber\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;C\u0026#39;\u003c/span\u003e:  \u003cspan class=pl-s\u003e\u0026#39;#f59e0b\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# amber\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;C-\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#fbbf24\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light amber\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;C−\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#fbbf24\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light amber (unicode minus)\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;D+\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#ea580c\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# dark orange\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;D\u0026#39;\u003c/span\u003e:  \u003cspan class=pl-s\u003e\u0026#39;#f97316\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# orange\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;D-\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#fb923c\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light orange\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;D−\u0026#39;\u003c/span\u003e: \u003cspan class=pl-s\u003e\u0026#39;#fb923c\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# light orange (unicode minus)\u003c/span\u003e","            \u003cspan class=pl-s\u003e\u0026#39;F\u0026#39;\u003c/span\u003e:  \u003cspan class=pl-s\u003e\u0026#39;#ef4444\u0026#39;\u003c/span\u003e,  \u003cspan class=pl-c\u003e# red\u003c/span\u003e","        }","        \u003cspan class=pl-k\u003ereturn\u003c/span\u003e \u003cspan class=pl-s1\u003ecolors\u003c/span\u003e.\u003cspan class=pl-c1\u003eget\u003c/span\u003e(\u003cspan class=pl-s1\u003egrade\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;#6b7280\u0026#39;\u003c/span\u003e)  \u003cspan class=pl-c\u003e# gray fallback\u003c/span\u003e","","    \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;html\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;head\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;title\u0026gt;Hall of Fame - HN Time Capsule\u0026lt;/title\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;style\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        *{box-sizing:border-box}\u003c/span\u003e","\u003cspan class=pl-s\u003e        body{font-family:-apple-system,BlinkMacSystemFont,\u0026#39;Segoe UI\u0026#39;,Roboto,sans-serif;max-width:1000px;margin:0 auto;padding:40px 20px;line-height:1.6}\u003c/span\u003e","\u003cspan class=pl-s\u003e        h1{color:#ff6600}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .i{color:#666;margin-bottom:30px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .b{margin-bottom:20px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .b a{color:#ff6600;text-decoration:none}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .b a:hover{text-decoration:underline}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .uc{background:#f9fafb;border-radius:8px;padding:20px;margin-bottom:20px;border:1px solid #e5e7eb}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .uh{display:flex;align-items:center;gap:15px;margin-bottom:15px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .un{font-size:1.25em;font-weight:600}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .un a{color:#333;text-decoration:none}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .un a:hover{color:#ff6600}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .us{color:#666;font-size:0.9em}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .ag{background:#ff6600;color:white;padding:4px 10px;border-radius:4px;font-weight:600;font-size:0.9em}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gl{display:flex;flex-direction:column;gap:10px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gi{display:flex;align-items:flex-start;gap:12px;padding:10px;background:white;border-radius:6px;border:1px solid #e5e7eb}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gb{min-width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:white;font-weight:700;font-size:0.85em}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gc{flex:1}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .ga{font-weight:500;margin-bottom:4px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .ga a{color:#333;text-decoration:none}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .ga a:hover{color:#ff6600}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gr{color:#666;font-size:0.9em;font-style:italic}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gm{font-size:0.8em;color:#999;margin-top:4px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gm a{color:#ff6600;text-decoration:none}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .gm a:hover{text-decoration:underline}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .rk{font-size:1.5em;font-weight:700;color:#d1d5db;min-width:40px}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .rk.g{color:#fbbf24}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .rk.s{color:#9ca3af}\u003c/span\u003e","\u003cspan class=pl-s\u003e        .rk.z{color:#d97706}\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/style\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;body\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;div class=\u0026quot;b\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;index.html\u0026quot;\u0026gt;\u0026amp;larr; Back to dates\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;h1\u0026gt;Hall of Fame\u0026lt;/h1\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;p class=\u0026quot;i\u0026quot;\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e        The most prescient Hacker News commenters, ranked by their average grade across all analyzed threads.\u003c/span\u003e","\u003cspan class=pl-s\u003e        Grades are assigned by an LLM evaluating how well each comment predicted the future with 10 years of hindsight.\u003c/span\u003e","\u003cspan class=pl-s\u003e    \u0026lt;/p\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003ei\u003c/span\u003e, \u003cspan class=pl-s1\u003euser\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-en\u003eenumerate\u003c/span\u003e(\u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e):","        \u003cspan class=pl-s1\u003erank\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003ei\u003c/span\u003e \u003cspan class=pl-c1\u003e+\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e","        \u003cspan class=pl-s1\u003erank_class\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003erank\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e:","            \u003cspan class=pl-s1\u003erank_class\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;g\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003erank\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-c1\u003e2\u003c/span\u003e:","            \u003cspan class=pl-s1\u003erank_class\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;s\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003erank\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-c1\u003e3\u003c/span\u003e:","            \u003cspan class=pl-s1\u003erank_class\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;z\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Format GPA as letter grade equivalent (use weighted GPA for ranking/display)\u003c/span\u003e","        \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003euser\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;weighted_gpa\u0026quot;\u003c/span\u003e]","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e3.85\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;A\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e3.5\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;A-\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e3.15\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;B+\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e2.85\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;B\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e2.5\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;B-\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e2.15\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;C+\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e1.85\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;C\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e1.5\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;C-\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e1.15\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;D+\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003egpa\u003c/span\u003e \u003cspan class=pl-c1\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=pl-c1\u003e0.85\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;D\u0026quot;\u003c/span\u003e","        \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","            \u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;F\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-s1\u003ehn_user_url\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;https://news.ycombinator.com/user?id=\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003euser\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;username\u0026#39;\u003c/span\u003e])\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;\u0026quot;\u0026quot;\u0026lt;div class=\u0026quot;uc\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;uh\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;rk \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003erank_class\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026gt;#\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003erank\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;un\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehn_user_url\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003euser\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;username\u0026#39;\u003c/span\u003e])\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;ag\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egpa_letter\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e (\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003egpa\u003c/span\u003e:.2f\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e)\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;us\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003euser\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;num_grades\u0026#39;\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e grade\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;s\u0026quot;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003euser\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;num_grades\u0026#39;\u003c/span\u003e] \u003cspan class=pl-c1\u003e\u0026gt;\u003c/span\u003e \u003cspan class=pl-c1\u003e1\u003c/span\u003e \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;gl\u0026quot;\u0026gt;\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-c\u003e# Sort grades by grade (best first)\u003c/span\u003e","        \u003cspan class=pl-s1\u003esorted_grades\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003esorted\u003c/span\u003e(\u003cspan class=pl-s1\u003euser\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grades\u0026quot;\u003c/span\u003e], \u003cspan class=pl-s1\u003ekey\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-k\u003elambda\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e: \u003cspan class=pl-c1\u003e-\u003c/span\u003e\u003cspan class=pl-en\u003egrade_to_numeric\u003c/span\u003e(\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e]))","","        \u003cspan class=pl-k\u003efor\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e \u003cspan class=pl-c1\u003ein\u003c/span\u003e \u003cspan class=pl-s1\u003esorted_grades\u003c/span\u003e:","            \u003cspan class=pl-s1\u003ecolor\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-en\u003egrade_color\u003c/span\u003e(\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;grade\u0026quot;\u003c/span\u003e])","            \u003cspan class=pl-s1\u003erationale_part\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026#39;\u0026lt;div class=\u0026quot;gr\u0026quot;\u0026gt;\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e])\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026lt;/div\u0026gt;\u0026#39;\u003c/span\u003e \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;rationale\u0026quot;\u003c/span\u003e] \u003cspan class=pl-k\u003eelse\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u003c/span\u003e","            \u003cspan class=pl-s1\u003eanalysis_url\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;date\u0026#39;\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e/index.html#article-\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;article_id\u0026#39;\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u003c/span\u003e","","            \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003ef\u0026quot;\u0026quot;\u0026quot;\u0026lt;div class=\u0026quot;gi\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;gb\u0026quot; style=\u0026quot;background:\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ecolor\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;grade\u0026#39;\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u0026lt;div class=\u0026quot;gc\u0026quot;\u0026gt;\u0026lt;div class=\u0026quot;ga\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eanalysis_url\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003ehtml\u003c/span\u003e.\u003cspan class=pl-c1\u003eescape\u003c/span\u003e(\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;article_title\u0026#39;\u003c/span\u003e])\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/a\u0026gt;\u0026lt;/div\u0026gt;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003erationale_part\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;div class=\u0026quot;gm\u0026quot;\u0026gt;\u0026lt;a href=\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eanalysis_url\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot;\u0026gt;View\u0026lt;/a\u0026gt; \u0026amp;middot; \u0026lt;a href=\u0026quot;\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;hn_url\u0026#39;\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026quot; target=\u0026quot;_blank\u0026quot;\u0026gt;HN\u0026lt;/a\u0026gt; \u0026amp;middot; \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eg\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026#39;date\u0026#39;\u003c/span\u003e]\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","        \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u0026lt;/div\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-s1\u003epage_html\u003c/span\u003e \u003cspan class=pl-c1\u003e+=\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;\u0026quot;\u0026quot;\u0026lt;/body\u0026gt;\u003c/span\u003e","\u003cspan class=pl-s\u003e\u0026lt;/html\u0026gt;\u0026quot;\u0026quot;\u0026quot;\u003c/span\u003e","","    \u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eoutput_base\u003c/span\u003e \u003cspan class=pl-c1\u003e/\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;hall-of-fame.html\u0026quot;\u003c/span\u003e","    \u003cspan class=pl-k\u003ewith\u003c/span\u003e \u003cspan class=pl-en\u003eopen\u003c/span\u003e(\u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan class=pl-k\u003eas\u003c/span\u003e \u003cspan class=pl-s1\u003ef\u003c/span\u003e:","        \u003cspan class=pl-s1\u003ef\u003c/span\u003e.\u003cspan class=pl-c1\u003ewrite\u003c/span\u003e(\u003cspan class=pl-s1\u003epage_html\u003c/span\u003e)","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Rendered Hall of Fame to \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003eoutput_file\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e (\u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-en\u003elen\u003c/span\u003e(\u003cspan class=pl-s1\u003euser_stats\u003c/span\u003e)\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e users)\u0026quot;\u003c/span\u003e)","","","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","\u003cspan class=pl-c\u003e# CLI\u003c/span\u003e","\u003cspan class=pl-c\u003e# -----------------------------------------------------------------------------\u003c/span\u003e","","\u003cspan class=pl-k\u003edef\u003c/span\u003e \u003cspan class=pl-en\u003emain\u003c/span\u003e():","    \u003cspan class=pl-k\u003eimport\u003c/span\u003e \u003cspan class=pl-s1\u003eargparse\u003c/span\u003e","","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eargparse\u003c/span\u003e.\u003cspan class=pl-c1\u003eArgumentParser\u003c/span\u003e(\u003cspan class=pl-s1\u003edescription\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;HN Time Capsule Pipeline\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;stage\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003echoices\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;analyze\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;parse\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;render\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;render-index\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;all\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;clean\u0026quot;\u003c/span\u003e],","                        \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;Pipeline stage to run\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;--date\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003edefault\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eNone\u003c/span\u003e, \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;Target date (YYYY-MM-DD), defaults to 10 years ago\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;--limit\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003etype\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eint\u003c/span\u003e, \u003cspan class=pl-s1\u003edefault\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003eNone\u003c/span\u003e, \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;Limit number of articles (for testing)\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;--model\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003edefault\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;gpt-5.1\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;OpenAI model for analysis\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;--workers\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003etype\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003eint\u003c/span\u003e, \u003cspan class=pl-s1\u003edefault\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-c1\u003e15\u003c/span\u003e, \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;Number of parallel workers for analysis\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;--clean-stage\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003echoices\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e[\u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;analyze\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s\u003e\u0026quot;parse\u0026quot;\u003c/span\u003e],","                        \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;For clean: only clean this stage and downstream (default: all)\u0026quot;\u003c/span\u003e)","    \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eadd_argument\u003c/span\u003e(\u003cspan class=pl-s\u003e\u0026quot;--article\u0026quot;\u003c/span\u003e, \u003cspan class=pl-s1\u003ehelp\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s\u003e\u0026quot;For clean: only clean specific article by item_id\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-s1\u003eargs\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eparser\u003c/span\u003e.\u003cspan class=pl-c1\u003eparse_args\u003c/span\u003e()","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003edate\u003c/span\u003e:","        \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003edate\u003c/span\u003e","    \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","        \u003cspan class=pl-s1\u003etoday\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003edate\u003c/span\u003e.\u003cspan class=pl-c1\u003etoday\u003c/span\u003e()","        \u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e \u003cspan class=pl-c1\u003e=\u003c/span\u003e \u003cspan class=pl-s1\u003etoday\u003c/span\u003e.\u003cspan class=pl-c1\u003ereplace\u003c/span\u003e(\u003cspan class=pl-s1\u003eyear\u003c/span\u003e\u003cspan class=pl-c1\u003e=\u003c/span\u003e\u003cspan class=pl-s1\u003etoday\u003c/span\u003e.\u003cspan class=pl-c1\u003eyear\u003c/span\u003e \u003cspan class=pl-c1\u003e-\u003c/span\u003e \u003cspan class=pl-c1\u003e10\u003c/span\u003e).\u003cspan class=pl-c1\u003eisoformat\u003c/span\u003e()","","    \u003cspan class=pl-en\u003eprint\u003c/span\u003e(\u003cspan class=pl-s\u003ef\u0026quot;Target date: \u003cspan class=pl-s1\u003e\u003cspan class=pl-kos\u003e{\u003c/span\u003e\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e\u003cspan class=pl-kos\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=pl-cce\u003e\\n\u003c/span\u003e\u0026quot;\u003c/span\u003e)","","    \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;clean\u0026quot;\u003c/span\u003e:","        \u003cspan class=pl-en\u003estage_clean\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e, \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003eclean_stage\u003c/span\u003e, \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003earticle\u003c/span\u003e)","    \u003cspan class=pl-k\u003eelif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;render-index\u0026quot;\u003c/span\u003e:","        \u003cspan class=pl-en\u003estage_render_index\u003c/span\u003e()","    \u003cspan class=pl-k\u003eelse\u003c/span\u003e:","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;fetch\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-en\u003estage_fetch\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e, \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003elimit\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;prompt\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-en\u003estage_prompt\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;analyze\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-en\u003estage_analyze\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e, \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003emodel\u003c/span\u003e, \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003eworkers\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;parse\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-en\u003estage_parse\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)","        \u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;render\u0026quot;\u003c/span\u003e \u003cspan class=pl-c1\u003eor\u003c/span\u003e \u003cspan class=pl-s1\u003eargs\u003c/span\u003e.\u003cspan class=pl-c1\u003estage\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;all\u0026quot;\u003c/span\u003e:","            \u003cspan class=pl-en\u003estage_render\u003c/span\u003e(\u003cspan class=pl-s1\u003etarget_date\u003c/span\u003e)  \u003cspan class=pl-c\u003e# This also calls stage_render_index()\u003c/span\u003e","","","\u003cspan class=pl-k\u003eif\u003c/span\u003e \u003cspan class=pl-s1\u003e__name__\u003c/span\u003e \u003cspan class=pl-c1\u003e==\u003c/span\u003e \u003cspan class=pl-s\u003e\u0026quot;__main__\u0026quot;\u003c/span\u003e:","    \u003cspan class=pl-en\u003emain\u003c/span\u003e()"],"csv":null,"csvError":null,"copilotSWEAgentEnabled":false,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/karpathy/hn-time-capsule/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":false},"displayName":"pipeline.py","displayUrl":"https://github.com/karpathy/hn-time-capsule/blob/master/pipeline.py?raw=true","headerInfo":{"blobSize":"57.1 KB","deleteTooltip":"Fork this repository and delete the file","editTooltip":"Fork this repository and edit the file","ghDesktopPath":"x-github-client://openRepo/https://github.com/karpathy/hn-time-capsule?branch=master\u0026filepath=pipeline.py","isGitLfs":false,"onBranch":true,"shortPath":"259ccea","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2Fkarpathy%2Fhn-time-capsule%2Fblob%2Fmaster%2Fpipeline.py","isCSV":false,"isRichtext":false,"toc":null,"lineInfo":{"truncatedLoc":"1486","truncatedSloc":"1254"},"mode":"file"},"image":false,"isCodeownersFile":null,"isPlain":false,"isValidLegacyIssueTemplate":false,"issueTemplate":null,"discussionTemplate":null,"language":"Python","languageID":303,"large":false,"planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/karpathy/hn-time-capsule/blob/master/pipeline.py","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","releasePath":"/karpathy/hn-time-capsule/releases/new?marketplace=true","showPublishActionBanner":false},"rawBlobUrl":"https://github.com/karpathy/hn-time-capsule/raw/refs/heads/master/pipeline.py","renderImageOrRaw":false,"richText":null,"renderedFileInfo":null,"shortPath":null,"symbolsEnabled":true,"tabSize":4,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timed_out":false,"not_analyzed":false,"symbols":[{"name":"Article","kind":"class","ident_start":727,"ident_end":734,"extent_start":721,"extent_end":865,"fully_qualified_name":"Article","ident_utf16":{"start":{"line_number":31,"utf16_col":6},"end":{"line_number":31,"utf16_col":13}},"extent_utf16":{"start":{"line_number":31,"utf16_col":0},"end":{"line_number":39,"utf16_col":16}}},{"name":"rank","kind":"constant","ident_start":740,"ident_end":744,"extent_start":740,"extent_end":749,"fully_qualified_name":"Article.rank","ident_utf16":{"start":{"line_number":32,"utf16_col":4},"end":{"line_number":32,"utf16_col":8}},"extent_utf16":{"start":{"line_number":32,"utf16_col":4},"end":{"line_number":32,"utf16_col":13}}},{"name":"title","kind":"constant","ident_start":754,"ident_end":759,"extent_start":754,"extent_end":764,"fully_qualified_name":"Article.title","ident_utf16":{"start":{"line_number":33,"utf16_col":4},"end":{"line_number":33,"utf16_col":9}},"extent_utf16":{"start":{"line_number":33,"utf16_col":4},"end":{"line_number":33,"utf16_col":14}}},{"name":"url","kind":"constant","ident_start":769,"ident_end":772,"extent_start":769,"extent_end":777,"fully_qualified_name":"Article.url","ident_utf16":{"start":{"line_number":34,"utf16_col":4},"end":{"line_number":34,"utf16_col":7}},"extent_utf16":{"start":{"line_number":34,"utf16_col":4},"end":{"line_number":34,"utf16_col":12}}},{"name":"hn_url","kind":"constant","ident_start":782,"ident_end":788,"extent_start":782,"extent_end":793,"fully_qualified_name":"Article.hn_url","ident_utf16":{"start":{"line_number":35,"utf16_col":4},"end":{"line_number":35,"utf16_col":10}},"extent_utf16":{"start":{"line_number":35,"utf16_col":4},"end":{"line_number":35,"utf16_col":15}}},{"name":"points","kind":"constant","ident_start":798,"ident_end":804,"extent_start":798,"extent_end":809,"fully_qualified_name":"Article.points","ident_utf16":{"start":{"line_number":36,"utf16_col":4},"end":{"line_number":36,"utf16_col":10}},"extent_utf16":{"start":{"line_number":36,"utf16_col":4},"end":{"line_number":36,"utf16_col":15}}},{"name":"author","kind":"constant","ident_start":814,"ident_end":820,"extent_start":814,"extent_end":825,"fully_qualified_name":"Article.author","ident_utf16":{"start":{"line_number":37,"utf16_col":4},"end":{"line_number":37,"utf16_col":10}},"extent_utf16":{"start":{"line_number":37,"utf16_col":4},"end":{"line_number":37,"utf16_col":15}}},{"name":"comment_count","kind":"constant","ident_start":830,"ident_end":843,"extent_start":830,"extent_end":848,"fully_qualified_name":"Article.comment_count","ident_utf16":{"start":{"line_number":38,"utf16_col":4},"end":{"line_number":38,"utf16_col":17}},"extent_utf16":{"start":{"line_number":38,"utf16_col":4},"end":{"line_number":38,"utf16_col":22}}},{"name":"item_id","kind":"constant","ident_start":853,"ident_end":860,"extent_start":853,"extent_end":865,"fully_qualified_name":"Article.item_id","ident_utf16":{"start":{"line_number":39,"utf16_col":4},"end":{"line_number":39,"utf16_col":11}},"extent_utf16":{"start":{"line_number":39,"utf16_col":4},"end":{"line_number":39,"utf16_col":16}}},{"name":"Comment","kind":"class","ident_start":885,"ident_end":892,"extent_start":879,"extent_end":1419,"fully_qualified_name":"Comment","ident_utf16":{"start":{"line_number":43,"utf16_col":6},"end":{"line_number":43,"utf16_col":13}},"extent_utf16":{"start":{"line_number":43,"utf16_col":0},"end":{"line_number":64,"utf16_col":9}}},{"name":"id","kind":"constant","ident_start":898,"ident_end":900,"extent_start":898,"extent_end":905,"fully_qualified_name":"Comment.id","ident_utf16":{"start":{"line_number":44,"utf16_col":4},"end":{"line_number":44,"utf16_col":6}},"extent_utf16":{"start":{"line_number":44,"utf16_col":4},"end":{"line_number":44,"utf16_col":11}}},{"name":"author","kind":"constant","ident_start":910,"ident_end":916,"extent_start":910,"extent_end":921,"fully_qualified_name":"Comment.author","ident_utf16":{"start":{"line_number":45,"utf16_col":4},"end":{"line_number":45,"utf16_col":10}},"extent_utf16":{"start":{"line_number":45,"utf16_col":4},"end":{"line_number":45,"utf16_col":15}}},{"name":"text","kind":"constant","ident_start":926,"ident_end":930,"extent_start":926,"extent_end":935,"fully_qualified_name":"Comment.text","ident_utf16":{"start":{"line_number":46,"utf16_col":4},"end":{"line_number":46,"utf16_col":8}},"extent_utf16":{"start":{"line_number":46,"utf16_col":4},"end":{"line_number":46,"utf16_col":13}}},{"name":"children","kind":"constant","ident_start":940,"ident_end":948,"extent_start":940,"extent_end":984,"fully_qualified_name":"Comment.children","ident_utf16":{"start":{"line_number":47,"utf16_col":4},"end":{"line_number":47,"utf16_col":12}},"extent_utf16":{"start":{"line_number":47,"utf16_col":4},"end":{"line_number":47,"utf16_col":48}}},{"name":"to_dict","kind":"function","ident_start":994,"ident_end":1001,"extent_start":990,"extent_end":1189,"fully_qualified_name":"Comment.to_dict","ident_utf16":{"start":{"line_number":49,"utf16_col":8},"end":{"line_number":49,"utf16_col":15}},"extent_utf16":{"start":{"line_number":49,"utf16_col":4},"end":{"line_number":55,"utf16_col":9}}},{"name":"from_dict","kind":"function","ident_start":1216,"ident_end":1225,"extent_start":1212,"extent_end":1419,"fully_qualified_name":"Comment.from_dict","ident_utf16":{"start":{"line_number":58,"utf16_col":8},"end":{"line_number":58,"utf16_col":17}},"extent_utf16":{"start":{"line_number":58,"utf16_col":4},"end":{"line_number":64,"utf16_col":9}}},{"name":"HNFrontpageParser","kind":"class","ident_start":1604,"ident_end":1621,"extent_start":1598,"extent_end":5405,"fully_qualified_name":"HNFrontpageParser","ident_utf16":{"start":{"line_number":71,"utf16_col":6},"end":{"line_number":71,"utf16_col":23}},"extent_utf16":{"start":{"line_number":71,"utf16_col":0},"end":{"line_number":157,"utf16_col":37}}},{"name":"__init__","kind":"function","ident_start":1707,"ident_end":1715,"extent_start":1703,"extent_end":2038,"fully_qualified_name":"HNFrontpageParser.__init__","ident_utf16":{"start":{"line_number":74,"utf16_col":8},"end":{"line_number":74,"utf16_col":16}},"extent_utf16":{"start":{"line_number":74,"utf16_col":4},"end":{"line_number":84,"utf16_col":29}}},{"name":"handle_starttag","kind":"function","ident_start":2048,"ident_end":2063,"extent_start":2044,"extent_end":3267,"fully_qualified_name":"HNFrontpageParser.handle_starttag","ident_utf16":{"start":{"line_number":86,"utf16_col":8},"end":{"line_number":86,"utf16_col":23}},"extent_utf16":{"start":{"line_number":86,"utf16_col":4},"end":{"line_number":108,"utf16_col":44}}},{"name":"handle_data","kind":"function","ident_start":3277,"ident_end":3288,"extent_start":3273,"extent_end":4287,"fully_qualified_name":"HNFrontpageParser.handle_data","ident_utf16":{"start":{"line_number":110,"utf16_col":8},"end":{"line_number":110,"utf16_col":19}},"extent_utf16":{"start":{"line_number":110,"utf16_col":4},"end":{"line_number":133,"utf16_col":60}}},{"name":"handle_endtag","kind":"function","ident_start":4297,"ident_end":4310,"extent_start":4293,"extent_end":5405,"fully_qualified_name":"HNFrontpageParser.handle_endtag","ident_utf16":{"start":{"line_number":135,"utf16_col":8},"end":{"line_number":135,"utf16_col":21}},"extent_utf16":{"start":{"line_number":135,"utf16_col":4},"end":{"line_number":157,"utf16_col":37}}},{"name":"ArticleTextParser","kind":"class","ident_start":5414,"ident_end":5431,"extent_start":5408,"extent_end":6557,"fully_qualified_name":"ArticleTextParser","ident_utf16":{"start":{"line_number":160,"utf16_col":6},"end":{"line_number":160,"utf16_col":23}},"extent_utf16":{"start":{"line_number":160,"utf16_col":0},"end":{"line_number":193,"utf16_col":27}}},{"name":"__init__","kind":"function","ident_start":5509,"ident_end":5517,"extent_start":5505,"extent_end":5711,"fully_qualified_name":"ArticleTextParser.__init__","ident_utf16":{"start":{"line_number":163,"utf16_col":8},"end":{"line_number":163,"utf16_col":16}},"extent_utf16":{"start":{"line_number":163,"utf16_col":4},"end":{"line_number":167,"utf16_col":27}}},{"name":"handle_starttag","kind":"function","ident_start":5721,"ident_end":5736,"extent_start":5717,"extent_end":5887,"fully_qualified_name":"ArticleTextParser.handle_starttag","ident_utf16":{"start":{"line_number":169,"utf16_col":8},"end":{"line_number":169,"utf16_col":23}},"extent_utf16":{"start":{"line_number":169,"utf16_col":4},"end":{"line_number":173,"utf16_col":40}}},{"name":"handle_endtag","kind":"function","ident_start":5897,"ident_end":5910,"extent_start":5893,"extent_end":6146,"fully_qualified_name":"ArticleTextParser.handle_endtag","ident_utf16":{"start":{"line_number":175,"utf16_col":8},"end":{"line_number":175,"utf16_col":21}},"extent_utf16":{"start":{"line_number":175,"utf16_col":4},"end":{"line_number":179,"utf16_col":42}}},{"name":"handle_data","kind":"function","ident_start":6156,"ident_end":6167,"extent_start":6152,"extent_end":6323,"fully_qualified_name":"ArticleTextParser.handle_data","ident_utf16":{"start":{"line_number":181,"utf16_col":8},"end":{"line_number":181,"utf16_col":19}},"extent_utf16":{"start":{"line_number":181,"utf16_col":4},"end":{"line_number":186,"utf16_col":46}}},{"name":"get_text","kind":"function","ident_start":6333,"ident_end":6341,"extent_start":6329,"extent_end":6557,"fully_qualified_name":"ArticleTextParser.get_text","ident_utf16":{"start":{"line_number":188,"utf16_col":8},"end":{"line_number":188,"utf16_col":16}},"extent_utf16":{"start":{"line_number":188,"utf16_col":4},"end":{"line_number":193,"utf16_col":27}}},{"name":"fetch_url","kind":"function","ident_start":6746,"ident_end":6755,"extent_start":6742,"extent_end":7910,"fully_qualified_name":"fetch_url","ident_utf16":{"start":{"line_number":200,"utf16_col":4},"end":{"line_number":200,"utf16_col":13}},"extent_utf16":{"start":{"line_number":200,"utf16_col":0},"end":{"line_number":221,"utf16_col":69}}},{"name":"fetch_frontpage","kind":"function","ident_start":7917,"ident_end":7932,"extent_start":7913,"extent_end":8245,"fully_qualified_name":"fetch_frontpage","ident_utf16":{"start":{"line_number":224,"utf16_col":4},"end":{"line_number":224,"utf16_col":19}},"extent_utf16":{"start":{"line_number":224,"utf16_col":0},"end":{"line_number":231,"utf16_col":26}}},{"name":"fetch_comments","kind":"function","ident_start":8252,"ident_end":8266,"extent_start":8248,"extent_end":9225,"fully_qualified_name":"fetch_comments","ident_utf16":{"start":{"line_number":234,"utf16_col":4},"end":{"line_number":234,"utf16_col":18}},"extent_utf16":{"start":{"line_number":234,"utf16_col":0},"end":{"line_number":256,"utf16_col":51}}},{"name":"parse_children","kind":"function","ident_start":8634,"ident_end":8648,"extent_start":8630,"extent_end":9172,"fully_qualified_name":"parse_children","ident_utf16":{"start":{"line_number":242,"utf16_col":8},"end":{"line_number":242,"utf16_col":22}},"extent_utf16":{"start":{"line_number":242,"utf16_col":4},"end":{"line_number":254,"utf16_col":23}}},{"name":"MAX_ARTICLE_CHARS","kind":"constant","ident_start":9228,"ident_end":9245,"extent_start":9228,"extent_end":9253,"fully_qualified_name":"MAX_ARTICLE_CHARS","ident_utf16":{"start":{"line_number":259,"utf16_col":0},"end":{"line_number":259,"utf16_col":17}},"extent_utf16":{"start":{"line_number":259,"utf16_col":0},"end":{"line_number":259,"utf16_col":25}}},{"name":"fetch_article_content","kind":"function","ident_start":9260,"ident_end":9281,"extent_start":9256,"extent_end":11220,"fully_qualified_name":"fetch_article_content","ident_utf16":{"start":{"line_number":262,"utf16_col":4},"end":{"line_number":262,"utf16_col":25}},"extent_utf16":{"start":{"line_number":262,"utf16_col":0},"end":{"line_number":307,"utf16_col":45}}},{"name":"clean_html_to_text","kind":"function","ident_start":11227,"ident_end":11245,"extent_start":11223,"extent_end":11750,"fully_qualified_name":"clean_html_to_text","ident_utf16":{"start":{"line_number":310,"utf16_col":4},"end":{"line_number":310,"utf16_col":22}},"extent_utf16":{"start":{"line_number":310,"utf16_col":0},"end":{"line_number":320,"utf16_col":23}}},{"name":"PROMPT_TEMPLATE","kind":"constant","ident_start":11934,"ident_end":11949,"extent_start":11934,"extent_end":13802,"fully_qualified_name":"PROMPT_TEMPLATE","ident_utf16":{"start":{"line_number":327,"utf16_col":0},"end":{"line_number":327,"utf16_col":15}},"extent_utf16":{"start":{"line_number":327,"utf16_col":0},"end":{"line_number":356,"utf16_col":3}}},{"name":"comments_to_markdown","kind":"function","ident_start":13809,"ident_end":13829,"extent_start":13805,"extent_end":14213,"fully_qualified_name":"comments_to_markdown","ident_utf16":{"start":{"line_number":359,"utf16_col":4},"end":{"line_number":359,"utf16_col":24}},"extent_utf16":{"start":{"line_number":359,"utf16_col":0},"end":{"line_number":367,"utf16_col":29}}},{"name":"generate_prompt","kind":"function","ident_start":14220,"ident_end":14235,"extent_start":14216,"extent_end":15107,"fully_qualified_name":"generate_prompt","ident_utf16":{"start":{"line_number":370,"utf16_col":4},"end":{"line_number":370,"utf16_col":19}},"extent_utf16":{"start":{"line_number":370,"utf16_col":0},"end":{"line_number":401,"utf16_col":27}}},{"name":"parse_grades","kind":"function","ident_start":15291,"ident_end":15303,"extent_start":15287,"extent_end":16510,"fully_qualified_name":"parse_grades","ident_utf16":{"start":{"line_number":408,"utf16_col":4},"end":{"line_number":408,"utf16_col":16}},"extent_utf16":{"start":{"line_number":408,"utf16_col":0},"end":{"line_number":439,"utf16_col":17}}},{"name":"grade_to_numeric","kind":"function","ident_start":16517,"ident_end":16533,"extent_start":16513,"extent_end":16921,"fully_qualified_name":"grade_to_numeric","ident_utf16":{"start":{"line_number":442,"utf16_col":4},"end":{"line_number":442,"utf16_col":20}},"extent_utf16":{"start":{"line_number":442,"utf16_col":0},"end":{"line_number":453,"utf16_col":16}}},{"name":"parse_interestingness_score","kind":"function","ident_start":16928,"ident_end":16955,"extent_start":16924,"extent_end":17295,"fully_qualified_name":"parse_interestingness_score","ident_utf16":{"start":{"line_number":456,"utf16_col":4},"end":{"line_number":456,"utf16_col":31}},"extent_utf16":{"start":{"line_number":456,"utf16_col":0},"end":{"line_number":463,"utf16_col":15}}},{"name":"get_data_dir","kind":"function","ident_start":17481,"ident_end":17493,"extent_start":17477,"extent_end":17609,"fully_qualified_name":"get_data_dir","ident_utf16":{"start":{"line_number":470,"utf16_col":4},"end":{"line_number":470,"utf16_col":16}},"extent_utf16":{"start":{"line_number":470,"utf16_col":0},"end":{"line_number":472,"utf16_col":37}}},{"name":"get_output_dir","kind":"function","ident_start":17616,"ident_end":17630,"extent_start":17612,"extent_end":17835,"fully_qualified_name":"get_output_dir","ident_utf16":{"start":{"line_number":475,"utf16_col":4},"end":{"line_number":475,"utf16_col":18}},"extent_utf16":{"start":{"line_number":475,"utf16_col":0},"end":{"line_number":480,"utf16_col":15}}},{"name":"stage_fetch","kind":"function","ident_start":17842,"ident_end":17853,"extent_start":17838,"extent_end":19904,"fully_qualified_name":"stage_fetch","ident_utf16":{"start":{"line_number":483,"utf16_col":4},"end":{"line_number":483,"utf16_col":15}},"extent_utf16":{"start":{"line_number":483,"utf16_col":0},"end":{"line_number":537,"utf16_col":56}}},{"name":"stage_prompt","kind":"function","ident_start":19911,"ident_end":19923,"extent_start":19907,"extent_end":21472,"fully_qualified_name":"stage_prompt","ident_utf16":{"start":{"line_number":540,"utf16_col":4},"end":{"line_number":540,"utf16_col":16}},"extent_utf16":{"start":{"line_number":540,"utf16_col":0},"end":{"line_number":587,"utf16_col":47}}},{"name":"stage_analyze","kind":"function","ident_start":21479,"ident_end":21492,"extent_start":21475,"extent_end":23678,"fully_qualified_name":"stage_analyze","ident_utf16":{"start":{"line_number":590,"utf16_col":4},"end":{"line_number":590,"utf16_col":17}},"extent_utf16":{"start":{"line_number":590,"utf16_col":0},"end":{"line_number":650,"utf16_col":56}}},{"name":"analyze_one","kind":"function","ident_start":22550,"ident_end":22561,"extent_start":22546,"extent_end":23189,"fully_qualified_name":"analyze_one","ident_utf16":{"start":{"line_number":624,"utf16_col":8},"end":{"line_number":624,"utf16_col":19}},"extent_utf16":{"start":{"line_number":624,"utf16_col":4},"end":{"line_number":639,"utf16_col":67}}},{"name":"stage_parse","kind":"function","ident_start":23685,"ident_end":23696,"extent_start":23681,"extent_end":25806,"fully_qualified_name":"stage_parse","ident_utf16":{"start":{"line_number":653,"utf16_col":4},"end":{"line_number":653,"utf16_col":15}},"extent_utf16":{"start":{"line_number":653,"utf16_col":0},"end":{"line_number":710,"utf16_col":64}}},{"name":"stage_clean","kind":"function","ident_start":25813,"ident_end":25824,"extent_start":25809,"extent_end":28704,"fully_qualified_name":"stage_clean","ident_utf16":{"start":{"line_number":713,"utf16_col":4},"end":{"line_number":713,"utf16_col":15}},"extent_utf16":{"start":{"line_number":713,"utf16_col":0},"end":{"line_number":792,"utf16_col":79}}},{"name":"get_all_output_dates","kind":"function","ident_start":28711,"ident_end":28731,"extent_start":28707,"extent_end":29066,"fully_qualified_name":"get_all_output_dates","ident_utf16":{"start":{"line_number":795,"utf16_col":4},"end":{"line_number":795,"utf16_col":24}},"extent_utf16":{"start":{"line_number":795,"utf16_col":0},"end":{"line_number":804,"utf16_col":24}}},{"name":"stage_render","kind":"function","ident_start":29073,"ident_end":29085,"extent_start":29069,"extent_end":43864,"fully_qualified_name":"stage_render","ident_utf16":{"start":{"line_number":807,"utf16_col":4},"end":{"line_number":807,"utf16_col":16}},"extent_utf16":{"start":{"line_number":807,"utf16_col":0},"end":{"line_number":1130,"utf16_col":28}}},{"name":"get_grade","kind":"function","ident_start":40024,"ident_end":40033,"extent_start":40020,"extent_end":40187,"fully_qualified_name":"get_grade","ident_utf16":{"start":{"line_number":1026,"utf16_col":16},"end":{"line_number":1026,"utf16_col":25}},"extent_utf16":{"start":{"line_number":1026,"utf16_col":12},"end":{"line_number":1030,"utf16_col":26}}},{"name":"stage_render_index","kind":"function","ident_start":43871,"ident_end":43889,"extent_start":43867,"extent_end":47353,"fully_qualified_name":"stage_render_index","ident_utf16":{"start":{"line_number":1133,"utf16_col":4},"end":{"line_number":1133,"utf16_col":22}},"extent_utf16":{"start":{"line_number":1133,"utf16_col":0},"end":{"line_number":1215,"utf16_col":31}}},{"name":"stage_render_hall_of_fame","kind":"function","ident_start":47360,"ident_end":47385,"extent_start":47356,"extent_end":56287,"fully_qualified_name":"stage_render_hall_of_fame","ident_utf16":{"start":{"line_number":1218,"utf16_col":4},"end":{"line_number":1218,"utf16_col":29}},"extent_utf16":{"start":{"line_number":1218,"utf16_col":0},"end":{"line_number":1436,"utf16_col":78}}},{"name":"grade_color","kind":"function","ident_start":50545,"ident_end":50556,"extent_start":50541,"extent_end":51588,"fully_qualified_name":"grade_color","ident_utf16":{"start":{"line_number":1307,"utf16_col":8},"end":{"line_number":1307,"utf16_col":19}},"extent_utf16":{"start":{"line_number":1307,"utf16_col":4},"end":{"line_number":1329,"utf16_col":60}}},{"name":"main","kind":"function","ident_start":56461,"ident_end":56465,"extent_start":56457,"extent_end":58398,"fully_qualified_name":"main","ident_utf16":{"start":{"line_number":1443,"utf16_col":4},"end":{"line_number":1443,"utf16_col":8}},"extent_utf16":{"start":{"line_number":1443,"utf16_col":0},"end":{"line_number":1481,"utf16_col":77}}}]}},"copilotInfo":null,"copilotAccessAllowed":true,"copilotSpacesEnabled":true,"modelsAccessAllowed":true,"modelsRepoIntegrationEnabled":false,"isMarketplaceEnabled":true,"csrf_tokens":{"/karpathy/hn-time-capsule/branches":{"post":"1sW6NtZ7iph3peErf0RPJ4PKZdmjQboSunJTQuNeU16BlDnbNSpzo9d5hDoRE9iJuSZrMOGi1Ol-r5GKL0Qmyw"}}},"title":"hn-time-capsule/pipeline.py at master · karpathy/hn-time-capsule","appPayload":{"helpUrl":"https://docs.github.com","findFileWorkerPath":"/assets-cdn/worker/find-file-worker-5acd58e615f7.js","findInFileWorkerPath":"/assets-cdn/worker/find-in-file-worker-c073d0e0b342.js","githubDevUrl":"https://github.dev/","enabled_features":{"code_nav_ui_events":false,"react_blob_overlay":true,"accessible_code_button":true}}}</script>
  <div data-target="react-app.reactRoot"><style data-styled="true" data-styled-version="5.3.11">.jmjlbk{width:100%;}/*!sc*/
@media screen and (min-width:544px){.jmjlbk{width:100%;}}/*!sc*/
@media screen and (min-width:768px){.jmjlbk{width:auto;}}/*!sc*/
.cIRiaH{max-height:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
@media screen and (max-width:768px){.cIRiaH{display:none;}}/*!sc*/
@media screen and (min-width:768px){.cIRiaH{max-height:100vh;height:100vh;}}/*!sc*/
.fvNWEZ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;margin-bottom:16px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media screen and (max-width:768px){.bCYVKR{display:none;}}/*!sc*/
.cybVuK{margin-left:auto;margin-right:auto;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-bottom:40px;max-width:100%;margin-top:0;}/*!sc*/
.gSjuRy{display:inherit;}/*!sc*/
.jyTWxL{margin-left:16px;margin-right:16px;}/*!sc*/
.hGzGyY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}/*!sc*/
.cJXRZE{width:100%;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;min-width:0;margin-right:0;}/*!sc*/
.fpyUWF{height:40px;padding-left:4px;padding-bottom:16px;}/*!sc*/
.iafbuG{top:0px;z-index:4;background:var(--bgColor-default,var(--color-canvas-default));position:-webkit-sticky;position:sticky;}/*!sc*/
.iNRqcN{display:none;min-width:0;padding-top:8px;padding-bottom:8px;}/*!sc*/
.doYuhf{border:1px solid;border-top:none;border-color:var(--borderColor-default,var(--color-border-default,#d0d7de));border-radius:0px 0px 6px 6px;min-width:273px;}/*!sc*/
.hhuNfn{background-color:var(--bgColor-default,var(--color-canvas-default));border:0px;border-width:0;border-radius:0px 0px 6px 6px;padding:0;min-width:0;margin-top:46px;}/*!sc*/
.hNuvaP{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;padding-top:8px;padding-bottom:8px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-width:0;position:relative;}/*!sc*/
.kBkfpQ{position:relative;}/*!sc*/
.lnfLer{-webkit-flex:1;-ms-flex:1;flex:1;position:relative;min-width:0;}/*!sc*/
.djZnHX{tab-size:4;isolation:isolate;position:relative;overflow:auto;max-width:unset;}/*!sc*/
.gTgIBo{margin:1px 8px;position:absolute;z-index:1;}/*!sc*/
.bzYYiL{position:absolute;}/*!sc*/
.gihqdQ{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.vdPNv{position:fixed;top:0;right:0;height:100%;width:15px;-webkit-transition:-webkit-transform 0.3s;-webkit-transition:transform 0.3s;transition:transform 0.3s;z-index:1;}/*!sc*/
.vdPNv:hover{-webkit-transform:scaleX(1.5);-ms-transform:scaleX(1.5);transform:scaleX(1.5);}/*!sc*/
data-styled.g1[id="Box-sc-62in7e-0"]{content:"jmjlbk,cIRiaH,fvNWEZ,bCYVKR,cybVuK,gSjuRy,jyTWxL,hGzGyY,cJXRZE,fpyUWF,iafbuG,iNRqcN,doYuhf,hhuNfn,hNuvaP,kBkfpQ,lnfLer,djZnHX,gTgIBo,bzYYiL,gihqdQ,vdPNv,"}/*!sc*/
.hfSsoj[data-size="medium"][data-no-visuals]{display:none;}/*!sc*/
data-styled.g16[id="Button__StyledButtonComponent-sc-vqy3e4-0"]{content:"hfSsoj,"}/*!sc*/
.dWfbpP{font-size:16px;margin-left:8px;}/*!sc*/
data-styled.g24[id="Heading-sc-1vc165i-0"]{content:"dWfbpP,"}/*!sc*/
.bWhDnA[data-size="medium"][data-no-visuals]{border-top-left-radius:0;border-bottom-left-radius:0;}/*!sc*/
data-styled.g25[id="IconButton__StyledIconButton-sc-i53dt6-0"]{content:"bWhDnA,"}/*!sc*/
</style><meta name="github-code-view-meta-stats" id="github-code-view-meta-stats" data-hydrostats="publish"/> <!-- --> <!-- --> <button hidden="" data-testid="header-permalink-button" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><div><div style="--spacing:var(--spacing-none)" class="prc-PageLayout-PageLayoutRoot--KH-d"><div class="prc-PageLayout-PageLayoutWrapper-2BhU2" data-width="full"><div class="prc-PageLayout-PageLayoutContent-BneH9"><div tabindex="0" class="Box-sc-62in7e-0 jmjlbk"><div class="prc-PageLayout-PaneWrapper-pHPop ReposFileTreePane-module__Pane__G6mCt9A ReposFileTreePane-module__HidePane__glpb72p" style="--offset-header:0px;--spacing-row:var(--spacing-none);--spacing-column:var(--spacing-none)" data-is-hidden="false" data-position="start" data-sticky="true"><div class="prc-PageLayout-HorizontalDivider-JLVqp prc-PageLayout-PaneHorizontalDivider-9tbnE" data-variant-regular="none" data-variant-narrow="none" data-position="start" style="--spacing-divider:var(--spacing-none);--spacing:var(--spacing-none)"></div><div class="prc-PageLayout-Pane-AyzHK" data-resizable="true" style="--spacing:var(--spacing-none);--pane-min-width:256px;--pane-max-width:calc(100vw - var(--pane-max-width-diff));--pane-width-size:var(--pane-width-large);--pane-width:320px"><div class="react-tree-pane-contents"><div id="repos-file-tree" class="Box-sc-62in7e-0 cIRiaH"><div class="ReposFileTreePane-module__Box_1__Y8K4NoF"><div class="Box-sc-62in7e-0 fvNWEZ"><h2 class="use-tree-pane-module__Heading__OiAv1P0 prc-Heading-Heading-MtWFE"><button type="button" aria-label="Expand file tree" data-testid="expand-file-tree-button-mobile" class="prc-Button-ButtonBase-9n-Xk ExpandFileTreeButton-module__Button_1__UeSyAxq" data-loading="false" data-size="medium" data-variant="invisible"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-arrow-left" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06Z"></path></svg></span><span data-component="text" class="prc-Button-Label-FWkx3">Files</span></span></button><button data-component="IconButton" type="button" data-testid="collapse-file-tree-button" aria-expanded="true" aria-controls="repos-file-tree" class="prc-Button-ButtonBase-9n-Xk position-relative ExpandFileTreeButton-module__expandButton__rEZZsDe ExpandFileTreeButton-module__filesButtonBreakpoint__A9ISuMX fgColor-muted prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="invisible" aria-labelledby="_R_156mplab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-sidebar-expand" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m4.177 7.823 2.396-2.396A.25.25 0 0 1 7 5.604v4.792a.25.25 0 0 1-.427.177L4.177 8.177a.25.25 0 0 1 0-.354Z"></path><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25H9.5v-13Zm12.5 13a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H11v13Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="se" aria-hidden="true" id="_R_156mplab_">Collapse file tree</span><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button></h2><h2 class="Heading-sc-1vc165i-0 dWfbpP">Files</h2></div><div class="ReposFileTreePane-module__Box_2__vMQBXFB"><div class="ReposFileTreePane-module__Box_3__Hls8HRm"><button type="button" aria-haspopup="true" aria-expanded="false" tabindex="0" style="min-width:0" aria-label="master branch" data-testid="anchor-button" class="prc-Button-ButtonBase-9n-Xk react-repos-tree-pane-ref-selector width-full ref-selector-class RefSelectorAnchoredOverlay-module__RefSelectorOverlayBtn___JIX2hJ" data-loading="false" data-size="medium" data-variant="default" id="ref-picker-repos-header-ref-selector"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="text" class="prc-Button-Label-FWkx3"><div class="RefSelectorAnchoredOverlay-module__RefSelectorOverlayContainer__yCloy3g"><div class="RefSelectorAnchoredOverlay-module__RefSelectorOverlayHeader__zA8XfwW"><svg aria-hidden="true" focusable="false" class="octicon octicon-git-branch" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z"></path></svg></div><div class="ref-selector-button-text-container RefSelectorAnchoredOverlay-module__RefSelectorBtnTextContainer__AUMBIdr"><span class="RefSelectorAnchoredOverlay-module__RefSelectorText__cr_6IZh"> <!-- -->master</span></div></div></span><span data-component="trailingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-triangle-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg></span></span></button><button hidden="" data-testid="ref-selector-hotkey-button" data-hotkey-scope="read-only-cursor-text-area"></button></div><div class="ReposFileTreePane-module__Box_4__RNDhqfw"><a data-component="IconButton" type="button" class="prc-Button-ButtonBase-9n-Xk ReposFileTreePane-module__IconButton__mpL2tLd prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="default" aria-labelledby="_R_q6mplab_" href="/karpathy/hn-time-capsule/new/master" data-discover="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-plus" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.75 2a.75.75 0 0 1 .75.75V7h4.25a.75.75 0 0 1 0 1.5H8.5v4.25a.75.75 0 0 1-1.5 0V8.5H2.75a.75.75 0 0 1 0-1.5H7V2.75A.75.75 0 0 1 7.75 2Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="n" aria-hidden="true" id="_R_q6mplab_">Add file</span><button data-component="IconButton" type="button" class="prc-Button-ButtonBase-9n-Xk IconButton__StyledIconButton-sc-i53dt6-0 bWhDnA SearchButton-module__IconButton__uGkXY5u prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="default" aria-labelledby="_R_3a6mplab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-search" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_3a6mplab_">Search this repository</span><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button></div></div></div><div class="Box-sc-62in7e-0 bCYVKR ReposFileTreePane-module__FileResultsList__gHLS8F8"><span class="TextInput__StyledTextInput-sc-ttxlvl-0 d-flex FileResultsList-module__FilesSearchBox__VEX5_qz TextInput-wrapper prc-components-TextInputWrapper-Hpdqi prc-components-TextInputBaseWrapper-wY-n0" data-leading-visual="true" data-trailing-visual="true" aria-busy="false"><span class="TextInput-icon" id="_R_5amplab_" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-search" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z"></path></svg></span><input type="text" aria-label="Go to file" role="combobox" aria-controls="file-results-list" aria-expanded="false" aria-haspopup="dialog" autoCorrect="off" spellCheck="false" placeholder="Go to file" aria-describedby="_R_5amplab_ _R_5amplabH1_" data-component="input" class="prc-components-Input-IwWrt" value=""/><span class="TextInput-icon" id="_R_5amplabH1_" aria-hidden="true"><kbd>t</kbd></span></span></div><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><div class="Box-sc-62in7e-0 bCYVKR ReposFileTreePane-module__Box_5__sxoA1v3"><div class="react-tree-show-tree-items"><div class="ReposFileTreeView-module__Box__rY5iFZi" data-testid="repos-file-tree-container"><nav aria-label="File Tree Navigation"><span class="prc-src-InternalVisuallyHidden-2YaI6"><div></div></span><ul role="tree" aria-label="Files" data-truncate-text="true" class="prc-TreeView-TreeViewRootUlStyles-Mzrmj"><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id=".gitignore-item" role="treeitem" aria-labelledby="_R_3pimplab_" aria-describedby="_R_3pimplabH1_" aria-level="1" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1;content-visibility:auto;contain-intrinsic-size:auto 2rem"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_3pimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_3pimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>.gitignore</span></span></div></div></li><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id=".python-version-item" role="treeitem" aria-labelledby="_R_5pimplab_" aria-describedby="_R_5pimplabH1_" aria-level="1" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1;content-visibility:auto;contain-intrinsic-size:auto 2rem"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_5pimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_5pimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>.python-version</span></span></div></div></li><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id="README.md-item" role="treeitem" aria-labelledby="_R_7pimplab_" aria-describedby="_R_7pimplabH1_" aria-level="1" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1;content-visibility:auto;contain-intrinsic-size:auto 2rem"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_7pimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_7pimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>README.md</span></span></div></div></li><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id="hnhero.png-item" role="treeitem" aria-labelledby="_R_9pimplab_" aria-describedby="_R_9pimplabH1_" aria-level="1" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1;content-visibility:auto;contain-intrinsic-size:auto 2rem"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_9pimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_9pimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>hnhero.png</span></span></div></div></li><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id="pipeline.py-item" role="treeitem" aria-labelledby="_R_bpimplab_" aria-describedby="_R_bpimplabH1_" aria-level="1" aria-current="true" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_bpimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_bpimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>pipeline.py</span></span></div></div></li><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id="pyproject.toml-item" role="treeitem" aria-labelledby="_R_dpimplab_" aria-describedby="_R_dpimplabH1_" aria-level="1" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1;content-visibility:auto;contain-intrinsic-size:auto 2rem"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_dpimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_dpimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>pyproject.toml</span></span></div></div></li><li class="PRIVATE_TreeView-item prc-TreeView-TreeViewItem-Ter5f" tabindex="0" id="uv.lock-item" role="treeitem" aria-labelledby="_R_fpimplab_" aria-describedby="_R_fpimplabH1_" aria-level="1" aria-selected="false"><div class="PRIVATE_TreeView-item-container prc-TreeView-TreeViewItemContainer-z6qqQ" style="--level:1;content-visibility:auto;contain-intrinsic-size:auto 2rem"><div style="grid-area:spacer;display:flex"><div style="width:100%;display:flex"></div></div><div id="_R_fpimplab_" class="PRIVATE_TreeView-item-content prc-TreeView-TreeViewItemContent-RKsCI"><div class="PRIVATE_VisuallyHidden prc-TreeView-TreeViewVisuallyHidden-1N8xK" aria-hidden="true" id="_R_fpimplabH1_"></div><div class="PRIVATE_TreeView-item-visual prc-TreeView-TreeViewItemVisual-naWzj" aria-hidden="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-file" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"></path></svg></div><span class="PRIVATE_TreeView-item-content-text prc-TreeView-TreeViewItemContentText-FFaKp"><span>uv.lock</span></span></div></div></li></ul></nav></div></div></div></div></div></div><div class="prc-PageLayout-VerticalDivider-9QRmK prc-PageLayout-PaneVerticalDivider-le57g" data-variant-narrow="none" data-variant-regular="line" data-variant-wide="line" data-position="start" style="--spacing:var(--spacing-none)"><div class="prc-PageLayout-DraggableHandle-9s6B4" role="slider" aria-label="Draggable pane splitter" aria-valuemin="256" aria-valuemax="600" aria-valuenow="320" aria-valuetext="Pane width 320 pixels" tabindex="0"></div></div></div></div><div class="prc-PageLayout-ContentWrapper-gR9eG" data-is-hidden-narrow="true"><div class="prc-PageLayout-Content-xWL-A" data-width="full" style="--spacing:var(--spacing-none)"><div data-selector="repos-split-pane-content" tabindex="0" class="Box-sc-62in7e-0 cybVuK"><div class="Box-sc-62in7e-0 gSjuRy"><div class="container CodeViewHeader-module__Box__U5tFW12"><div class="px-3 pt-3 pb-0" id="StickyHeader"><div class="CodeViewHeader-module__Box_1__ZwWUsk9"><div class="CodeViewHeader-module__Box_2__ONieP7J"><div class="CodeViewHeader-module__Box_6__eDgpzaR"><div class="Breadcrumb-module__container__aEAUiP7 Breadcrumb-module__lg__KxKpkBV"><nav data-testid="breadcrumbs" aria-labelledby="repos-header-breadcrumb--wide-heading" id="repos-header-breadcrumb--wide" class="Breadcrumb-module__nav__BRfbfdO"><h2 class="sr-only ScreenReaderHeading-module__userSelectNone__aUugMbG prc-Heading-Heading-MtWFE" data-testid="screen-reader-heading" id="repos-header-breadcrumb--wide-heading">Breadcrumbs</h2><ol class="Breadcrumb-module__list__qpqFQku"><li class="Breadcrumb-module__listItem__W3_tsXT"><a class="Breadcrumb-module__repoLink__B0mCbkn prc-Link-Link-9ZwDx" data-testid="breadcrumbs-repo-link" href="/karpathy/hn-time-capsule/tree/master" data-discover="true">hn-time-capsule</a></li></ol></nav><div data-testid="breadcrumbs-filename" class="Breadcrumb-module__filename__YAu0vNQ"><span class="Breadcrumb-module__separator__LxqUd1n Breadcrumb-module__lg__KxKpkBV" aria-hidden="true">/</span><h1 class="Breadcrumb-module__filenameHeading__KgWIvqA Breadcrumb-module__lg__KxKpkBV prc-Heading-Heading-MtWFE" tabindex="-1" id="file-name-id-wide">pipeline.py</h1></div><button data-component="IconButton" type="button" class="prc-Button-ButtonBase-9n-Xk ml-2 prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="invisible" aria-labelledby="_R_3b9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-copy" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg></button><span class="CopyToClipboardButton-module__tooltip__eCErBjn prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-label="Copy path" aria-hidden="true" id="_R_3b9lab_">Copy path</span></div></div><div class="react-code-view-header-element--wide"><div class="CodeViewHeader-module__Box_7__GuOdVSR"><div class="d-flex gap-2"> <button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><button type="button" class="prc-Button-ButtonBase-9n-Xk Button__StyledButtonComponent-sc-vqy3e4-0 hfSsoj NavigationMenu-module__Button__qhkUiT5" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="default"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="text" class="prc-Button-Label-FWkx3">Blame</span></span></button><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button data-component="IconButton" type="button" data-testid="more-file-actions-button-nav-menu-wide" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk js-blob-dropdown-click NavigationMenu-module__IconButton__duJXDxm prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="default" aria-labelledby="_R_fihj9lab_" id="_R_ihj9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-kebab-horizontal" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_fihj9lab_">More file actions</span> </div></div></div><div class="react-code-view-header-element--narrow"><div class="CodeViewHeader-module__Box_7__GuOdVSR"><div class="d-flex gap-2"> <button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><button type="button" class="prc-Button-ButtonBase-9n-Xk Button__StyledButtonComponent-sc-vqy3e4-0 hfSsoj NavigationMenu-module__Button__qhkUiT5" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="default"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="text" class="prc-Button-Label-FWkx3">Blame</span></span></button><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button data-component="IconButton" type="button" data-testid="more-file-actions-button-nav-menu-narrow" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk js-blob-dropdown-click NavigationMenu-module__IconButton__duJXDxm prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="medium" data-variant="default" aria-labelledby="_R_fihr9lab_" id="_R_ihr9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-kebab-horizontal" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_fihr9lab_">More file actions</span> </div></div></div></div></div></div></div></div><div class="Box-sc-62in7e-0 jyTWxL react-code-view-bottom-padding"> <div class="BlobTopBanners-module__Box__NTiaZbp"></div> <!-- --> <!-- --> </div><div class="Box-sc-62in7e-0 jyTWxL"> <!-- --> <!-- --> <button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button><div class="d-flex flex-column border rounded-2 mb-3 pl-1"><div class="LatestCommit-module__Box__HssRvyQ"><h2 class="sr-only ScreenReaderHeading-module__userSelectNone__aUugMbG prc-Heading-Heading-MtWFE" data-testid="screen-reader-heading">Latest commit</h2><div style="width:120px" class="Skeleton Skeleton--text" data-testid="loading"> </div><div class="d-flex flex-shrink-0 gap-2"><div data-testid="latest-commit-details" class="d-none d-sm-flex flex-items-center"></div><div class="d-flex gap-2"><h2 class="sr-only ScreenReaderHeading-module__userSelectNone__aUugMbG prc-Heading-Heading-MtWFE" data-testid="screen-reader-heading">History</h2><a href="/karpathy/hn-time-capsule/commits/master/pipeline.py" class="prc-Button-ButtonBase-9n-Xk d-none d-lg-flex LinkButton-module__linkButton__JN9f0Tw flex-items-center fgColor-default" data-loading="false" data-size="small" data-variant="invisible"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-history" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5A.75.75 0 0 1 7.75 4Z"></path></svg></span><span data-component="text" class="prc-Button-Label-FWkx3"><span class="fgColor-default">History</span></span></span></a><div class="d-sm-none"></div><div class="d-flex d-lg-none"><span role="tooltip" aria-label="History" id="history-icon-button-tooltip" class="prc-Tooltip-Tooltip-JLsri prc-Tooltip-Tooltip--n-SqCQ- tooltipped-n"><a aria-label="View commit history for this file." href="/karpathy/hn-time-capsule/commits/master/pipeline.py" class="prc-Button-ButtonBase-9n-Xk LinkButton-module__linkButton__JN9f0Tw flex-items-center fgColor-default" data-loading="false" data-size="small" data-variant="invisible" aria-describedby="history-icon-button-tooltip"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-history" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5A.75.75 0 0 1 7.75 4Z"></path></svg></span></span></a></span></div></div></div></div></div><div class="Box-sc-62in7e-0 hGzGyY"><div class="Box-sc-62in7e-0 cJXRZE container"><div class="Box-sc-62in7e-0 fpyUWF react-code-size-details-banner"><div class="react-code-size-details-banner CodeSizeDetails-module__Box__T1NTcbD"><div class="text-mono CodeSizeDetails-module__Box_1__DTD64Js"><div data-testid="blob-size" class="CodeSizeDetails-module__Truncate_1__uL95k0z prc-Truncate-Truncate-2G1eo" data-inline="true" title="57.1 KB" style="--truncate-max-width:100%"><span>1486 lines (1254 loc) · 57.1 KB</span></div></div></div></div><div class="Box-sc-62in7e-0 iafbuG react-blob-view-header-sticky" id="repos-sticky-header"><div class="BlobViewHeader-module__Box___zFtzH0"><div class="react-blob-sticky-header"><div class="Box-sc-62in7e-0 iNRqcN"><div class="FileNameStickyHeader-module__Box_5__wBsp9b9"><div class="Breadcrumb-module__container__aEAUiP7 Breadcrumb-module__md__xR00nBb"><nav data-testid="breadcrumbs" aria-labelledby="sticky-breadcrumb-heading" id="sticky-breadcrumb" class="Breadcrumb-module__nav__BRfbfdO"><h2 class="sr-only ScreenReaderHeading-module__userSelectNone__aUugMbG prc-Heading-Heading-MtWFE" data-testid="screen-reader-heading" id="sticky-breadcrumb-heading">Breadcrumbs</h2><ol class="Breadcrumb-module__list__qpqFQku"><li class="Breadcrumb-module__listItem__W3_tsXT"><a class="Breadcrumb-module__repoLink__B0mCbkn prc-Link-Link-9ZwDx" data-testid="breadcrumbs-repo-link" href="/karpathy/hn-time-capsule/tree/master" data-discover="true">hn-time-capsule</a></li></ol></nav><div data-testid="breadcrumbs-filename" class="Breadcrumb-module__filename__YAu0vNQ"><span class="Breadcrumb-module__separator__LxqUd1n Breadcrumb-module__md__xR00nBb" aria-hidden="true">/</span><h1 class="Breadcrumb-module__filenameHeading__KgWIvqA Breadcrumb-module__md__xR00nBb prc-Heading-Heading-MtWFE" tabindex="-1" id="sticky-file-name-id">pipeline.py</h1></div></div><button type="button" class="prc-Button-ButtonBase-9n-Xk Button__StyledButtonComponent-sc-vqy3e4-0 FileNameStickyHeader-module__Button__oFPUtut FileNameStickyHeader-module__GoToTopButton__aYhdOCU" data-loading="false" data-size="small" data-variant="invisible"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="leadingVisual" class="prc-Button-Visual-YNt2F prc-Button-VisualWrap-E4cnq"><svg aria-hidden="true" focusable="false" class="octicon octicon-arrow-up" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M3.47 7.78a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0l4.25 4.25a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018L9 4.81v7.44a.75.75 0 0 1-1.5 0V4.81L4.53 7.78a.75.75 0 0 1-1.06 0Z"></path></svg></span><span data-component="text" class="prc-Button-Label-FWkx3">Top</span></span></button></div></div></div><div class="BlobViewHeader-module__Box_1__jQZ88Uz"><h2 class="sr-only ScreenReaderHeading-module__userSelectNone__aUugMbG prc-Heading-Heading-MtWFE" data-testid="screen-reader-heading">File metadata and controls</h2><div class="BlobViewHeader-module__Box_2__GaW70Bh"><ul aria-label="File view" class="prc-SegmentedControl-SegmentedControl-lqIXp BlobTabButtons-module__SegmentedControl__YDO7GlP" data-variant="default" data-size="small"><li class="prc-SegmentedControl-Item-tSCQh" data-selected=""><button aria-current="true" class="prc-SegmentedControl-Button-E48xz" type="button" style="--separator-color:transparent"><span class="prc-SegmentedControl-Content-1COlk segmentedControl-content"><div class="prc-SegmentedControl-Text-7S2y2 segmentedControl-text" data-text="Code">Code</div></span></button></li><li class="prc-SegmentedControl-Item-tSCQh"><button aria-current="false" class="prc-SegmentedControl-Button-E48xz" type="button" style="--separator-color:var(--borderColor-default)"><span class="prc-SegmentedControl-Content-1COlk segmentedControl-content"><div class="prc-SegmentedControl-Text-7S2y2 segmentedControl-text" data-text="Blame">Blame</div></span></button></li></ul><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><div class="react-code-size-details-in-header CodeSizeDetails-module__Box__T1NTcbD"><div class="text-mono CodeSizeDetails-module__Box_1__DTD64Js"><div data-testid="blob-size" class="CodeSizeDetails-module__Truncate_1__uL95k0z prc-Truncate-Truncate-2G1eo" data-inline="true" title="57.1 KB" style="--truncate-max-width:100%"><span>1486 lines (1254 loc) · 57.1 KB</span></div></div></div></div><div class="BlobViewHeader-module__Box_3__c6abRLe"><button data-component="IconButton" type="button" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default" aria-labelledby="_R_r9ucpal9lab_" id="_R_39ucpal9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-space" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M0 13.25V2.75C0 1.784.784 1 1.75 1H5c.551 0 1.07.26 1.4.7l.9 1.2a.25.25 0 0 0 .2.1h6.75c.966 0 1.75.784 1.75 1.75v3.638a.75.75 0 0 1-1.5 0V4.75a.25.25 0 0 0-.25-.25H7.5a1.75 1.75 0 0 1-1.4-.7l-.9-1.2a.25.25 0 0 0-.2-.1H1.75a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h5.663l.076.004a.75.75 0 0 1 0 1.492L7.413 15H1.75A1.75 1.75 0 0 1 0 13.25Z"></path><path d="M12.265 9.16a.248.248 0 0 1 .467 0l.237.649a3.726 3.726 0 0 0 2.219 2.218l.649.238a.249.249 0 0 1 0 .467l-.649.237a3.728 3.728 0 0 0-2.219 2.219l-.237.649a.249.249 0 0 1-.467 0l-.238-.649a3.726 3.726 0 0 0-2.218-2.219l-.649-.237a.248.248 0 0 1 0-.467l.649-.238a3.725 3.725 0 0 0 2.218-2.218l.238-.649Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="n" aria-hidden="true" id="_R_r9ucpal9lab_">Add to space</span><button data-component="IconButton" type="button" data-testid="copilot-ask-menu" class="prc-Button-ButtonBase-9n-Xk prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default" aria-labelledby="_R_2ecpal9lab_" id="blob-view-header-copilot-icon"><svg aria-hidden="true" focusable="false" class="octicon octicon-copilot" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M7.998 15.035c-4.562 0-7.873-2.914-7.998-3.749V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.201-.508-.254-1.084-.254-1.656 0-.87.128-1.769.693-2.484.579-.733 1.494-1.124 2.724-1.261 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .572-.053 1.148-.254 1.656.066.228.098.429.126.612.012.076.024.148.037.218.924.385 1.522 1.471 1.591 2.095v1.872c0 .766-3.351 3.795-8.002 3.795Zm0-1.485c2.28 0 4.584-1.11 5.002-1.433V7.862l-.023-.116c-.49.21-1.075.291-1.727.291-1.146 0-2.059-.327-2.71-.991A3.222 3.222 0 0 1 8 6.303a3.24 3.24 0 0 1-.544.743c-.65.664-1.563.991-2.71.991-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.419.323 2.722 1.433 5.002 1.433ZM6.762 2.83c-.193-.206-.637-.413-1.682-.297-1.019.113-1.479.404-1.713.7-.247.312-.369.789-.369 1.554 0 .793.129 1.171.308 1.371.162.181.519.379 1.442.379.853 0 1.339-.235 1.638-.54.315-.322.527-.827.617-1.553.117-.935-.037-1.395-.241-1.614Zm4.155-.297c-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.091.726.303 1.231.618 1.553.299.305.784.54 1.638.54.922 0 1.28-.198 1.442-.379.179-.2.308-.578.308-1.371 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7Z"></path><path d="M6.25 9.037a.75.75 0 0 1 .75.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 .75-.75Zm4.25.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 1.5 0Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="n" aria-hidden="true" id="_R_2ecpal9lab_">Ask Copilot about this file</span><div class="react-blob-header-edit-and-raw-actions BlobViewHeader-module__Box_4__v32VgJ7"><div class="prc-ButtonGroup-ButtonGroup-vFUrY"><div><a href="https://github.com/karpathy/hn-time-capsule/raw/refs/heads/master/pipeline.py" data-testid="raw-button" class="prc-Button-ButtonBase-9n-Xk LinkButton-module__linkButton__JN9f0Tw BlobViewHeader-module__LinkButton__J12MgkY" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default"><span data-component="buttonContent" data-align="center" class="prc-Button-ButtonContent-Iohp5"><span data-component="text" class="prc-Button-Label-FWkx3">Raw</span></span></a></div><div><button data-component="IconButton" type="button" data-testid="copy-raw-button" class="prc-Button-ButtonBase-9n-Xk prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default" aria-labelledby="_R_pbecpal9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-copy" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="n" aria-hidden="true" id="_R_pbecpal9lab_">Copy raw file</span></div><div><button data-component="IconButton" type="button" data-testid="download-raw-button" sx="[object Object]" class="prc-Button-ButtonBase-9n-Xk prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default" aria-labelledby="_R_dbecpal9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-download" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"></path><path d="M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="n" aria-hidden="true" id="_R_dbecpal9lab_">Download raw file</span></div></div><button hidden="" data-testid="raw-button-shortcut" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden="" data-testid="copy-raw-button-shortcut" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden="" data-testid="download-raw-button-shortcut" data-hotkey-scope="read-only-cursor-text-area"></button><a class="js-github-dev-shortcut d-none prc-Link-Link-9ZwDx" href="https://github.dev/"></a><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><a class="js-github-dev-new-tab-shortcut d-none prc-Link-Link-9ZwDx" href="https://github.dev/" target="_blank"></a><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><div class="prc-ButtonGroup-ButtonGroup-vFUrY"><div><a data-component="IconButton" type="button" data-testid="edit-button" class="prc-Button-ButtonBase-9n-Xk LinkButton-module__linkButton__JN9f0Tw prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default" aria-labelledby="_R_6jecpal9lab_" href="/karpathy/hn-time-capsule/edit/master/pipeline.py" data-discover="true"><svg aria-hidden="true" focusable="false" class="octicon octicon-pencil" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z"></path></svg></a><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_6jecpal9lab_">Fork this repository and edit the file</span></div><div><button data-component="IconButton" type="button" data-testid="more-edit-button" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="default" aria-labelledby="_R_7qjecpal9lab_" id="_R_ajecpal9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-triangle-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_7qjecpal9lab_">More edit options</span></div></div><button hidden="" data-testid="" data-hotkey="e,Shift+E" data-hotkey-scope="read-only-cursor-text-area"></button></div><button data-component="IconButton" type="button" aria-pressed="false" aria-expanded="false" aria-controls="symbols-pane" data-testid="symbols-button" class="prc-Button-ButtonBase-9n-Xk BlobViewHeader-module__IconButton_2__bZcrU8W prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="invisible" aria-labelledby="_R_3ucpal9lab_" id="symbols-button"><svg aria-hidden="true" focusable="false" class="octicon octicon-code-square" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25Zm7.47 3.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L10.69 8 9.22 6.53a.75.75 0 0 1 0-1.06ZM6.78 6.53 5.31 8l1.47 1.47a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_3ucpal9lab_">Open symbols panel</span><div class="react-blob-header-edit-and-raw-actions-combined"><button data-component="IconButton" type="button" title="More file actions" data-testid="more-file-actions-button" aria-haspopup="true" aria-expanded="false" tabindex="0" class="prc-Button-ButtonBase-9n-Xk js-blob-dropdown-click BlobViewHeader-module__IconButton__cpxwzb_ prc-Button-IconButton-fyge7" data-loading="false" data-no-visuals="true" data-size="small" data-variant="invisible" aria-labelledby="_R_fkucpal9lab_" id="_R_kucpal9lab_"><svg aria-hidden="true" focusable="false" class="octicon octicon-kebab-horizontal" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path></svg></button><span class="prc-TooltipV2-Tooltip-tLeuB" data-direction="nw" aria-hidden="true" id="_R_fkucpal9lab_">Edit and raw actions</span></div></div></div></div><div></div></div><div class="Box-sc-62in7e-0 doYuhf"><section aria-labelledby="file-name-id-wide file-name-id-mobile" class="Box-sc-62in7e-0 hhuNfn"><div class="Box-sc-62in7e-0 hNuvaP"><div id="highlighted-line-menu-positioner" class="position-relative"><div id="copilot-button-positioner" class="Box-sc-62in7e-0 kBkfpQ"><div class="Box-sc-62in7e-0 lnfLer"><div class="Box-sc-62in7e-0 djZnHX react-code-file-contents" role="presentation" aria-hidden="true" data-tab-size="4" data-paste-markdown-skip="true" data-hpc="true"><div class="react-line-numbers-no-virtualization" style="pointer-events:auto;position:relative;z-index:2"><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="1" class="react-line-number react-code-text" style="padding-right:16px">1</div><div data-line-number="2" class="react-line-number react-code-text" style="padding-right:16px">2</div><div data-line-number="3" class="react-line-number react-code-text" style="padding-right:16px">3</div><div data-line-number="4" class="react-line-number react-code-text" style="padding-right:16px">4</div><div data-line-number="5" class="react-line-number react-code-text" style="padding-right:16px">5</div><div data-line-number="6" class="react-line-number react-code-text" style="padding-right:16px">6</div><div data-line-number="7" class="react-line-number react-code-text" style="padding-right:16px">7</div><div data-line-number="8" class="react-line-number react-code-text" style="padding-right:16px">8</div><div data-line-number="9" class="react-line-number react-code-text" style="padding-right:16px">9</div><div data-line-number="10" class="react-line-number react-code-text" style="padding-right:16px">10</div><div data-line-number="11" class="react-line-number react-code-text" style="padding-right:16px">11</div><div data-line-number="12" class="react-line-number react-code-text" style="padding-right:16px">12</div><div data-line-number="13" class="react-line-number react-code-text" style="padding-right:16px">13</div><div data-line-number="14" class="react-line-number react-code-text" style="padding-right:16px">14</div><div data-line-number="15" class="react-line-number react-code-text" style="padding-right:16px">15</div><div data-line-number="16" class="react-line-number react-code-text" style="padding-right:16px">16</div><div data-line-number="17" class="react-line-number react-code-text" style="padding-right:16px">17</div><div data-line-number="18" class="react-line-number react-code-text" style="padding-right:16px">18</div><div data-line-number="19" class="react-line-number react-code-text" style="padding-right:16px">19</div><div data-line-number="20" class="react-line-number react-code-text" style="padding-right:16px">20</div><div data-line-number="21" class="react-line-number react-code-text" style="padding-right:16px">21</div><div data-line-number="22" class="react-line-number react-code-text" style="padding-right:16px">22</div><div data-line-number="23" class="react-line-number react-code-text" style="padding-right:16px">23</div><div data-line-number="24" class="react-line-number react-code-text" style="padding-right:16px">24</div><div data-line-number="25" class="react-line-number react-code-text" style="padding-right:16px">25</div><div data-line-number="26" class="react-line-number react-code-text" style="padding-right:16px">26</div><div data-line-number="27" class="react-line-number react-code-text" style="padding-right:16px">27</div><div data-line-number="28" class="react-line-number react-code-text" style="padding-right:16px">28</div><div data-line-number="29" class="react-line-number react-code-text" style="padding-right:16px">29</div><div data-line-number="30" class="react-line-number react-code-text" style="padding-right:16px">30</div><div data-line-number="31" class="react-line-number react-code-text" style="padding-right:16px">31</div><div data-line-number="32" class="react-line-number react-code-text" style="padding-right:16px">32<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="33" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">33</div><div data-line-number="34" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">34</div><div data-line-number="35" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">35</div><div data-line-number="36" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">36</div><div data-line-number="37" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">37</div><div data-line-number="38" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">38</div><div data-line-number="39" class="child-of-line-31  react-line-number react-code-text" style="padding-right:16px">39</div><div data-line-number="40" class="react-line-number react-code-text" style="padding-right:16px">40</div><div data-line-number="41" class="react-line-number react-code-text" style="padding-right:16px">41</div><div data-line-number="42" class="react-line-number react-code-text" style="padding-right:16px">42</div><div data-line-number="43" class="react-line-number react-code-text" style="padding-right:16px">43</div><div data-line-number="44" class="react-line-number react-code-text" style="padding-right:16px">44<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="45" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">45</div><div data-line-number="46" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">46</div><div data-line-number="47" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">47</div><div data-line-number="48" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">48</div><div data-line-number="49" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">49</div><div data-line-number="50" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">50<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="51" class="child-of-line-43 child-of-line-49  react-line-number react-code-text" style="padding-right:16px">51</div><div data-line-number="52" class="child-of-line-43 child-of-line-49  react-line-number react-code-text" style="padding-right:16px">52</div><div data-line-number="53" class="child-of-line-43 child-of-line-49  react-line-number react-code-text" style="padding-right:16px">53</div><div data-line-number="54" class="child-of-line-43 child-of-line-49  react-line-number react-code-text" style="padding-right:16px">54</div><div data-line-number="55" class="child-of-line-43 child-of-line-49  react-line-number react-code-text" style="padding-right:16px">55</div><div data-line-number="56" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">56</div><div data-line-number="57" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">57</div><div data-line-number="58" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">58</div><div data-line-number="59" class="child-of-line-43  react-line-number react-code-text" style="padding-right:16px">59<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="60" class="child-of-line-43 child-of-line-58  react-line-number react-code-text" style="padding-right:16px">60</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="61" class="child-of-line-43 child-of-line-58  react-line-number react-code-text" style="padding-right:16px">61</div><div data-line-number="62" class="child-of-line-43 child-of-line-58  react-line-number react-code-text" style="padding-right:16px">62</div><div data-line-number="63" class="child-of-line-43 child-of-line-58  react-line-number react-code-text" style="padding-right:16px">63</div><div data-line-number="64" class="child-of-line-43 child-of-line-58  react-line-number react-code-text" style="padding-right:16px">64</div><div data-line-number="65" class="react-line-number react-code-text" style="padding-right:16px">65</div><div data-line-number="66" class="react-line-number react-code-text" style="padding-right:16px">66</div><div data-line-number="67" class="react-line-number react-code-text" style="padding-right:16px">67</div><div data-line-number="68" class="react-line-number react-code-text" style="padding-right:16px">68</div><div data-line-number="69" class="react-line-number react-code-text" style="padding-right:16px">69</div><div data-line-number="70" class="react-line-number react-code-text" style="padding-right:16px">70</div><div data-line-number="71" class="react-line-number react-code-text" style="padding-right:16px">71</div><div data-line-number="72" class="react-line-number react-code-text" style="padding-right:16px">72<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="73" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">73</div><div data-line-number="74" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">74</div><div data-line-number="75" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">75<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="76" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">76</div><div data-line-number="77" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">77</div><div data-line-number="78" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">78</div><div data-line-number="79" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">79</div><div data-line-number="80" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">80</div><div data-line-number="81" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">81</div><div data-line-number="82" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">82</div><div data-line-number="83" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">83</div><div data-line-number="84" class="child-of-line-71 child-of-line-74  react-line-number react-code-text" style="padding-right:16px">84</div><div data-line-number="85" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">85</div><div data-line-number="86" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">86</div><div data-line-number="87" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">87<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="88" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">88</div><div data-line-number="89" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">89</div><div data-line-number="90" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">90</div><div data-line-number="91" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">91</div><div data-line-number="92" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">92</div><div data-line-number="93" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">93</div><div data-line-number="94" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">94</div><div data-line-number="95" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">95</div><div data-line-number="96" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">96</div><div data-line-number="97" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">97</div><div data-line-number="98" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">98</div><div data-line-number="99" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">99</div><div data-line-number="100" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">100</div><div data-line-number="101" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">101</div><div data-line-number="102" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">102</div><div data-line-number="103" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">103</div><div data-line-number="104" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">104</div><div data-line-number="105" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">105</div><div data-line-number="106" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">106</div><div data-line-number="107" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">107</div><div data-line-number="108" class="child-of-line-71 child-of-line-86  react-line-number react-code-text" style="padding-right:16px">108</div><div data-line-number="109" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">109</div><div data-line-number="110" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">110</div><div data-line-number="111" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">111<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="112" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">112</div><div data-line-number="113" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">113</div><div data-line-number="114" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">114</div><div data-line-number="115" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">115</div><div data-line-number="116" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">116</div><div data-line-number="117" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">117</div><div data-line-number="118" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">118</div><div data-line-number="119" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">119</div><div data-line-number="120" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">120</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="121" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">121</div><div data-line-number="122" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">122</div><div data-line-number="123" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">123</div><div data-line-number="124" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">124</div><div data-line-number="125" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">125</div><div data-line-number="126" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">126</div><div data-line-number="127" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">127</div><div data-line-number="128" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">128</div><div data-line-number="129" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">129</div><div data-line-number="130" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">130</div><div data-line-number="131" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">131</div><div data-line-number="132" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">132</div><div data-line-number="133" class="child-of-line-71 child-of-line-110  react-line-number react-code-text" style="padding-right:16px">133</div><div data-line-number="134" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">134</div><div data-line-number="135" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">135</div><div data-line-number="136" class="child-of-line-71  react-line-number react-code-text" style="padding-right:16px">136<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="137" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">137</div><div data-line-number="138" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">138</div><div data-line-number="139" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">139</div><div data-line-number="140" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">140</div><div data-line-number="141" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">141</div><div data-line-number="142" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">142</div><div data-line-number="143" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">143</div><div data-line-number="144" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">144</div><div data-line-number="145" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">145</div><div data-line-number="146" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">146</div><div data-line-number="147" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">147</div><div data-line-number="148" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">148</div><div data-line-number="149" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">149</div><div data-line-number="150" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">150</div><div data-line-number="151" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">151</div><div data-line-number="152" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">152</div><div data-line-number="153" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">153</div><div data-line-number="154" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">154</div><div data-line-number="155" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">155</div><div data-line-number="156" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">156</div><div data-line-number="157" class="child-of-line-71 child-of-line-135  react-line-number react-code-text" style="padding-right:16px">157</div><div data-line-number="158" class="react-line-number react-code-text" style="padding-right:16px">158</div><div data-line-number="159" class="react-line-number react-code-text" style="padding-right:16px">159</div><div data-line-number="160" class="react-line-number react-code-text" style="padding-right:16px">160</div><div data-line-number="161" class="react-line-number react-code-text" style="padding-right:16px">161<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="162" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">162</div><div data-line-number="163" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">163</div><div data-line-number="164" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">164<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="165" class="child-of-line-160 child-of-line-163  react-line-number react-code-text" style="padding-right:16px">165</div><div data-line-number="166" class="child-of-line-160 child-of-line-163  react-line-number react-code-text" style="padding-right:16px">166</div><div data-line-number="167" class="child-of-line-160 child-of-line-163  react-line-number react-code-text" style="padding-right:16px">167</div><div data-line-number="168" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">168</div><div data-line-number="169" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">169</div><div data-line-number="170" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">170<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="171" class="child-of-line-160 child-of-line-169  react-line-number react-code-text" style="padding-right:16px">171</div><div data-line-number="172" class="child-of-line-160 child-of-line-169  react-line-number react-code-text" style="padding-right:16px">172</div><div data-line-number="173" class="child-of-line-160 child-of-line-169  react-line-number react-code-text" style="padding-right:16px">173</div><div data-line-number="174" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">174</div><div data-line-number="175" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">175</div><div data-line-number="176" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">176<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="177" class="child-of-line-160 child-of-line-175  react-line-number react-code-text" style="padding-right:16px">177</div><div data-line-number="178" class="child-of-line-160 child-of-line-175  react-line-number react-code-text" style="padding-right:16px">178</div><div data-line-number="179" class="child-of-line-160 child-of-line-175  react-line-number react-code-text" style="padding-right:16px">179</div><div data-line-number="180" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">180</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="181" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">181</div><div data-line-number="182" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">182<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="183" class="child-of-line-160 child-of-line-181  react-line-number react-code-text" style="padding-right:16px">183</div><div data-line-number="184" class="child-of-line-160 child-of-line-181  react-line-number react-code-text" style="padding-right:16px">184</div><div data-line-number="185" class="child-of-line-160 child-of-line-181  react-line-number react-code-text" style="padding-right:16px">185</div><div data-line-number="186" class="child-of-line-160 child-of-line-181  react-line-number react-code-text" style="padding-right:16px">186</div><div data-line-number="187" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">187</div><div data-line-number="188" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">188</div><div data-line-number="189" class="child-of-line-160  react-line-number react-code-text" style="padding-right:16px">189<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="190" class="child-of-line-160 child-of-line-188  react-line-number react-code-text" style="padding-right:16px">190</div><div data-line-number="191" class="child-of-line-160 child-of-line-188  react-line-number react-code-text" style="padding-right:16px">191</div><div data-line-number="192" class="child-of-line-160 child-of-line-188  react-line-number react-code-text" style="padding-right:16px">192</div><div data-line-number="193" class="child-of-line-160 child-of-line-188  react-line-number react-code-text" style="padding-right:16px">193</div><div data-line-number="194" class="react-line-number react-code-text" style="padding-right:16px">194</div><div data-line-number="195" class="react-line-number react-code-text" style="padding-right:16px">195</div><div data-line-number="196" class="react-line-number react-code-text" style="padding-right:16px">196</div><div data-line-number="197" class="react-line-number react-code-text" style="padding-right:16px">197</div><div data-line-number="198" class="react-line-number react-code-text" style="padding-right:16px">198</div><div data-line-number="199" class="react-line-number react-code-text" style="padding-right:16px">199</div><div data-line-number="200" class="react-line-number react-code-text" style="padding-right:16px">200</div><div data-line-number="201" class="react-line-number react-code-text" style="padding-right:16px">201<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="202" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">202</div><div data-line-number="203" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">203</div><div data-line-number="204" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">204</div><div data-line-number="205" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">205</div><div data-line-number="206" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">206</div><div data-line-number="207" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">207</div><div data-line-number="208" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">208</div><div data-line-number="209" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">209</div><div data-line-number="210" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">210</div><div data-line-number="211" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">211</div><div data-line-number="212" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">212</div><div data-line-number="213" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">213</div><div data-line-number="214" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">214</div><div data-line-number="215" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">215</div><div data-line-number="216" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">216</div><div data-line-number="217" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">217</div><div data-line-number="218" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">218</div><div data-line-number="219" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">219</div><div data-line-number="220" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">220</div><div data-line-number="221" class="child-of-line-200  react-line-number react-code-text" style="padding-right:16px">221</div><div data-line-number="222" class="react-line-number react-code-text" style="padding-right:16px">222</div><div data-line-number="223" class="react-line-number react-code-text" style="padding-right:16px">223</div><div data-line-number="224" class="react-line-number react-code-text" style="padding-right:16px">224</div><div data-line-number="225" class="react-line-number react-code-text" style="padding-right:16px">225<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="226" class="child-of-line-224  react-line-number react-code-text" style="padding-right:16px">226</div><div data-line-number="227" class="child-of-line-224  react-line-number react-code-text" style="padding-right:16px">227</div><div data-line-number="228" class="child-of-line-224  react-line-number react-code-text" style="padding-right:16px">228</div><div data-line-number="229" class="child-of-line-224  react-line-number react-code-text" style="padding-right:16px">229</div><div data-line-number="230" class="child-of-line-224  react-line-number react-code-text" style="padding-right:16px">230</div><div data-line-number="231" class="child-of-line-224  react-line-number react-code-text" style="padding-right:16px">231</div><div data-line-number="232" class="react-line-number react-code-text" style="padding-right:16px">232</div><div data-line-number="233" class="react-line-number react-code-text" style="padding-right:16px">233</div><div data-line-number="234" class="react-line-number react-code-text" style="padding-right:16px">234</div><div data-line-number="235" class="react-line-number react-code-text" style="padding-right:16px">235<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="236" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">236</div><div data-line-number="237" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">237</div><div data-line-number="238" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">238</div><div data-line-number="239" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">239</div><div data-line-number="240" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">240</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="241" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">241</div><div data-line-number="242" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">242</div><div data-line-number="243" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">243<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="244" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">244</div><div data-line-number="245" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">245</div><div data-line-number="246" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">246</div><div data-line-number="247" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">247</div><div data-line-number="248" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">248</div><div data-line-number="249" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">249</div><div data-line-number="250" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">250</div><div data-line-number="251" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">251</div><div data-line-number="252" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">252</div><div data-line-number="253" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">253</div><div data-line-number="254" class="child-of-line-234 child-of-line-242  react-line-number react-code-text" style="padding-right:16px">254</div><div data-line-number="255" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">255</div><div data-line-number="256" class="child-of-line-234  react-line-number react-code-text" style="padding-right:16px">256</div><div data-line-number="257" class="react-line-number react-code-text" style="padding-right:16px">257</div><div data-line-number="258" class="react-line-number react-code-text" style="padding-right:16px">258</div><div data-line-number="259" class="react-line-number react-code-text" style="padding-right:16px">259</div><div data-line-number="260" class="react-line-number react-code-text" style="padding-right:16px">260</div><div data-line-number="261" class="react-line-number react-code-text" style="padding-right:16px">261</div><div data-line-number="262" class="react-line-number react-code-text" style="padding-right:16px">262</div><div data-line-number="263" class="react-line-number react-code-text" style="padding-right:16px">263<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="264" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">264</div><div data-line-number="265" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">265</div><div data-line-number="266" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">266</div><div data-line-number="267" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">267</div><div data-line-number="268" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">268</div><div data-line-number="269" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">269</div><div data-line-number="270" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">270</div><div data-line-number="271" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">271</div><div data-line-number="272" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">272</div><div data-line-number="273" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">273</div><div data-line-number="274" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">274</div><div data-line-number="275" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">275</div><div data-line-number="276" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">276</div><div data-line-number="277" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">277</div><div data-line-number="278" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">278</div><div data-line-number="279" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">279</div><div data-line-number="280" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">280</div><div data-line-number="281" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">281</div><div data-line-number="282" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">282</div><div data-line-number="283" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">283</div><div data-line-number="284" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">284</div><div data-line-number="285" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">285</div><div data-line-number="286" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">286</div><div data-line-number="287" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">287</div><div data-line-number="288" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">288</div><div data-line-number="289" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">289</div><div data-line-number="290" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">290</div><div data-line-number="291" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">291</div><div data-line-number="292" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">292</div><div data-line-number="293" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">293</div><div data-line-number="294" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">294</div><div data-line-number="295" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">295</div><div data-line-number="296" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">296</div><div data-line-number="297" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">297</div><div data-line-number="298" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">298</div><div data-line-number="299" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">299</div><div data-line-number="300" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">300</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="301" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">301</div><div data-line-number="302" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">302</div><div data-line-number="303" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">303</div><div data-line-number="304" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">304</div><div data-line-number="305" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">305</div><div data-line-number="306" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">306</div><div data-line-number="307" class="child-of-line-262  react-line-number react-code-text" style="padding-right:16px">307</div><div data-line-number="308" class="react-line-number react-code-text" style="padding-right:16px">308</div><div data-line-number="309" class="react-line-number react-code-text" style="padding-right:16px">309</div><div data-line-number="310" class="react-line-number react-code-text" style="padding-right:16px">310</div><div data-line-number="311" class="react-line-number react-code-text" style="padding-right:16px">311<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="312" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">312</div><div data-line-number="313" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">313</div><div data-line-number="314" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">314</div><div data-line-number="315" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">315</div><div data-line-number="316" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">316</div><div data-line-number="317" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">317</div><div data-line-number="318" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">318</div><div data-line-number="319" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">319</div><div data-line-number="320" class="child-of-line-310  react-line-number react-code-text" style="padding-right:16px">320</div><div data-line-number="321" class="react-line-number react-code-text" style="padding-right:16px">321</div><div data-line-number="322" class="react-line-number react-code-text" style="padding-right:16px">322</div><div data-line-number="323" class="react-line-number react-code-text" style="padding-right:16px">323</div><div data-line-number="324" class="react-line-number react-code-text" style="padding-right:16px">324</div><div data-line-number="325" class="react-line-number react-code-text" style="padding-right:16px">325</div><div data-line-number="326" class="react-line-number react-code-text" style="padding-right:16px">326</div><div data-line-number="327" class="react-line-number react-code-text" style="padding-right:16px">327</div><div data-line-number="328" class="react-line-number react-code-text" style="padding-right:16px">328<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="329" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">329</div><div data-line-number="330" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">330</div><div data-line-number="331" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">331</div><div data-line-number="332" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">332</div><div data-line-number="333" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">333</div><div data-line-number="334" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">334</div><div data-line-number="335" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">335</div><div data-line-number="336" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">336</div><div data-line-number="337" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">337</div><div data-line-number="338" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">338</div><div data-line-number="339" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">339</div><div data-line-number="340" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">340</div><div data-line-number="341" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">341</div><div data-line-number="342" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">342</div><div data-line-number="343" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">343</div><div data-line-number="344" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">344</div><div data-line-number="345" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">345</div><div data-line-number="346" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">346</div><div data-line-number="347" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">347</div><div data-line-number="348" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">348</div><div data-line-number="349" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">349</div><div data-line-number="350" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">350</div><div data-line-number="351" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">351</div><div data-line-number="352" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">352</div><div data-line-number="353" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">353</div><div data-line-number="354" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">354</div><div data-line-number="355" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">355</div><div data-line-number="356" class="child-of-line-327  react-line-number react-code-text" style="padding-right:16px">356</div><div data-line-number="357" class="react-line-number react-code-text" style="padding-right:16px">357</div><div data-line-number="358" class="react-line-number react-code-text" style="padding-right:16px">358</div><div data-line-number="359" class="react-line-number react-code-text" style="padding-right:16px">359</div><div data-line-number="360" class="react-line-number react-code-text" style="padding-right:16px">360<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="361" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">361</div><div data-line-number="362" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">362</div><div data-line-number="363" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">363</div><div data-line-number="364" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">364</div><div data-line-number="365" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">365</div><div data-line-number="366" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">366</div><div data-line-number="367" class="child-of-line-359  react-line-number react-code-text" style="padding-right:16px">367</div><div data-line-number="368" class="react-line-number react-code-text" style="padding-right:16px">368</div><div data-line-number="369" class="react-line-number react-code-text" style="padding-right:16px">369</div><div data-line-number="370" class="react-line-number react-code-text" style="padding-right:16px">370</div><div data-line-number="371" class="react-line-number react-code-text" style="padding-right:16px">371<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="372" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">372</div><div data-line-number="373" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">373</div><div data-line-number="374" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">374</div><div data-line-number="375" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">375</div><div data-line-number="376" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">376</div><div data-line-number="377" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">377</div><div data-line-number="378" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">378</div><div data-line-number="379" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">379</div><div data-line-number="380" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">380</div><div data-line-number="381" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">381</div><div data-line-number="382" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">382</div><div data-line-number="383" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">383</div><div data-line-number="384" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">384</div><div data-line-number="385" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">385</div><div data-line-number="386" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">386</div><div data-line-number="387" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">387</div><div data-line-number="388" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">388</div><div data-line-number="389" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">389</div><div data-line-number="390" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">390</div><div data-line-number="391" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">391</div><div data-line-number="392" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">392</div><div data-line-number="393" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">393</div><div data-line-number="394" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">394</div><div data-line-number="395" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">395</div><div data-line-number="396" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">396</div><div data-line-number="397" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">397</div><div data-line-number="398" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">398</div><div data-line-number="399" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">399</div><div data-line-number="400" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">400</div><div data-line-number="401" class="child-of-line-370  react-line-number react-code-text" style="padding-right:16px">401</div><div data-line-number="402" class="react-line-number react-code-text" style="padding-right:16px">402</div><div data-line-number="403" class="react-line-number react-code-text" style="padding-right:16px">403</div><div data-line-number="404" class="react-line-number react-code-text" style="padding-right:16px">404</div><div data-line-number="405" class="react-line-number react-code-text" style="padding-right:16px">405</div><div data-line-number="406" class="react-line-number react-code-text" style="padding-right:16px">406</div><div data-line-number="407" class="react-line-number react-code-text" style="padding-right:16px">407</div><div data-line-number="408" class="react-line-number react-code-text" style="padding-right:16px">408</div><div data-line-number="409" class="react-line-number react-code-text" style="padding-right:16px">409<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="410" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">410</div><div data-line-number="411" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">411</div><div data-line-number="412" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">412</div><div data-line-number="413" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">413</div><div data-line-number="414" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">414</div><div data-line-number="415" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">415</div><div data-line-number="416" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">416</div><div data-line-number="417" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">417</div><div data-line-number="418" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">418</div><div data-line-number="419" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">419</div><div data-line-number="420" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">420</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="421" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">421</div><div data-line-number="422" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">422</div><div data-line-number="423" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">423</div><div data-line-number="424" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">424</div><div data-line-number="425" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">425</div><div data-line-number="426" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">426</div><div data-line-number="427" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">427</div><div data-line-number="428" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">428</div><div data-line-number="429" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">429</div><div data-line-number="430" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">430</div><div data-line-number="431" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">431</div><div data-line-number="432" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">432</div><div data-line-number="433" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">433</div><div data-line-number="434" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">434</div><div data-line-number="435" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">435</div><div data-line-number="436" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">436</div><div data-line-number="437" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">437</div><div data-line-number="438" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">438</div><div data-line-number="439" class="child-of-line-408  react-line-number react-code-text" style="padding-right:16px">439</div><div data-line-number="440" class="react-line-number react-code-text" style="padding-right:16px">440</div><div data-line-number="441" class="react-line-number react-code-text" style="padding-right:16px">441</div><div data-line-number="442" class="react-line-number react-code-text" style="padding-right:16px">442</div><div data-line-number="443" class="react-line-number react-code-text" style="padding-right:16px">443<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="444" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">444</div><div data-line-number="445" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">445</div><div data-line-number="446" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">446</div><div data-line-number="447" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">447</div><div data-line-number="448" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">448</div><div data-line-number="449" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">449</div><div data-line-number="450" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">450</div><div data-line-number="451" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">451</div><div data-line-number="452" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">452</div><div data-line-number="453" class="child-of-line-442  react-line-number react-code-text" style="padding-right:16px">453</div><div data-line-number="454" class="react-line-number react-code-text" style="padding-right:16px">454</div><div data-line-number="455" class="react-line-number react-code-text" style="padding-right:16px">455</div><div data-line-number="456" class="react-line-number react-code-text" style="padding-right:16px">456</div><div data-line-number="457" class="react-line-number react-code-text" style="padding-right:16px">457<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="458" class="child-of-line-456  react-line-number react-code-text" style="padding-right:16px">458</div><div data-line-number="459" class="child-of-line-456  react-line-number react-code-text" style="padding-right:16px">459</div><div data-line-number="460" class="child-of-line-456  react-line-number react-code-text" style="padding-right:16px">460</div><div data-line-number="461" class="child-of-line-456  react-line-number react-code-text" style="padding-right:16px">461</div><div data-line-number="462" class="child-of-line-456  react-line-number react-code-text" style="padding-right:16px">462</div><div data-line-number="463" class="child-of-line-456  react-line-number react-code-text" style="padding-right:16px">463</div><div data-line-number="464" class="react-line-number react-code-text" style="padding-right:16px">464</div><div data-line-number="465" class="react-line-number react-code-text" style="padding-right:16px">465</div><div data-line-number="466" class="react-line-number react-code-text" style="padding-right:16px">466</div><div data-line-number="467" class="react-line-number react-code-text" style="padding-right:16px">467</div><div data-line-number="468" class="react-line-number react-code-text" style="padding-right:16px">468</div><div data-line-number="469" class="react-line-number react-code-text" style="padding-right:16px">469</div><div data-line-number="470" class="react-line-number react-code-text" style="padding-right:16px">470</div><div data-line-number="471" class="react-line-number react-code-text" style="padding-right:16px">471</div><div data-line-number="472" class="react-line-number react-code-text" style="padding-right:16px">472</div><div data-line-number="473" class="react-line-number react-code-text" style="padding-right:16px">473</div><div data-line-number="474" class="react-line-number react-code-text" style="padding-right:16px">474</div><div data-line-number="475" class="react-line-number react-code-text" style="padding-right:16px">475</div><div data-line-number="476" class="react-line-number react-code-text" style="padding-right:16px">476<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="477" class="child-of-line-475  react-line-number react-code-text" style="padding-right:16px">477</div><div data-line-number="478" class="child-of-line-475  react-line-number react-code-text" style="padding-right:16px">478</div><div data-line-number="479" class="child-of-line-475  react-line-number react-code-text" style="padding-right:16px">479</div><div data-line-number="480" class="child-of-line-475  react-line-number react-code-text" style="padding-right:16px">480</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="481" class="react-line-number react-code-text" style="padding-right:16px">481</div><div data-line-number="482" class="react-line-number react-code-text" style="padding-right:16px">482</div><div data-line-number="483" class="react-line-number react-code-text" style="padding-right:16px">483</div><div data-line-number="484" class="react-line-number react-code-text" style="padding-right:16px">484<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="485" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">485</div><div data-line-number="486" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">486</div><div data-line-number="487" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">487</div><div data-line-number="488" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">488</div><div data-line-number="489" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">489</div><div data-line-number="490" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">490</div><div data-line-number="491" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">491</div><div data-line-number="492" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">492</div><div data-line-number="493" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">493</div><div data-line-number="494" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">494</div><div data-line-number="495" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">495</div><div data-line-number="496" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">496</div><div data-line-number="497" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">497</div><div data-line-number="498" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">498</div><div data-line-number="499" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">499</div><div data-line-number="500" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">500</div><div data-line-number="501" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">501</div><div data-line-number="502" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">502</div><div data-line-number="503" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">503</div><div data-line-number="504" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">504</div><div data-line-number="505" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">505</div><div data-line-number="506" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">506</div><div data-line-number="507" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">507</div><div data-line-number="508" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">508</div><div data-line-number="509" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">509</div><div data-line-number="510" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">510</div><div data-line-number="511" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">511</div><div data-line-number="512" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">512</div><div data-line-number="513" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">513</div><div data-line-number="514" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">514</div><div data-line-number="515" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">515</div><div data-line-number="516" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">516</div><div data-line-number="517" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">517</div><div data-line-number="518" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">518</div><div data-line-number="519" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">519</div><div data-line-number="520" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">520</div><div data-line-number="521" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">521</div><div data-line-number="522" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">522</div><div data-line-number="523" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">523</div><div data-line-number="524" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">524</div><div data-line-number="525" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">525</div><div data-line-number="526" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">526</div><div data-line-number="527" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">527</div><div data-line-number="528" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">528</div><div data-line-number="529" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">529</div><div data-line-number="530" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">530</div><div data-line-number="531" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">531</div><div data-line-number="532" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">532</div><div data-line-number="533" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">533</div><div data-line-number="534" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">534</div><div data-line-number="535" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">535</div><div data-line-number="536" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">536</div><div data-line-number="537" class="child-of-line-483  react-line-number react-code-text" style="padding-right:16px">537</div><div data-line-number="538" class="react-line-number react-code-text" style="padding-right:16px">538</div><div data-line-number="539" class="react-line-number react-code-text" style="padding-right:16px">539</div><div data-line-number="540" class="react-line-number react-code-text" style="padding-right:16px">540</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="541" class="react-line-number react-code-text" style="padding-right:16px">541<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="542" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">542</div><div data-line-number="543" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">543</div><div data-line-number="544" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">544</div><div data-line-number="545" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">545</div><div data-line-number="546" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">546</div><div data-line-number="547" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">547</div><div data-line-number="548" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">548</div><div data-line-number="549" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">549</div><div data-line-number="550" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">550</div><div data-line-number="551" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">551</div><div data-line-number="552" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">552</div><div data-line-number="553" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">553</div><div data-line-number="554" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">554</div><div data-line-number="555" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">555</div><div data-line-number="556" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">556</div><div data-line-number="557" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">557</div><div data-line-number="558" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">558</div><div data-line-number="559" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">559</div><div data-line-number="560" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">560</div><div data-line-number="561" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">561</div><div data-line-number="562" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">562</div><div data-line-number="563" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">563</div><div data-line-number="564" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">564</div><div data-line-number="565" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">565</div><div data-line-number="566" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">566</div><div data-line-number="567" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">567</div><div data-line-number="568" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">568</div><div data-line-number="569" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">569</div><div data-line-number="570" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">570</div><div data-line-number="571" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">571</div><div data-line-number="572" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">572</div><div data-line-number="573" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">573</div><div data-line-number="574" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">574</div><div data-line-number="575" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">575</div><div data-line-number="576" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">576</div><div data-line-number="577" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">577</div><div data-line-number="578" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">578</div><div data-line-number="579" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">579</div><div data-line-number="580" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">580</div><div data-line-number="581" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">581</div><div data-line-number="582" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">582</div><div data-line-number="583" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">583</div><div data-line-number="584" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">584</div><div data-line-number="585" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">585</div><div data-line-number="586" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">586</div><div data-line-number="587" class="child-of-line-540  react-line-number react-code-text" style="padding-right:16px">587</div><div data-line-number="588" class="react-line-number react-code-text" style="padding-right:16px">588</div><div data-line-number="589" class="react-line-number react-code-text" style="padding-right:16px">589</div><div data-line-number="590" class="react-line-number react-code-text" style="padding-right:16px">590</div><div data-line-number="591" class="react-line-number react-code-text" style="padding-right:16px">591<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="592" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">592</div><div data-line-number="593" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">593</div><div data-line-number="594" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">594</div><div data-line-number="595" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">595</div><div data-line-number="596" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">596</div><div data-line-number="597" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">597</div><div data-line-number="598" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">598</div><div data-line-number="599" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">599</div><div data-line-number="600" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">600</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="601" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">601</div><div data-line-number="602" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">602</div><div data-line-number="603" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">603</div><div data-line-number="604" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">604</div><div data-line-number="605" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">605</div><div data-line-number="606" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">606</div><div data-line-number="607" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">607</div><div data-line-number="608" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">608</div><div data-line-number="609" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">609</div><div data-line-number="610" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">610</div><div data-line-number="611" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">611</div><div data-line-number="612" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">612</div><div data-line-number="613" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">613</div><div data-line-number="614" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">614</div><div data-line-number="615" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">615</div><div data-line-number="616" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">616</div><div data-line-number="617" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">617</div><div data-line-number="618" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">618</div><div data-line-number="619" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">619</div><div data-line-number="620" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">620</div><div data-line-number="621" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">621</div><div data-line-number="622" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">622</div><div data-line-number="623" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">623</div><div data-line-number="624" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">624</div><div data-line-number="625" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">625<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="626" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">626</div><div data-line-number="627" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">627</div><div data-line-number="628" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">628</div><div data-line-number="629" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">629</div><div data-line-number="630" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">630</div><div data-line-number="631" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">631</div><div data-line-number="632" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">632</div><div data-line-number="633" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">633</div><div data-line-number="634" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">634</div><div data-line-number="635" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">635</div><div data-line-number="636" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">636</div><div data-line-number="637" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">637</div><div data-line-number="638" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">638</div><div data-line-number="639" class="child-of-line-590 child-of-line-624  react-line-number react-code-text" style="padding-right:16px">639</div><div data-line-number="640" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">640</div><div data-line-number="641" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">641</div><div data-line-number="642" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">642</div><div data-line-number="643" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">643</div><div data-line-number="644" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">644</div><div data-line-number="645" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">645</div><div data-line-number="646" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">646</div><div data-line-number="647" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">647</div><div data-line-number="648" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">648</div><div data-line-number="649" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">649</div><div data-line-number="650" class="child-of-line-590  react-line-number react-code-text" style="padding-right:16px">650</div><div data-line-number="651" class="react-line-number react-code-text" style="padding-right:16px">651</div><div data-line-number="652" class="react-line-number react-code-text" style="padding-right:16px">652</div><div data-line-number="653" class="react-line-number react-code-text" style="padding-right:16px">653</div><div data-line-number="654" class="react-line-number react-code-text" style="padding-right:16px">654<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="655" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">655</div><div data-line-number="656" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">656</div><div data-line-number="657" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">657</div><div data-line-number="658" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">658</div><div data-line-number="659" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">659</div><div data-line-number="660" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">660</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="661" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">661</div><div data-line-number="662" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">662</div><div data-line-number="663" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">663</div><div data-line-number="664" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">664</div><div data-line-number="665" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">665</div><div data-line-number="666" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">666</div><div data-line-number="667" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">667</div><div data-line-number="668" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">668</div><div data-line-number="669" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">669</div><div data-line-number="670" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">670</div><div data-line-number="671" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">671</div><div data-line-number="672" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">672</div><div data-line-number="673" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">673</div><div data-line-number="674" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">674</div><div data-line-number="675" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">675</div><div data-line-number="676" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">676</div><div data-line-number="677" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">677</div><div data-line-number="678" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">678</div><div data-line-number="679" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">679</div><div data-line-number="680" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">680</div><div data-line-number="681" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">681</div><div data-line-number="682" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">682</div><div data-line-number="683" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">683</div><div data-line-number="684" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">684</div><div data-line-number="685" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">685</div><div data-line-number="686" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">686</div><div data-line-number="687" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">687</div><div data-line-number="688" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">688</div><div data-line-number="689" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">689</div><div data-line-number="690" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">690</div><div data-line-number="691" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">691</div><div data-line-number="692" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">692</div><div data-line-number="693" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">693</div><div data-line-number="694" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">694</div><div data-line-number="695" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">695</div><div data-line-number="696" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">696</div><div data-line-number="697" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">697</div><div data-line-number="698" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">698</div><div data-line-number="699" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">699</div><div data-line-number="700" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">700</div><div data-line-number="701" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">701</div><div data-line-number="702" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">702</div><div data-line-number="703" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">703</div><div data-line-number="704" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">704</div><div data-line-number="705" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">705</div><div data-line-number="706" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">706</div><div data-line-number="707" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">707</div><div data-line-number="708" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">708</div><div data-line-number="709" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">709</div><div data-line-number="710" class="child-of-line-653  react-line-number react-code-text" style="padding-right:16px">710</div><div data-line-number="711" class="react-line-number react-code-text" style="padding-right:16px">711</div><div data-line-number="712" class="react-line-number react-code-text" style="padding-right:16px">712</div><div data-line-number="713" class="react-line-number react-code-text" style="padding-right:16px">713</div><div data-line-number="714" class="react-line-number react-code-text" style="padding-right:16px">714<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="715" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">715</div><div data-line-number="716" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">716</div><div data-line-number="717" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">717</div><div data-line-number="718" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">718</div><div data-line-number="719" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">719</div><div data-line-number="720" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">720</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="721" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">721</div><div data-line-number="722" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">722</div><div data-line-number="723" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">723</div><div data-line-number="724" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">724</div><div data-line-number="725" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">725</div><div data-line-number="726" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">726</div><div data-line-number="727" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">727</div><div data-line-number="728" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">728</div><div data-line-number="729" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">729</div><div data-line-number="730" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">730</div><div data-line-number="731" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">731</div><div data-line-number="732" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">732</div><div data-line-number="733" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">733</div><div data-line-number="734" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">734</div><div data-line-number="735" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">735</div><div data-line-number="736" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">736</div><div data-line-number="737" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">737</div><div data-line-number="738" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">738</div><div data-line-number="739" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">739</div><div data-line-number="740" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">740</div><div data-line-number="741" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">741</div><div data-line-number="742" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">742</div><div data-line-number="743" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">743</div><div data-line-number="744" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">744</div><div data-line-number="745" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">745</div><div data-line-number="746" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">746</div><div data-line-number="747" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">747</div><div data-line-number="748" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">748</div><div data-line-number="749" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">749</div><div data-line-number="750" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">750</div><div data-line-number="751" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">751</div><div data-line-number="752" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">752</div><div data-line-number="753" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">753</div><div data-line-number="754" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">754</div><div data-line-number="755" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">755</div><div data-line-number="756" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">756</div><div data-line-number="757" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">757</div><div data-line-number="758" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">758</div><div data-line-number="759" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">759</div><div data-line-number="760" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">760</div><div data-line-number="761" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">761</div><div data-line-number="762" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">762</div><div data-line-number="763" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">763</div><div data-line-number="764" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">764</div><div data-line-number="765" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">765</div><div data-line-number="766" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">766</div><div data-line-number="767" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">767</div><div data-line-number="768" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">768</div><div data-line-number="769" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">769</div><div data-line-number="770" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">770</div><div data-line-number="771" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">771</div><div data-line-number="772" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">772</div><div data-line-number="773" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">773</div><div data-line-number="774" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">774</div><div data-line-number="775" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">775</div><div data-line-number="776" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">776</div><div data-line-number="777" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">777</div><div data-line-number="778" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">778</div><div data-line-number="779" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">779</div><div data-line-number="780" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">780</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="781" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">781</div><div data-line-number="782" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">782</div><div data-line-number="783" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">783</div><div data-line-number="784" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">784</div><div data-line-number="785" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">785</div><div data-line-number="786" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">786</div><div data-line-number="787" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">787</div><div data-line-number="788" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">788</div><div data-line-number="789" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">789</div><div data-line-number="790" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">790</div><div data-line-number="791" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">791</div><div data-line-number="792" class="child-of-line-713  react-line-number react-code-text" style="padding-right:16px">792</div><div data-line-number="793" class="react-line-number react-code-text" style="padding-right:16px">793</div><div data-line-number="794" class="react-line-number react-code-text" style="padding-right:16px">794</div><div data-line-number="795" class="react-line-number react-code-text" style="padding-right:16px">795</div><div data-line-number="796" class="react-line-number react-code-text" style="padding-right:16px">796<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="797" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">797</div><div data-line-number="798" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">798</div><div data-line-number="799" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">799</div><div data-line-number="800" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">800</div><div data-line-number="801" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">801</div><div data-line-number="802" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">802</div><div data-line-number="803" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">803</div><div data-line-number="804" class="child-of-line-795  react-line-number react-code-text" style="padding-right:16px">804</div><div data-line-number="805" class="react-line-number react-code-text" style="padding-right:16px">805</div><div data-line-number="806" class="react-line-number react-code-text" style="padding-right:16px">806</div><div data-line-number="807" class="react-line-number react-code-text" style="padding-right:16px">807</div><div data-line-number="808" class="react-line-number react-code-text" style="padding-right:16px">808<span class="Box-sc-62in7e-0 gTgIBo"><div aria-label="Collapse code section" role="button" class="Box-sc-62in7e-0 bzYYiL"><svg aria-hidden="true" focusable="false" class="octicon octicon-chevron-down" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" display="inline-block" overflow="visible" style="vertical-align:text-bottom"><path d="M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z"></path></svg></div></span></div><div data-line-number="809" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">809</div><div data-line-number="810" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">810</div><div data-line-number="811" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">811</div><div data-line-number="812" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">812</div><div data-line-number="813" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">813</div><div data-line-number="814" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">814</div><div data-line-number="815" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">815</div><div data-line-number="816" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">816</div><div data-line-number="817" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">817</div><div data-line-number="818" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">818</div><div data-line-number="819" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">819</div><div data-line-number="820" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">820</div><div data-line-number="821" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">821</div><div data-line-number="822" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">822</div><div data-line-number="823" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">823</div><div data-line-number="824" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">824</div><div data-line-number="825" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">825</div><div data-line-number="826" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">826</div><div data-line-number="827" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">827</div><div data-line-number="828" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">828</div><div data-line-number="829" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">829</div><div data-line-number="830" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">830</div><div data-line-number="831" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">831</div><div data-line-number="832" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">832</div><div data-line-number="833" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">833</div><div data-line-number="834" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">834</div><div data-line-number="835" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">835</div><div data-line-number="836" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">836</div><div data-line-number="837" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">837</div><div data-line-number="838" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">838</div><div data-line-number="839" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">839</div><div data-line-number="840" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">840</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="841" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">841</div><div data-line-number="842" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">842</div><div data-line-number="843" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">843</div><div data-line-number="844" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">844</div><div data-line-number="845" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">845</div><div data-line-number="846" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">846</div><div data-line-number="847" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">847</div><div data-line-number="848" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">848</div><div data-line-number="849" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">849</div><div data-line-number="850" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">850</div><div data-line-number="851" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">851</div><div data-line-number="852" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">852</div><div data-line-number="853" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">853</div><div data-line-number="854" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">854</div><div data-line-number="855" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">855</div><div data-line-number="856" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">856</div><div data-line-number="857" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">857</div><div data-line-number="858" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">858</div><div data-line-number="859" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">859</div><div data-line-number="860" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">860</div><div data-line-number="861" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">861</div><div data-line-number="862" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">862</div><div data-line-number="863" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">863</div><div data-line-number="864" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">864</div><div data-line-number="865" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">865</div><div data-line-number="866" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">866</div><div data-line-number="867" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">867</div><div data-line-number="868" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">868</div><div data-line-number="869" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">869</div><div data-line-number="870" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">870</div><div data-line-number="871" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">871</div><div data-line-number="872" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">872</div><div data-line-number="873" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">873</div><div data-line-number="874" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">874</div><div data-line-number="875" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">875</div><div data-line-number="876" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">876</div><div data-line-number="877" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">877</div><div data-line-number="878" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">878</div><div data-line-number="879" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">879</div><div data-line-number="880" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">880</div><div data-line-number="881" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">881</div><div data-line-number="882" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">882</div><div data-line-number="883" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">883</div><div data-line-number="884" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">884</div><div data-line-number="885" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">885</div><div data-line-number="886" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">886</div><div data-line-number="887" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">887</div><div data-line-number="888" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">888</div><div data-line-number="889" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">889</div><div data-line-number="890" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">890</div><div data-line-number="891" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">891</div><div data-line-number="892" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">892</div><div data-line-number="893" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">893</div><div data-line-number="894" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">894</div><div data-line-number="895" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">895</div><div data-line-number="896" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">896</div><div data-line-number="897" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">897</div><div data-line-number="898" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">898</div><div data-line-number="899" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">899</div><div data-line-number="900" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">900</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="901" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">901</div><div data-line-number="902" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">902</div><div data-line-number="903" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">903</div><div data-line-number="904" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">904</div><div data-line-number="905" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">905</div><div data-line-number="906" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">906</div><div data-line-number="907" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">907</div><div data-line-number="908" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">908</div><div data-line-number="909" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">909</div><div data-line-number="910" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">910</div><div data-line-number="911" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">911</div><div data-line-number="912" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">912</div><div data-line-number="913" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">913</div><div data-line-number="914" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">914</div><div data-line-number="915" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">915</div><div data-line-number="916" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">916</div><div data-line-number="917" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">917</div><div data-line-number="918" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">918</div><div data-line-number="919" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">919</div><div data-line-number="920" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">920</div><div data-line-number="921" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">921</div><div data-line-number="922" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">922</div><div data-line-number="923" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">923</div><div data-line-number="924" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">924</div><div data-line-number="925" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">925</div><div data-line-number="926" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">926</div><div data-line-number="927" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">927</div><div data-line-number="928" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">928</div><div data-line-number="929" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">929</div><div data-line-number="930" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">930</div><div data-line-number="931" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">931</div><div data-line-number="932" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">932</div><div data-line-number="933" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">933</div><div data-line-number="934" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">934</div><div data-line-number="935" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">935</div><div data-line-number="936" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">936</div><div data-line-number="937" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">937</div><div data-line-number="938" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">938</div><div data-line-number="939" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">939</div><div data-line-number="940" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">940</div><div data-line-number="941" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">941</div><div data-line-number="942" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">942</div><div data-line-number="943" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">943</div><div data-line-number="944" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">944</div><div data-line-number="945" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">945</div><div data-line-number="946" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">946</div><div data-line-number="947" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">947</div><div data-line-number="948" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">948</div><div data-line-number="949" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">949</div><div data-line-number="950" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">950</div><div data-line-number="951" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">951</div><div data-line-number="952" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">952</div><div data-line-number="953" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">953</div><div data-line-number="954" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">954</div><div data-line-number="955" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">955</div><div data-line-number="956" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">956</div><div data-line-number="957" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">957</div><div data-line-number="958" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">958</div><div data-line-number="959" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">959</div><div data-line-number="960" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">960</div></div><div class="react-no-virtualization-wrapper-lines-ssr"><div data-line-number="961" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">961</div><div data-line-number="962" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">962</div><div data-line-number="963" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">963</div><div data-line-number="964" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">964</div><div data-line-number="965" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">965</div><div data-line-number="966" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">966</div><div data-line-number="967" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">967</div><div data-line-number="968" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">968</div><div data-line-number="969" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">969</div><div data-line-number="970" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">970</div><div data-line-number="971" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">971</div><div data-line-number="972" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">972</div><div data-line-number="973" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">973</div><div data-line-number="974" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">974</div><div data-line-number="975" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">975</div><div data-line-number="976" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">976</div><div data-line-number="977" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">977</div><div data-line-number="978" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">978</div><div data-line-number="979" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">979</div><div data-line-number="980" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">980</div><div data-line-number="981" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">981</div><div data-line-number="982" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">982</div><div data-line-number="983" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">983</div><div data-line-number="984" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">984</div><div data-line-number="985" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">985</div><div data-line-number="986" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">986</div><div data-line-number="987" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">987</div><div data-line-number="988" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">988</div><div data-line-number="989" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">989</div><div data-line-number="990" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">990</div><div data-line-number="991" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">991</div><div data-line-number="992" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">992</div><div data-line-number="993" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">993</div><div data-line-number="994" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">994</div><div data-line-number="995" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">995</div><div data-line-number="996" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">996</div><div data-line-number="997" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">997</div><div data-line-number="998" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">998</div><div data-line-number="999" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">999</div><div data-line-number="1000" class="child-of-line-807  react-line-number react-code-text" style="padding-right:16px">1000</div></div></div><div class="react-code-lines"><div><div id="LC1" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>&quot;&quot;&quot;</span></div>
<div id="LC2" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>HN Time Capsule Pipeline</span></div>
<div id="LC3" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s></span></div>
<div id="LC4" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>Stages:</span></div>
<div id="LC5" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>1. fetch    - Fetch frontpage and articles for a given date</span></div>
<div id="LC6" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>2. prompt   - Generate LLM prompts for each article</span></div>
<div id="LC7" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>3. analyze  - Run LLM analysis on prompts</span></div>
<div id="LC8" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>4. parse    - Parse grades from LLM responses</span></div>
<div id="LC9" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>5. render   - Generate HTML summary</span></div>
<div id="LC10" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>&quot;&quot;&quot;</span></div>
<div id="LC11" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC12" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>json</span></div>
<div id="LC13" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>os</span></div>
<div id="LC14" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>re</span></div>
<div id="LC15" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>html</span></div>
<div id="LC16" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>time</span></div>
<div id="LC17" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>urllib</span>.<span class=pl-s1>request</span></div>
<div id="LC18" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>urllib</span>.<span class=pl-s1>error</span></div>
<div id="LC19" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>from</span> <span class=pl-s1>dataclasses</span> <span class=pl-k>import</span> <span class=pl-s1>dataclass</span>, <span class=pl-s1>field</span>, <span class=pl-s1>asdict</span></div>
<div id="LC20" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>from</span> <span class=pl-s1>datetime</span> <span class=pl-k>import</span> <span class=pl-s1>date</span></div>
<div id="LC21" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>from</span> <span class=pl-s1>html</span>.<span class=pl-s1>parser</span> <span class=pl-k>import</span> <span class=pl-v>HTMLParser</span></div>
<div id="LC22" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>from</span> <span class=pl-s1>pathlib</span> <span class=pl-k>import</span> <span class=pl-v>Path</span></div>
<div id="LC23" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC24" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>import</span> <span class=pl-s1>requests</span></div>
<div id="LC25" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC26" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC27" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC28" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># Data structures</span></div>
<div id="LC29" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC30" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC31" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-en>@<span class=pl-s1>dataclass</span></span></div>
<div id="LC32" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>class</span> <span class=pl-v>Article</span>:</div>
<div id="LC33" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>rank</span>: <span class=pl-smi>int</span></div>
<div id="LC34" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>title</span>: <span class=pl-smi>str</span></div>
<div id="LC35" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>url</span>: <span class=pl-smi>str</span></div>
<div id="LC36" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>hn_url</span>: <span class=pl-smi>str</span></div>
<div id="LC37" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>points</span>: <span class=pl-smi>int</span></div>
<div id="LC38" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>author</span>: <span class=pl-smi>str</span></div>
<div id="LC39" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-31 ">    <span class=pl-s1>comment_count</span>: <span class=pl-smi>int</span></div>
<div id="LC40" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-s1>item_id</span>: <span class=pl-smi>str</span></div>
<div id="LC41" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC42" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC43" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-en>@<span class=pl-s1>dataclass</span></span></div>
<div id="LC44" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>class</span> <span class=pl-v>Comment</span>:</div>
<div id="LC45" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-s1>id</span>: <span class=pl-smi>str</span></div>
<div id="LC46" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-s1>author</span>: <span class=pl-smi>str</span></div>
<div id="LC47" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-s1>text</span>: <span class=pl-smi>str</span></div>
<div id="LC48" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-s1>children</span>: <span class=pl-smi>list</span> <span class=pl-c1>=</span> <span class=pl-en>field</span>(<span class=pl-s1>default_factory</span><span class=pl-c1>=</span><span class=pl-s1>list</span>)</div>
<div id="LC49" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">
</div>
<div id="LC50" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-k>def</span> <span class=pl-en>to_dict</span>(<span class=pl-s1>self</span>):</div>
<div id="LC51" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-49 ">        <span class=pl-k>return</span> {</div>
<div id="LC52" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-49 ">            <span class=pl-s>&#39;id&#39;</span>: <span class=pl-s1>self</span>.<span class=pl-c1>id</span>,</div>
<div id="LC53" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-49 ">            <span class=pl-s>&#39;author&#39;</span>: <span class=pl-s1>self</span>.<span class=pl-c1>author</span>,</div>
<div id="LC54" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-49 ">            <span class=pl-s>&#39;text&#39;</span>: <span class=pl-s1>self</span>.<span class=pl-c1>text</span>,</div>
<div id="LC55" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-49 ">            <span class=pl-s>&#39;children&#39;</span>: [<span class=pl-s1>c</span>.<span class=pl-c1>to_dict</span>() <span class=pl-k>for</span> <span class=pl-s1>c</span> <span class=pl-c1>in</span> <span class=pl-s1>self</span>.<span class=pl-c1>children</span>]</div>
<div id="LC56" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">        }</div>
<div id="LC57" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">
</div>
<div id="LC58" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-en>@<span class=pl-s1>classmethod</span></span></div>
<div id="LC59" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 ">    <span class=pl-k>def</span> <span class=pl-en>from_dict</span>(<span class=pl-s1>cls</span>, <span class=pl-s1>d</span>):</div>
<div id="LC60" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-58 ">        <span class=pl-k>return</span> <span class=pl-en>cls</span>(</div>
<div id="LC61" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-58 ">            <span class=pl-s1>id</span><span class=pl-c1>=</span><span class=pl-s1>d</span>[<span class=pl-s>&#39;id&#39;</span>],</div>
<div id="LC62" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-58 ">            <span class=pl-s1>author</span><span class=pl-c1>=</span><span class=pl-s1>d</span>[<span class=pl-s>&#39;author&#39;</span>],</div>
<div id="LC63" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-58 ">            <span class=pl-s1>text</span><span class=pl-c1>=</span><span class=pl-s1>d</span>[<span class=pl-s>&#39;text&#39;</span>],</div>
<div id="LC64" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-43 child-of-line-58 ">            <span class=pl-s1>children</span><span class=pl-c1>=</span>[<span class=pl-s1>cls</span>.<span class=pl-c1>from_dict</span>(<span class=pl-s1>c</span>) <span class=pl-k>for</span> <span class=pl-s1>c</span> <span class=pl-c1>in</span> <span class=pl-s1>d</span>.<span class=pl-c1>get</span>(<span class=pl-s>&#39;children&#39;</span>, [])]</div>
<div id="LC65" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">        )</div>
<div id="LC66" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC67" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC68" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC69" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># HTML Parsing</span></div>
<div id="LC70" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC71" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC72" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>class</span> <span class=pl-v>HNFrontpageParser</span>(<span class=pl-v>HTMLParser</span>):</div>
<div id="LC73" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">    <span class=pl-s>&quot;&quot;&quot;Parse HN frontpage HTML to extract article listings.&quot;&quot;&quot;</span></div>
<div id="LC74" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">
</div>
<div id="LC75" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">    <span class=pl-k>def</span> <span class=pl-en>__init__</span>(<span class=pl-s1>self</span>):</div>
<div id="LC76" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-en>super</span>().<span class=pl-c1>__init__</span>()</div>
<div id="LC77" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>articles</span> <span class=pl-c1>=</span> []</div>
<div id="LC78" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span> <span class=pl-c1>=</span> {}</div>
<div id="LC79" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>in_titleline</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC80" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>in_title_link</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC81" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>in_subline</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC82" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>in_score</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC83" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>in_user</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC84" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-74 ">        <span class=pl-s1>self</span>.<span class=pl-c1>in_subline_links</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC85" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">        <span class=pl-s1>self</span>.<span class=pl-c1>current_rank</span> <span class=pl-c1>=</span> <span class=pl-c1>0</span></div>
<div id="LC86" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">
</div>
<div id="LC87" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">    <span class=pl-k>def</span> <span class=pl-en>handle_starttag</span>(<span class=pl-s1>self</span>, <span class=pl-s1>tag</span>, <span class=pl-s1>attrs</span>):</div>
<div id="LC88" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">        <span class=pl-s1>attrs_dict</span> <span class=pl-c1>=</span> <span class=pl-en>dict</span>(<span class=pl-s1>attrs</span>)</div>
<div id="LC89" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;span&quot;</span> <span class=pl-c1>and</span> <span class=pl-s1>attrs_dict</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;class&quot;</span>) <span class=pl-c1>==</span> <span class=pl-s>&quot;rank&quot;</span>:</div>
<div id="LC90" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_titleline</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC91" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;span&quot;</span> <span class=pl-c1>and</span> <span class=pl-s1>attrs_dict</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;class&quot;</span>) <span class=pl-c1>==</span> <span class=pl-s>&quot;titleline&quot;</span>:</div>
<div id="LC92" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_titleline</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC93" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_titleline</span> <span class=pl-c1>and</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;a&quot;</span> <span class=pl-c1>and</span> <span class=pl-s>&quot;href&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>attrs_dict</span>:</div>
<div id="LC94" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;title&quot;</span>):</div>
<div id="LC95" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;url&quot;</span>] <span class=pl-c1>=</span> <span class=pl-s1>attrs_dict</span>[<span class=pl-s>&quot;href&quot;</span>]</div>
<div id="LC96" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>self</span>.<span class=pl-c1>in_title_link</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC97" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;span&quot;</span> <span class=pl-c1>and</span> <span class=pl-s1>attrs_dict</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;class&quot;</span>) <span class=pl-c1>==</span> <span class=pl-s>&quot;subline&quot;</span>:</div>
<div id="LC98" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_subline</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC99" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_subline</span>:</div>
<div id="LC100" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;span&quot;</span> <span class=pl-c1>and</span> <span class=pl-s1>attrs_dict</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;class&quot;</span>) <span class=pl-c1>==</span> <span class=pl-s>&quot;score&quot;</span>:</div>
<div id="LC101" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>self</span>.<span class=pl-c1>in_score</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC102" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;a&quot;</span> <span class=pl-c1>and</span> <span class=pl-s1>attrs_dict</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;class&quot;</span>) <span class=pl-c1>==</span> <span class=pl-s>&quot;hnuser&quot;</span>:</div>
<div id="LC103" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>self</span>.<span class=pl-c1>in_user</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC104" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">            <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;a&quot;</span> <span class=pl-c1>and</span> <span class=pl-s>&quot;href&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>attrs_dict</span> <span class=pl-c1>and</span> <span class=pl-s>&quot;item?id=&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>attrs_dict</span>[<span class=pl-s>&quot;href&quot;</span>]:</div>
<div id="LC105" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>href</span> <span class=pl-c1>=</span> <span class=pl-s1>attrs_dict</span>[<span class=pl-s>&quot;href&quot;</span>]</div>
<div id="LC106" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>item_id</span> <span class=pl-c1>=</span> <span class=pl-s1>href</span>.<span class=pl-c1>split</span>(<span class=pl-s>&quot;item?id=&quot;</span>)[<span class=pl-c1>-</span><span class=pl-c1>1</span>]</div>
<div id="LC107" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;item_id&quot;</span>] <span class=pl-c1>=</span> <span class=pl-s1>item_id</span></div>
<div id="LC108" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-86 ">                <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;hn_url&quot;</span>] <span class=pl-c1>=</span> <span class=pl-s>f&quot;https://news.ycombinator.com/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>href</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC109" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">                <span class=pl-s1>self</span>.<span class=pl-c1>in_subline_links</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span></div>
<div id="LC110" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">
</div>
<div id="LC111" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">    <span class=pl-k>def</span> <span class=pl-en>handle_data</span>(<span class=pl-s1>self</span>, <span class=pl-s1>data</span>):</div>
<div id="LC112" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-s1>data</span> <span class=pl-c1>=</span> <span class=pl-s1>data</span>.<span class=pl-c1>strip</span>()</div>
<div id="LC113" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>data</span>:</div>
<div id="LC114" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-k>return</span></div>
<div id="LC115" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_title_link</span>:</div>
<div id="LC116" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;title&quot;</span>] <span class=pl-c1>=</span> <span class=pl-s1>data</span></div>
<div id="LC117" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_score</span>:</div>
<div id="LC118" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-k>try</span>:</div>
<div id="LC119" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;points&quot;</span>] <span class=pl-c1>=</span> <span class=pl-en>int</span>(<span class=pl-s1>data</span>.<span class=pl-c1>split</span>()[<span class=pl-c1>0</span>])</div>
<div id="LC120" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-k>except</span> (<span class=pl-v>ValueError</span>, <span class=pl-v>IndexError</span>):</div>
<div id="LC121" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;points&quot;</span>] <span class=pl-c1>=</span> <span class=pl-c1>0</span></div>
<div id="LC122" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_user</span>:</div>
<div id="LC123" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;author&quot;</span>] <span class=pl-c1>=</span> <span class=pl-s1>data</span></div>
<div id="LC124" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_subline_links</span>:</div>
<div id="LC125" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-k>if</span> <span class=pl-s>&quot;comment&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>data</span>.<span class=pl-c1>lower</span>():</div>
<div id="LC126" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                <span class=pl-k>try</span>:</div>
<div id="LC127" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                    <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;comment_count&quot;</span>] <span class=pl-c1>=</span> <span class=pl-en>int</span>(<span class=pl-s1>data</span>.<span class=pl-c1>split</span>()[<span class=pl-c1>0</span>])</div>
<div id="LC128" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                <span class=pl-k>except</span> (<span class=pl-v>ValueError</span>, <span class=pl-v>IndexError</span>):</div>
<div id="LC129" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                    <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;comment_count&quot;</span>] <span class=pl-c1>=</span> <span class=pl-c1>0</span></div>
<div id="LC130" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-k>elif</span> <span class=pl-s1>data</span>.<span class=pl-c1>lower</span>() <span class=pl-c1>==</span> <span class=pl-s>&quot;discuss&quot;</span>:</div>
<div id="LC131" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">                <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;comment_count&quot;</span>] <span class=pl-c1>=</span> <span class=pl-c1>0</span></div>
<div id="LC132" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">        <span class=pl-k>if</span> <span class=pl-s1>data</span>.<span class=pl-c1>endswith</span>(<span class=pl-s>&quot;.&quot;</span>) <span class=pl-c1>and</span> <span class=pl-s1>data</span>[:<span class=pl-c1>-</span><span class=pl-c1>1</span>].<span class=pl-c1>isdigit</span>():</div>
<div id="LC133" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-110 ">            <span class=pl-s1>self</span>.<span class=pl-c1>current_rank</span> <span class=pl-c1>=</span> <span class=pl-en>int</span>(<span class=pl-s1>data</span>[:<span class=pl-c1>-</span><span class=pl-c1>1</span>])</div>
<div id="LC134" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">            <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>[<span class=pl-s>&quot;rank&quot;</span>] <span class=pl-c1>=</span> <span class=pl-s1>self</span>.<span class=pl-c1>current_rank</span></div>
<div id="LC135" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">
</div>
<div id="LC136" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 ">    <span class=pl-k>def</span> <span class=pl-en>handle_endtag</span>(<span class=pl-s1>self</span>, <span class=pl-s1>tag</span>):</div>
<div id="LC137" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;a&quot;</span>:</div>
<div id="LC138" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_title_link</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC139" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_user</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC140" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_subline_links</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC141" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;span&quot;</span>:</div>
<div id="LC142" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_score</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC143" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_titleline</span>:</div>
<div id="LC144" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                <span class=pl-s1>self</span>.<span class=pl-c1>in_titleline</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC145" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&quot;tr&quot;</span> <span class=pl-c1>and</span> <span class=pl-s1>self</span>.<span class=pl-c1>in_subline</span>:</div>
<div id="LC146" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-s1>self</span>.<span class=pl-c1>in_subline</span> <span class=pl-c1>=</span> <span class=pl-c1>False</span></div>
<div id="LC147" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">            <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;title&quot;</span>) <span class=pl-c1>and</span> <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;item_id&quot;</span>):</div>
<div id="LC148" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                <span class=pl-s1>self</span>.<span class=pl-c1>articles</span>.<span class=pl-c1>append</span>(<span class=pl-en>Article</span>(</div>
<div id="LC149" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>rank</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;rank&quot;</span>, <span class=pl-c1>0</span>),</div>
<div id="LC150" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>title</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;title&quot;</span>, <span class=pl-s>&quot;&quot;</span>),</div>
<div id="LC151" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>url</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;url&quot;</span>, <span class=pl-s>&quot;&quot;</span>),</div>
<div id="LC152" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>hn_url</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;hn_url&quot;</span>, <span class=pl-s>&quot;&quot;</span>),</div>
<div id="LC153" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>points</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;points&quot;</span>, <span class=pl-c1>0</span>),</div>
<div id="LC154" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>author</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;author&quot;</span>, <span class=pl-s>&quot;&quot;</span>),</div>
<div id="LC155" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>comment_count</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;comment_count&quot;</span>, <span class=pl-c1>0</span>),</div>
<div id="LC156" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                    <span class=pl-s1>item_id</span><span class=pl-c1>=</span><span class=pl-s1>self</span>.<span class=pl-c1>current_article</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;item_id&quot;</span>, <span class=pl-s>&quot;&quot;</span>),</div>
<div id="LC157" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-71 child-of-line-135 ">                ))</div>
<div id="LC158" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">            <span class=pl-s1>self</span>.<span class=pl-c1>current_article</span> <span class=pl-c1>=</span> {}</div>
<div id="LC159" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC160" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC161" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>class</span> <span class=pl-v>ArticleTextParser</span>(<span class=pl-v>HTMLParser</span>):</div>
<div id="LC162" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">    <span class=pl-s>&quot;&quot;&quot;Extract main text content from article HTML.&quot;&quot;&quot;</span></div>
<div id="LC163" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">
</div>
<div id="LC164" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">    <span class=pl-k>def</span> <span class=pl-en>__init__</span>(<span class=pl-s1>self</span>):</div>
<div id="LC165" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-163 ">        <span class=pl-en>super</span>().<span class=pl-c1>__init__</span>()</div>
<div id="LC166" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-163 ">        <span class=pl-s1>self</span>.<span class=pl-c1>text_parts</span> <span class=pl-c1>=</span> []</div>
<div id="LC167" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-163 ">        <span class=pl-s1>self</span>.<span class=pl-c1>skip_tags</span> <span class=pl-c1>=</span> {<span class=pl-s>&#39;script&#39;</span>, <span class=pl-s>&#39;style&#39;</span>, <span class=pl-s>&#39;nav&#39;</span>, <span class=pl-s>&#39;header&#39;</span>, <span class=pl-s>&#39;footer&#39;</span>, <span class=pl-s>&#39;aside&#39;</span>, <span class=pl-s>&#39;noscript&#39;</span>, <span class=pl-s>&#39;iframe&#39;</span>}</div>
<div id="LC168" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">        <span class=pl-s1>self</span>.<span class=pl-c1>skip_depth</span> <span class=pl-c1>=</span> <span class=pl-c1>0</span></div>
<div id="LC169" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">
</div>
<div id="LC170" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">    <span class=pl-k>def</span> <span class=pl-en>handle_starttag</span>(<span class=pl-s1>self</span>, <span class=pl-s1>tag</span>, <span class=pl-s1>attrs</span>):</div>
<div id="LC171" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-169 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>in</span> <span class=pl-s1>self</span>.<span class=pl-c1>skip_tags</span>:</div>
<div id="LC172" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-169 ">            <span class=pl-s1>self</span>.<span class=pl-c1>skip_depth</span> <span class=pl-c1>+=</span> <span class=pl-c1>1</span></div>
<div id="LC173" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-169 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>==</span> <span class=pl-s>&#39;br&#39;</span>:</div>
<div id="LC174" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">            <span class=pl-s1>self</span>.<span class=pl-c1>text_parts</span>.<span class=pl-c1>append</span>(<span class=pl-s>&#39;<span class=pl-cce>\n</span>&#39;</span>)</div>
<div id="LC175" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">
</div>
<div id="LC176" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">    <span class=pl-k>def</span> <span class=pl-en>handle_endtag</span>(<span class=pl-s1>self</span>, <span class=pl-s1>tag</span>):</div>
<div id="LC177" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-175 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>in</span> <span class=pl-s1>self</span>.<span class=pl-c1>skip_tags</span> <span class=pl-c1>and</span> <span class=pl-s1>self</span>.<span class=pl-c1>skip_depth</span> <span class=pl-c1>&gt;</span> <span class=pl-c1>0</span>:</div>
<div id="LC178" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-175 ">            <span class=pl-s1>self</span>.<span class=pl-c1>skip_depth</span> <span class=pl-c1>-=</span> <span class=pl-c1>1</span></div>
<div id="LC179" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-175 ">        <span class=pl-k>if</span> <span class=pl-s1>tag</span> <span class=pl-c1>in</span> (<span class=pl-s>&#39;p&#39;</span>, <span class=pl-s>&#39;div&#39;</span>, <span class=pl-s>&#39;article&#39;</span>, <span class=pl-s>&#39;section&#39;</span>, <span class=pl-s>&#39;h1&#39;</span>, <span class=pl-s>&#39;h2&#39;</span>, <span class=pl-s>&#39;h3&#39;</span>, <span class=pl-s>&#39;h4&#39;</span>, <span class=pl-s>&#39;h5&#39;</span>, <span class=pl-s>&#39;h6&#39;</span>):</div>
<div id="LC180" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">            <span class=pl-s1>self</span>.<span class=pl-c1>text_parts</span>.<span class=pl-c1>append</span>(<span class=pl-s>&#39;<span class=pl-cce>\n</span><span class=pl-cce>\n</span>&#39;</span>)</div>
<div id="LC181" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">
</div>
<div id="LC182" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">    <span class=pl-k>def</span> <span class=pl-en>handle_data</span>(<span class=pl-s1>self</span>, <span class=pl-s1>data</span>):</div>
<div id="LC183" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-181 ">        <span class=pl-k>if</span> <span class=pl-s1>self</span>.<span class=pl-c1>skip_depth</span> <span class=pl-c1>&gt;</span> <span class=pl-c1>0</span>:</div>
<div id="LC184" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-181 ">            <span class=pl-k>return</span></div>
<div id="LC185" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-181 ">        <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>data</span>.<span class=pl-c1>strip</span>()</div>
<div id="LC186" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-181 ">        <span class=pl-k>if</span> <span class=pl-s1>text</span>:</div>
<div id="LC187" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">            <span class=pl-s1>self</span>.<span class=pl-c1>text_parts</span>.<span class=pl-c1>append</span>(<span class=pl-s1>text</span> <span class=pl-c1>+</span> <span class=pl-s>&#39; &#39;</span>)</div>
<div id="LC188" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">
</div>
<div id="LC189" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 ">    <span class=pl-k>def</span> <span class=pl-en>get_text</span>(<span class=pl-s1>self</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>str</span>:</div>
<div id="LC190" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-188 ">        <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;&#39;</span>.<span class=pl-c1>join</span>(<span class=pl-s1>self</span>.<span class=pl-c1>text_parts</span>)</div>
<div id="LC191" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-188 ">        <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;[ \t]+&#39;</span>, <span class=pl-s>&#39; &#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC192" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-188 ">        <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;\n{3,}&#39;</span>, <span class=pl-s>&#39;<span class=pl-cce>\n</span><span class=pl-cce>\n</span>&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC193" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-160 child-of-line-188 ">        <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39; +\n&#39;</span>, <span class=pl-s>&#39;<span class=pl-cce>\n</span>&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC194" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">        <span class=pl-k>return</span> <span class=pl-s1>text</span>.<span class=pl-c1>strip</span>()</div>
<div id="LC195" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC196" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC197" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC198" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># Fetching functions</span></div>
<div id="LC199" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC200" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC201" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>fetch_url</span>(<span class=pl-s1>url</span>: <span class=pl-smi>str</span>, <span class=pl-s1>retries</span>: <span class=pl-smi>int</span> <span class=pl-c1>=</span> <span class=pl-c1>5</span>, <span class=pl-s1>timeout</span>: <span class=pl-smi>int</span> <span class=pl-c1>=</span> <span class=pl-c1>15</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>str</span>:</div>
<div id="LC202" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">    <span class=pl-s>&quot;&quot;&quot;Fetch URL content with retry logic. Uses requests library to avoid TLS fingerprint blocking.&quot;&quot;&quot;</span></div>
<div id="LC203" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">    <span class=pl-s1>headers</span> <span class=pl-c1>=</span> {</div>
<div id="LC204" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">        <span class=pl-s>&quot;User-Agent&quot;</span>: <span class=pl-s>&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36&quot;</span>,</div>
<div id="LC205" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">        <span class=pl-s>&quot;Accept&quot;</span>: <span class=pl-s>&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&quot;</span>,</div>
<div id="LC206" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">        <span class=pl-s>&quot;Accept-Language&quot;</span>: <span class=pl-s>&quot;en-US,en;q=0.5&quot;</span>,</div>
<div id="LC207" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">    }</div>
<div id="LC208" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">    <span class=pl-k>for</span> <span class=pl-s1>attempt</span> <span class=pl-c1>in</span> <span class=pl-en>range</span>(<span class=pl-s1>retries</span>):</div>
<div id="LC209" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">        <span class=pl-k>try</span>:</div>
<div id="LC210" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">            <span class=pl-k>if</span> <span class=pl-s1>attempt</span> <span class=pl-c1>&gt;</span> <span class=pl-c1>0</span>:</div>
<div id="LC211" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">                <span class=pl-s1>wait_time</span> <span class=pl-c1>=</span> <span class=pl-c1>2</span> <span class=pl-c1>**</span> <span class=pl-s1>attempt</span>  <span class=pl-c># 2, 4, 8, 16 seconds</span></div>
<div id="LC212" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">                <span class=pl-en>print</span>(<span class=pl-s>f&quot;  Retry <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>attempt</span><span class=pl-kos>}</span></span>/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>retries</span><span class=pl-c1>-</span><span class=pl-c1>1</span><span class=pl-kos>}</span></span> after <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>wait_time</span><span class=pl-kos>}</span></span>s...&quot;</span>)</div>
<div id="LC213" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">                <span class=pl-s1>time</span>.<span class=pl-c1>sleep</span>(<span class=pl-s1>wait_time</span>)</div>
<div id="LC214" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">            <span class=pl-s1>response</span> <span class=pl-c1>=</span> <span class=pl-s1>requests</span>.<span class=pl-c1>get</span>(<span class=pl-s1>url</span>, <span class=pl-s1>headers</span><span class=pl-c1>=</span><span class=pl-s1>headers</span>, <span class=pl-s1>timeout</span><span class=pl-c1>=</span><span class=pl-s1>timeout</span>)</div>
<div id="LC215" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">            <span class=pl-s1>response</span>.<span class=pl-c1>raise_for_status</span>()</div>
<div id="LC216" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">            <span class=pl-k>return</span> <span class=pl-s1>response</span>.<span class=pl-c1>text</span></div>
<div id="LC217" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">        <span class=pl-k>except</span> <span class=pl-s1>requests</span>.<span class=pl-c1>exceptions</span>.<span class=pl-c1>HTTPError</span> <span class=pl-k>as</span> <span class=pl-s1>e</span>:</div>
<div id="LC218" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">            <span class=pl-k>if</span> <span class=pl-s1>e</span>.<span class=pl-c1>response</span>.<span class=pl-c1>status_code</span> <span class=pl-c1>==</span> <span class=pl-c1>403</span> <span class=pl-c1>and</span> <span class=pl-s1>attempt</span> <span class=pl-c1>&lt;</span> <span class=pl-s1>retries</span> <span class=pl-c1>-</span> <span class=pl-c1>1</span>:</div>
<div id="LC219" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">                <span class=pl-en>print</span>(<span class=pl-s>f&quot;  Got 403, will retry...&quot;</span>)</div>
<div id="LC220" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">                <span class=pl-k>continue</span></div>
<div id="LC221" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-200 ">            <span class=pl-k>raise</span></div>
<div id="LC222" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>raise</span> <span class=pl-en>Exception</span>(<span class=pl-s>f&quot;Failed to fetch <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>url</span><span class=pl-kos>}</span></span> after <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>retries</span><span class=pl-kos>}</span></span> retries&quot;</span>)</div>
<div id="LC223" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC224" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC225" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>fetch_frontpage</span>(<span class=pl-s1>day</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-s1>list</span>[<span class=pl-smi>Article</span>]:</div>
<div id="LC226" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-224 ">    <span class=pl-s>&quot;&quot;&quot;Fetch HN frontpage for a specific day (YYYY-MM-DD format).&quot;&quot;&quot;</span></div>
<div id="LC227" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-224 ">    <span class=pl-s1>url</span> <span class=pl-c1>=</span> <span class=pl-s>f&quot;https://news.ycombinator.com/front?day=<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>day</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC228" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-224 ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;Fetching frontpage: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>url</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC229" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-224 ">    <span class=pl-s1>page_html</span> <span class=pl-c1>=</span> <span class=pl-en>fetch_url</span>(<span class=pl-s1>url</span>)</div>
<div id="LC230" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-224 ">    <span class=pl-s1>parser</span> <span class=pl-c1>=</span> <span class=pl-en>HNFrontpageParser</span>()</div>
<div id="LC231" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-224 ">    <span class=pl-s1>parser</span>.<span class=pl-c1>feed</span>(<span class=pl-s1>page_html</span>)</div>
<div id="LC232" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s1>parser</span>.<span class=pl-c1>articles</span></div>
<div id="LC233" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC234" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC235" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>fetch_comments</span>(<span class=pl-s1>item_id</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-s1>list</span>[<span class=pl-smi>Comment</span>]:</div>
<div id="LC236" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">    <span class=pl-s>&quot;&quot;&quot;Fetch all comments for an HN item using Algolia API.&quot;&quot;&quot;</span></div>
<div id="LC237" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">    <span class=pl-s1>url</span> <span class=pl-c1>=</span> <span class=pl-s>f&quot;https://hn.algolia.com/api/v1/items/<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>item_id</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC238" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;  Fetching comments: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>item_id</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC239" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">    <span class=pl-s1>req</span> <span class=pl-c1>=</span> <span class=pl-s1>urllib</span>.<span class=pl-c1>request</span>.<span class=pl-c1>Request</span>(<span class=pl-s1>url</span>)</div>
<div id="LC240" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">    <span class=pl-k>with</span> <span class=pl-s1>urllib</span>.<span class=pl-c1>request</span>.<span class=pl-c1>urlopen</span>(<span class=pl-s1>req</span>, <span class=pl-s1>timeout</span><span class=pl-c1>=</span><span class=pl-c1>30</span>) <span class=pl-k>as</span> <span class=pl-s1>response</span>:</div>
<div id="LC241" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">        <span class=pl-s1>data</span> <span class=pl-c1>=</span> <span class=pl-s1>json</span>.<span class=pl-c1>loads</span>(<span class=pl-s1>response</span>.<span class=pl-c1>read</span>().<span class=pl-c1>decode</span>(<span class=pl-s>&quot;utf-8&quot;</span>))</div>
<div id="LC242" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">
</div>
<div id="LC243" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">    <span class=pl-k>def</span> <span class=pl-en>parse_children</span>(<span class=pl-s1>children</span>) <span class=pl-c1>-&gt;</span> <span class=pl-s1>list</span>[<span class=pl-smi>Comment</span>]:</div>
<div id="LC244" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">        <span class=pl-s1>comments</span> <span class=pl-c1>=</span> []</div>
<div id="LC245" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">        <span class=pl-k>for</span> <span class=pl-s1>child</span> <span class=pl-c1>in</span> <span class=pl-s1>children</span>:</div>
<div id="LC246" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">            <span class=pl-k>if</span> <span class=pl-s1>child</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;type&quot;</span>) <span class=pl-c1>!=</span> <span class=pl-s>&quot;comment&quot;</span> <span class=pl-c1>or</span> <span class=pl-s1>child</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;text&quot;</span>) <span class=pl-c1>is</span> <span class=pl-c1>None</span>:</div>
<div id="LC247" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">                <span class=pl-k>continue</span></div>
<div id="LC248" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">            <span class=pl-s1>comment</span> <span class=pl-c1>=</span> <span class=pl-en>Comment</span>(</div>
<div id="LC249" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">                <span class=pl-s1>id</span><span class=pl-c1>=</span><span class=pl-en>str</span>(<span class=pl-s1>child</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;id&quot;</span>, <span class=pl-s>&quot;&quot;</span>)),</div>
<div id="LC250" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">                <span class=pl-s1>author</span><span class=pl-c1>=</span><span class=pl-s1>child</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;author&quot;</span>) <span class=pl-c1>or</span> <span class=pl-s>&quot;[deleted]&quot;</span>,</div>
<div id="LC251" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">                <span class=pl-s1>text</span><span class=pl-c1>=</span><span class=pl-en>clean_html_to_text</span>(<span class=pl-s1>child</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;text&quot;</span>, <span class=pl-s>&quot;&quot;</span>)),</div>
<div id="LC252" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">                <span class=pl-s1>children</span><span class=pl-c1>=</span><span class=pl-en>parse_children</span>(<span class=pl-s1>child</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;children&quot;</span>, [])),</div>
<div id="LC253" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">            )</div>
<div id="LC254" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 child-of-line-242 ">            <span class=pl-s1>comments</span>.<span class=pl-c1>append</span>(<span class=pl-s1>comment</span>)</div>
<div id="LC255" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">        <span class=pl-k>return</span> <span class=pl-s1>comments</span></div>
<div id="LC256" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-234 ">
</div>
<div id="LC257" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-en>parse_children</span>(<span class=pl-s1>data</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;children&quot;</span>, []))</div>
<div id="LC258" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC259" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC260" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c1>MAX_ARTICLE_CHARS</span> <span class=pl-c1>=</span> <span class=pl-c1>15000</span></div>
<div id="LC261" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC262" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC263" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>fetch_article_content</span>(<span class=pl-s1>url</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-s1>tuple</span>[<span class=pl-smi>str</span>, <span class=pl-s1>str</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span>]:</div>
<div id="LC264" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-s>&quot;&quot;&quot;Fetch and extract text from article URL. Returns (text, error).&quot;&quot;&quot;</span></div>
<div id="LC265" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>url</span>.<span class=pl-c1>startswith</span>((<span class=pl-s>&#39;http://&#39;</span>, <span class=pl-s>&#39;https://&#39;</span>)):</div>
<div id="LC266" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>&quot;Not a web URL&quot;</span></div>
<div id="LC267" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-k>if</span> <span class=pl-en>any</span>(<span class=pl-s1>x</span> <span class=pl-c1>in</span> <span class=pl-s1>url</span> <span class=pl-k>for</span> <span class=pl-s1>x</span> <span class=pl-c1>in</span> [<span class=pl-s>&#39;.pdf&#39;</span>, <span class=pl-s>&#39;youtube.com&#39;</span>, <span class=pl-s>&#39;youtu.be&#39;</span>, <span class=pl-s>&#39;twitter.com&#39;</span>, <span class=pl-s>&#39;x.com&#39;</span>]):</div>
<div id="LC268" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>f&quot;Skipped URL type&quot;</span></div>
<div id="LC269" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">
</div>
<div id="LC270" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;  Fetching article: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>url</span>[:<span class=pl-c1>60</span>]<span class=pl-kos>}</span></span>...&quot;</span>)</div>
<div id="LC271" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-k>try</span>:</div>
<div id="LC272" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-s1>headers</span> <span class=pl-c1>=</span> {</div>
<div id="LC273" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-s>&quot;User-Agent&quot;</span>: <span class=pl-s>&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36&quot;</span>,</div>
<div id="LC274" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-s>&quot;Accept&quot;</span>: <span class=pl-s>&quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;</span>,</div>
<div id="LC275" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        }</div>
<div id="LC276" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-s1>req</span> <span class=pl-c1>=</span> <span class=pl-s1>urllib</span>.<span class=pl-c1>request</span>.<span class=pl-c1>Request</span>(<span class=pl-s1>url</span>, <span class=pl-s1>headers</span><span class=pl-c1>=</span><span class=pl-s1>headers</span>)</div>
<div id="LC277" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>with</span> <span class=pl-s1>urllib</span>.<span class=pl-c1>request</span>.<span class=pl-c1>urlopen</span>(<span class=pl-s1>req</span>, <span class=pl-s1>timeout</span><span class=pl-c1>=</span><span class=pl-c1>15</span>) <span class=pl-k>as</span> <span class=pl-s1>response</span>:</div>
<div id="LC278" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-s1>content_type</span> <span class=pl-c1>=</span> <span class=pl-s1>response</span>.<span class=pl-c1>headers</span>.<span class=pl-c1>get</span>(<span class=pl-s>&#39;Content-Type&#39;</span>, <span class=pl-s>&#39;&#39;</span>)</div>
<div id="LC279" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-k>if</span> <span class=pl-s>&#39;text/html&#39;</span> <span class=pl-c1><span class=pl-c1>not</span> <span class=pl-c1>in</span></span> <span class=pl-s1>content_type</span> <span class=pl-c1>and</span> <span class=pl-s>&#39;application/xhtml&#39;</span> <span class=pl-c1><span class=pl-c1>not</span> <span class=pl-c1>in</span></span> <span class=pl-s1>content_type</span>:</div>
<div id="LC280" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">                <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>f&quot;Not HTML: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>content_type</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC281" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-s1>data</span> <span class=pl-c1>=</span> <span class=pl-s1>response</span>.<span class=pl-c1>read</span>(<span class=pl-c1>5</span> <span class=pl-c1>*</span> <span class=pl-c1>1024</span> <span class=pl-c1>*</span> <span class=pl-c1>1024</span>)</div>
<div id="LC282" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-k>try</span>:</div>
<div id="LC283" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">                <span class=pl-s1>page_html</span> <span class=pl-c1>=</span> <span class=pl-s1>data</span>.<span class=pl-c1>decode</span>(<span class=pl-s>&#39;utf-8&#39;</span>)</div>
<div id="LC284" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-k>except</span> <span class=pl-v>UnicodeDecodeError</span>:</div>
<div id="LC285" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">                <span class=pl-s1>page_html</span> <span class=pl-c1>=</span> <span class=pl-s1>data</span>.<span class=pl-c1>decode</span>(<span class=pl-s>&#39;latin-1&#39;</span>, <span class=pl-s1>errors</span><span class=pl-c1>=</span><span class=pl-s>&#39;replace&#39;</span>)</div>
<div id="LC286" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">
</div>
<div id="LC287" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-s1>page_html</span> <span class=pl-c1>=</span> <span class=pl-s1>html</span>.<span class=pl-c1>unescape</span>(<span class=pl-s1>page_html</span>)</div>
<div id="LC288" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-s1>parser</span> <span class=pl-c1>=</span> <span class=pl-en>ArticleTextParser</span>()</div>
<div id="LC289" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-s1>parser</span>.<span class=pl-c1>feed</span>(<span class=pl-s1>page_html</span>)</div>
<div id="LC290" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>parser</span>.<span class=pl-c1>get_text</span>()</div>
<div id="LC291" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">
</div>
<div id="LC292" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>if</span> <span class=pl-en>len</span>(<span class=pl-s1>text</span>) <span class=pl-c1>&lt;</span> <span class=pl-c1>100</span>:</div>
<div id="LC293" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>&quot;Article too short or failed to extract&quot;</span></div>
<div id="LC294" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">
</div>
<div id="LC295" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>if</span> <span class=pl-en>len</span>(<span class=pl-s1>text</span>) <span class=pl-c1>&gt;</span> <span class=pl-c1>MAX_ARTICLE_CHARS</span>:</div>
<div id="LC296" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-s1>truncate_at</span> <span class=pl-c1>=</span> <span class=pl-s1>text</span>.<span class=pl-c1>rfind</span>(<span class=pl-s>&#39;. &#39;</span>, <span class=pl-c1>MAX_ARTICLE_CHARS</span> <span class=pl-c1>-</span> <span class=pl-c1>500</span>, <span class=pl-c1>MAX_ARTICLE_CHARS</span>)</div>
<div id="LC297" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-k>if</span> <span class=pl-s1>truncate_at</span> <span class=pl-c1>==</span> <span class=pl-c1>-</span><span class=pl-c1>1</span>:</div>
<div id="LC298" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">                <span class=pl-s1>truncate_at</span> <span class=pl-c1>=</span> <span class=pl-c1>MAX_ARTICLE_CHARS</span></div>
<div id="LC299" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">            <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>text</span>[:<span class=pl-s1>truncate_at</span> <span class=pl-c1>+</span> <span class=pl-c1>1</span>] <span class=pl-c1>+</span> <span class=pl-s>&quot;<span class=pl-cce>\n</span><span class=pl-cce>\n</span>[TRUNCATED]&quot;</span></div>
<div id="LC300" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">
</div>
<div id="LC301" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>return</span> <span class=pl-s1>text</span>, <span class=pl-c1>None</span></div>
<div id="LC302" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">
</div>
<div id="LC303" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-k>except</span> <span class=pl-s1>urllib</span>.<span class=pl-c1>error</span>.<span class=pl-c1>HTTPError</span> <span class=pl-k>as</span> <span class=pl-s1>e</span>:</div>
<div id="LC304" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>f&quot;HTTP <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>e</span>.<span class=pl-c1>code</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC305" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-k>except</span> <span class=pl-s1>urllib</span>.<span class=pl-c1>error</span>.<span class=pl-c1>URLError</span> <span class=pl-k>as</span> <span class=pl-s1>e</span>:</div>
<div id="LC306" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">        <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>f&quot;URL error: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>e</span>.<span class=pl-c1>reason</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC307" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-262 ">    <span class=pl-k>except</span> <span class=pl-v>Exception</span> <span class=pl-k>as</span> <span class=pl-s1>e</span>:</div>
<div id="LC308" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">        <span class=pl-k>return</span> <span class=pl-s>&quot;&quot;</span>, <span class=pl-s>f&quot;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-en>type</span>(<span class=pl-s1>e</span>).<span class=pl-c1>__name__</span><span class=pl-kos>}</span></span>: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>e</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC309" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC310" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC311" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>clean_html_to_text</span>(<span class=pl-s1>text</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>str</span>:</div>
<div id="LC312" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s>&quot;&quot;&quot;Convert HN comment HTML to clean text.&quot;&quot;&quot;</span></div>
<div id="LC313" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>html</span>.<span class=pl-c1>unescape</span>(<span class=pl-s1>text</span>)</div>
<div id="LC314" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;&lt;a href=&quot;([^&quot;]+)&quot;[^&gt;]*&gt;([^&lt;]+)&lt;/a&gt;&#39;</span>, <span class=pl-s>r&#39;[\2](\1)&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC315" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;&lt;i&gt;([^&lt;]+)&lt;/i&gt;&#39;</span>, <span class=pl-s>r&#39;*\1*&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC316" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;&lt;b&gt;([^&lt;]+)&lt;/b&gt;&#39;</span>, <span class=pl-s>r&#39;**\1**&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC317" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;&lt;code&gt;([^&lt;]+)&lt;/code&gt;&#39;</span>, <span class=pl-s>r&#39;`\1`&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC318" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>text</span>.<span class=pl-c1>replace</span>(<span class=pl-s>&quot;&lt;p&gt;&quot;</span>, <span class=pl-s>&quot;<span class=pl-cce>\n</span><span class=pl-cce>\n</span>&quot;</span>).<span class=pl-c1>replace</span>(<span class=pl-s>&quot;&lt;/p&gt;&quot;</span>, <span class=pl-s>&quot;&quot;</span>)</div>
<div id="LC319" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;&lt;[^&gt;]+&gt;&#39;</span>, <span class=pl-s>&#39;&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC320" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-310 ">    <span class=pl-s1>text</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>sub</span>(<span class=pl-s>r&#39;\n{3,}&#39;</span>, <span class=pl-s>&#39;<span class=pl-cce>\n</span><span class=pl-cce>\n</span>&#39;</span>, <span class=pl-s1>text</span>)</div>
<div id="LC321" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s1>text</span>.<span class=pl-c1>strip</span>()</div>
<div id="LC322" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC323" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC324" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC325" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># Prompt generation</span></div>
<div id="LC326" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC327" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC328" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c1>PROMPT_TEMPLATE</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;&quot;&quot;The following is an article that appeared on Hacker News 10 years ago, and the discussion thread.</span></div>
<div id="LC329" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC330" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>Let&#39;s use our benefit of hindsight now in 6 sections:</span></div>
<div id="LC331" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC332" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>1. Give a brief summary of the article and the discussion thread.</span></div>
<div id="LC333" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>2. What ended up happening to this topic? (research the topic briefly and write a summary)</span></div>
<div id="LC334" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>3. Give out awards for &quot;Most prescient&quot; and &quot;Most wrong&quot; comments, considering what happened.</span></div>
<div id="LC335" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>4. Mention any other fun or notable aspects of the article or discussion.</span></div>
<div id="LC336" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>5. Give out grades to specific people for their comments, considering what happened.</span></div>
<div id="LC337" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>6. At the end, give a final score (from 0-10) for how interesting this article and its retrospect analysis was.</span></div>
<div id="LC338" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC339" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>As for the format of Section 5, use the header &quot;Final grades&quot; and follow it with simply an unordered list of people and their grades in the format of &quot;name: grade (optional comment)&quot;. Here is an example:</span></div>
<div id="LC340" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC341" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>Final grades</span></div>
<div id="LC342" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>- speckx: A+ (excellent predictions on ...)</span></div>
<div id="LC343" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>- tosh: A (correctly predicted this or that ...)</span></div>
<div id="LC344" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>- keepamovin: A</span></div>
<div id="LC345" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>- bgwalter: D</span></div>
<div id="LC346" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>- fsflover: F (completely wrong on ...)</span></div>
<div id="LC347" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC348" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>Your list may contain more people of course than just this toy example. Please follow the format exactly because I will be parsing it programmatically. The idea is that I will accumulate the grades for each account to identify the accounts that were over long periods of time the most prescient or the most wrong.</span></div>
<div id="LC349" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC350" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>As for the format of Section 6, use the prefix &quot;Article hindsight analysis interestingness score:&quot; and then the score (0-10) as a number. Give high scores to articles/discussions that are prominent, notable, or interesting in retrospect. Give low scores in cases where few predictions are made, or the topic is very niche or obscure, or the discussion is not very interesting in retrospect.</span></div>
<div id="LC351" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC352" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>Here is an example:</span></div>
<div id="LC353" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>Article hindsight analysis interestingness score: 8</span></div>
<div id="LC354" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC355" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s>---</span></div>
<div id="LC356" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-327 "><span class=pl-s></span></div>
<div id="LC357" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-s>&quot;&quot;&quot;</span></div>
<div id="LC358" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC359" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC360" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>comments_to_markdown</span>(<span class=pl-s1>comments</span>: <span class=pl-s1>list</span>[<span class=pl-smi>Comment</span>], <span class=pl-s1>indent</span>: <span class=pl-smi>int</span> <span class=pl-c1>=</span> <span class=pl-c1>0</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>str</span>:</div>
<div id="LC361" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">    <span class=pl-s>&quot;&quot;&quot;Convert comment tree to markdown format.&quot;&quot;&quot;</span></div>
<div id="LC362" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">    <span class=pl-s1>lines</span> <span class=pl-c1>=</span> []</div>
<div id="LC363" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">    <span class=pl-k>for</span> <span class=pl-s1>comment</span> <span class=pl-c1>in</span> <span class=pl-s1>comments</span>:</div>
<div id="LC364" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">        <span class=pl-s1>prefix</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;  &quot;</span> <span class=pl-c1>*</span> <span class=pl-s1>indent</span></div>
<div id="LC365" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">        <span class=pl-s1>lines</span>.<span class=pl-c1>append</span>(<span class=pl-s>f&quot;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>prefix</span><span class=pl-kos>}</span></span>- **<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>comment</span>.<span class=pl-c1>author</span><span class=pl-kos>}</span></span>**: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>comment</span>.<span class=pl-c1>text</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC366" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">        <span class=pl-k>if</span> <span class=pl-s1>comment</span>.<span class=pl-c1>children</span>:</div>
<div id="LC367" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-359 ">            <span class=pl-s1>lines</span>.<span class=pl-c1>append</span>(<span class=pl-en>comments_to_markdown</span>(<span class=pl-s1>comment</span>.<span class=pl-c1>children</span>, <span class=pl-s1>indent</span> <span class=pl-c1>+</span> <span class=pl-c1>1</span>))</div>
<div id="LC368" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s>&quot;<span class=pl-cce>\n</span><span class=pl-cce>\n</span>&quot;</span>.<span class=pl-c1>join</span>(<span class=pl-s1>lines</span>)</div>
<div id="LC369" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC370" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC371" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>generate_prompt</span>(<span class=pl-s1>article</span>: <span class=pl-smi>Article</span>, <span class=pl-s1>article_text</span>: <span class=pl-smi>str</span>, <span class=pl-s1>article_error</span>: <span class=pl-s1>str</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span>,</div>
<div id="LC372" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">                    <span class=pl-s1>comments</span>: <span class=pl-s1>list</span>[<span class=pl-smi>Comment</span>]) <span class=pl-c1>-&gt;</span> <span class=pl-smi>str</span>:</div>
<div id="LC373" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    <span class=pl-s>&quot;&quot;&quot;Generate full LLM prompt for an article.&quot;&quot;&quot;</span></div>
<div id="LC374" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    <span class=pl-s1>lines</span> <span class=pl-c1>=</span> [</div>
<div id="LC375" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-c1>PROMPT_TEMPLATE</span>,</div>
<div id="LC376" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>f&quot;# <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>title</span><span class=pl-kos>}</span></span>&quot;</span>,</div>
<div id="LC377" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;&quot;</span>,</div>
<div id="LC378" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;## Article Info&quot;</span>,</div>
<div id="LC379" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;&quot;</span>,</div>
<div id="LC380" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>f&quot;- **Original URL**: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>url</span><span class=pl-kos>}</span></span>&quot;</span>,</div>
<div id="LC381" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>f&quot;- **HN Discussion**: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>hn_url</span><span class=pl-kos>}</span></span>&quot;</span>,</div>
<div id="LC382" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>f&quot;- **Points**: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>points</span><span class=pl-kos>}</span></span>&quot;</span>,</div>
<div id="LC383" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>f&quot;- **Submitted by**: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>author</span><span class=pl-kos>}</span></span>&quot;</span>,</div>
<div id="LC384" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>f&quot;- **Comments**: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>comment_count</span><span class=pl-kos>}</span></span>&quot;</span>,</div>
<div id="LC385" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;&quot;</span>,</div>
<div id="LC386" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;## Article Content&quot;</span>,</div>
<div id="LC387" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;&quot;</span>,</div>
<div id="LC388" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    ]</div>
<div id="LC389" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">
</div>
<div id="LC390" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    <span class=pl-k>if</span> <span class=pl-s1>article_error</span>:</div>
<div id="LC391" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s1>lines</span>.<span class=pl-c1>append</span>(<span class=pl-s>f&quot;*Could not fetch article: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article_error</span><span class=pl-kos>}</span></span>*&quot;</span>)</div>
<div id="LC392" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    <span class=pl-k>else</span>:</div>
<div id="LC393" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s1>lines</span>.<span class=pl-c1>append</span>(<span class=pl-s1>article_text</span>)</div>
<div id="LC394" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">
</div>
<div id="LC395" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    <span class=pl-s1>lines</span>.<span class=pl-c1>extend</span>([</div>
<div id="LC396" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;&quot;</span>,</div>
<div id="LC397" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;## HN Discussion&quot;</span>,</div>
<div id="LC398" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-s>&quot;&quot;</span>,</div>
<div id="LC399" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">        <span class=pl-en>comments_to_markdown</span>(<span class=pl-s1>comments</span>),</div>
<div id="LC400" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">    ])</div>
<div id="LC401" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-370 ">
</div>
<div id="LC402" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s>&quot;<span class=pl-cce>\n</span>&quot;</span>.<span class=pl-c1>join</span>(<span class=pl-s1>lines</span>)</div>
<div id="LC403" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC404" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC405" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC406" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># Grade parsing</span></div>
<div id="LC407" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC408" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC409" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>parse_grades</span>(<span class=pl-s1>text</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-s1>dict</span>[<span class=pl-smi>str</span>, <span class=pl-smi>dict</span>]:</div>
<div id="LC410" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-s>&quot;&quot;&quot;Parse the Final grades section from LLM output.</span></div>
<div id="LC411" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 "><span class=pl-s></span></div>
<div id="LC412" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 "><span class=pl-s>    Returns dict of username -&gt; {&quot;grade&quot;: &quot;A&quot;, &quot;rationale&quot;: &quot;explanation...&quot;}</span></div>
<div id="LC413" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 "><span class=pl-s>    &quot;&quot;&quot;</span></div>
<div id="LC414" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-s1>grades</span> <span class=pl-c1>=</span> {}</div>
<div id="LC415" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-c># Match &quot;Final grades&quot; with optional leading section number, #, or other prefixes</span></div>
<div id="LC416" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-s1>pattern</span> <span class=pl-c1>=</span> <span class=pl-s>r&#39;(?:^|\n)(?:\d+[\.\)]\s*)?(?:#+ *)?Final grades\s*\n&#39;</span></div>
<div id="LC417" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-s1>match</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>search</span>(<span class=pl-s1>pattern</span>, <span class=pl-s1>text</span>, <span class=pl-s1>re</span>.<span class=pl-c1>IGNORECASE</span>)</div>
<div id="LC418" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>match</span>:</div>
<div id="LC419" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">        <span class=pl-k>return</span> <span class=pl-s1>grades</span></div>
<div id="LC420" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">
</div>
<div id="LC421" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-s1>grades_section</span> <span class=pl-c1>=</span> <span class=pl-s1>text</span>[<span class=pl-s1>match</span>.<span class=pl-c1>end</span>():]</div>
<div id="LC422" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-c># Pattern: - username: GRADE (rationale text)</span></div>
<div id="LC423" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-c># Also handle: - username (qualifier): GRADE (rationale)</span></div>
<div id="LC424" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-c># Note: handle both ASCII +/- and Unicode minus (−)</span></div>
<div id="LC425" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-s1>line_pattern</span> <span class=pl-c1>=</span> <span class=pl-s>r&#39;^[\-\*]\s*([^:]+):\s*([A-F][+\-−]?)(?:\s*\(([^)]+)\))?&#39;</span></div>
<div id="LC426" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">
</div>
<div id="LC427" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">    <span class=pl-k>for</span> <span class=pl-s1>line</span> <span class=pl-c1>in</span> <span class=pl-s1>grades_section</span>.<span class=pl-c1>split</span>(<span class=pl-s>&#39;<span class=pl-cce>\n</span>&#39;</span>):</div>
<div id="LC428" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">        <span class=pl-s1>line</span> <span class=pl-c1>=</span> <span class=pl-s1>line</span>.<span class=pl-c1>strip</span>()</div>
<div id="LC429" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>line</span>:</div>
<div id="LC430" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">            <span class=pl-k>continue</span></div>
<div id="LC431" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">        <span class=pl-k>if</span> <span class=pl-s1>line</span>.<span class=pl-c1>startswith</span>(<span class=pl-s>&#39;#&#39;</span>) <span class=pl-c1>or</span> <span class=pl-s1>line</span>.<span class=pl-c1>startswith</span>(<span class=pl-s>&#39;[&#39;</span>):</div>
<div id="LC432" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">            <span class=pl-k>break</span></div>
<div id="LC433" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">        <span class=pl-s1>m</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>match</span>(<span class=pl-s1>line_pattern</span>, <span class=pl-s1>line</span>)</div>
<div id="LC434" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">        <span class=pl-k>if</span> <span class=pl-s1>m</span>:</div>
<div id="LC435" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">            <span class=pl-s1>username</span> <span class=pl-c1>=</span> <span class=pl-s1>m</span>.<span class=pl-c1>group</span>(<span class=pl-c1>1</span>).<span class=pl-c1>strip</span>()</div>
<div id="LC436" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">            <span class=pl-s1>grade</span> <span class=pl-c1>=</span> <span class=pl-s1>m</span>.<span class=pl-c1>group</span>(<span class=pl-c1>2</span>).<span class=pl-c1>strip</span>()</div>
<div id="LC437" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">            <span class=pl-s1>rationale</span> <span class=pl-c1>=</span> <span class=pl-s1>m</span>.<span class=pl-c1>group</span>(<span class=pl-c1>3</span>).<span class=pl-c1>strip</span>() <span class=pl-k>if</span> <span class=pl-s1>m</span>.<span class=pl-c1>group</span>(<span class=pl-c1>3</span>) <span class=pl-k>else</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC438" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">            <span class=pl-s1>grades</span>[<span class=pl-s1>username</span>] <span class=pl-c1>=</span> {<span class=pl-s>&quot;grade&quot;</span>: <span class=pl-s1>grade</span>, <span class=pl-s>&quot;rationale&quot;</span>: <span class=pl-s1>rationale</span>}</div>
<div id="LC439" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-408 ">
</div>
<div id="LC440" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s1>grades</span></div>
<div id="LC441" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC442" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC443" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>grade_to_numeric</span>(<span class=pl-s1>grade</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>float</span>:</div>
<div id="LC444" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">    <span class=pl-s>&quot;&quot;&quot;Convert letter grade to GPA.&quot;&quot;&quot;</span></div>
<div id="LC445" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">    <span class=pl-s1>base</span> <span class=pl-c1>=</span> {<span class=pl-s>&#39;A&#39;</span>: <span class=pl-c1>4.0</span>, <span class=pl-s>&#39;B&#39;</span>: <span class=pl-c1>3.0</span>, <span class=pl-s>&#39;C&#39;</span>: <span class=pl-c1>2.0</span>, <span class=pl-s>&#39;D&#39;</span>: <span class=pl-c1>1.0</span>, <span class=pl-s>&#39;F&#39;</span>: <span class=pl-c1>0.0</span>}</div>
<div id="LC446" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>grade</span>:</div>
<div id="LC447" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">        <span class=pl-k>return</span> <span class=pl-c1>0.0</span></div>
<div id="LC448" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">    <span class=pl-s1>value</span> <span class=pl-c1>=</span> <span class=pl-s1>base</span>.<span class=pl-c1>get</span>(<span class=pl-s1>grade</span>[<span class=pl-c1>0</span>].<span class=pl-c1>upper</span>(), <span class=pl-c1>0.0</span>)</div>
<div id="LC449" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">    <span class=pl-k>if</span> <span class=pl-en>len</span>(<span class=pl-s1>grade</span>) <span class=pl-c1>&gt;</span> <span class=pl-c1>1</span>:</div>
<div id="LC450" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">        <span class=pl-k>if</span> <span class=pl-s1>grade</span>[<span class=pl-c1>1</span>] <span class=pl-c1>==</span> <span class=pl-s>&#39;+&#39;</span>:</div>
<div id="LC451" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">            <span class=pl-s1>value</span> <span class=pl-c1>+=</span> <span class=pl-c1>0.3</span></div>
<div id="LC452" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">        <span class=pl-k>elif</span> <span class=pl-s1>grade</span>[<span class=pl-c1>1</span>] <span class=pl-c1>in</span> <span class=pl-s>&#39;-−&#39;</span>:  <span class=pl-c># ASCII minus and Unicode minus</span></div>
<div id="LC453" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-442 ">            <span class=pl-s1>value</span> <span class=pl-c1>-=</span> <span class=pl-c1>0.3</span></div>
<div id="LC454" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s1>value</span></div>
<div id="LC455" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC456" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC457" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>parse_interestingness_score</span>(<span class=pl-s1>text</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-s1>int</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span>:</div>
<div id="LC458" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-456 ">    <span class=pl-s>&quot;&quot;&quot;Parse the interestingness score (0-10) from LLM output.&quot;&quot;&quot;</span></div>
<div id="LC459" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-456 ">    <span class=pl-s1>pattern</span> <span class=pl-c1>=</span> <span class=pl-s>r&#39;Article hindsight analysis interestingness score:\s*(\d+)&#39;</span></div>
<div id="LC460" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-456 ">    <span class=pl-s1>match</span> <span class=pl-c1>=</span> <span class=pl-s1>re</span>.<span class=pl-c1>search</span>(<span class=pl-s1>pattern</span>, <span class=pl-s1>text</span>, <span class=pl-s1>re</span>.<span class=pl-c1>IGNORECASE</span>)</div>
<div id="LC461" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-456 ">    <span class=pl-k>if</span> <span class=pl-s1>match</span>:</div>
<div id="LC462" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-456 ">        <span class=pl-s1>score</span> <span class=pl-c1>=</span> <span class=pl-en>int</span>(<span class=pl-s1>match</span>.<span class=pl-c1>group</span>(<span class=pl-c1>1</span>))</div>
<div id="LC463" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-456 ">        <span class=pl-k>return</span> <span class=pl-en>max</span>(<span class=pl-c1>0</span>, <span class=pl-en>min</span>(<span class=pl-c1>10</span>, <span class=pl-s1>score</span>))  <span class=pl-c># Clamp to 0-10</span></div>
<div id="LC464" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-c1>None</span></div>
<div id="LC465" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC466" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC467" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC468" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># Pipeline stages</span></div>
<div id="LC469" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-c># -----------------------------------------------------------------------------</span></div>
<div id="LC470" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC471" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>Path</span>:</div>
<div id="LC472" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-s>&quot;&quot;&quot;Get the data directory for a given date.&quot;&quot;&quot;</span></div>
<div id="LC473" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-en>Path</span>(<span class=pl-s>&quot;data&quot;</span>) <span class=pl-c1>/</span> <span class=pl-s1>target_date</span></div>
<div id="LC474" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC475" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC476" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>get_output_dir</span>(<span class=pl-s1>target_date</span>: <span class=pl-s1>str</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span> <span class=pl-c1>=</span> <span class=pl-c1>None</span>) <span class=pl-c1>-&gt;</span> <span class=pl-smi>Path</span>:</div>
<div id="LC477" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-475 ">    <span class=pl-s>&quot;&quot;&quot;Get the output directory, optionally for a specific date.&quot;&quot;&quot;</span></div>
<div id="LC478" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-475 ">    <span class=pl-s1>base</span> <span class=pl-c1>=</span> <span class=pl-en>Path</span>(<span class=pl-s>&quot;output&quot;</span>)</div>
<div id="LC479" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-475 ">    <span class=pl-k>if</span> <span class=pl-s1>target_date</span>:</div>
<div id="LC480" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-475 ">        <span class=pl-k>return</span> <span class=pl-s1>base</span> <span class=pl-c1>/</span> <span class=pl-s1>target_date</span></div>
<div id="LC481" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-s1>base</span></div>
<div id="LC482" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC483" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC484" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>stage_fetch</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>, <span class=pl-s1>limit</span>: <span class=pl-s1>int</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span> <span class=pl-c1>=</span> <span class=pl-c1>None</span>):</div>
<div id="LC485" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-s>&quot;&quot;&quot;Stage 1: Fetch frontpage and all article data.&quot;&quot;&quot;</span></div>
<div id="LC486" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-s1>data_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC487" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-s1>data_dir</span>.<span class=pl-c1>mkdir</span>(<span class=pl-s1>parents</span><span class=pl-c1>=</span><span class=pl-c1>True</span>, <span class=pl-s1>exist_ok</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</div>
<div id="LC488" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC489" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-s1>frontpage_file</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;frontpage.json&quot;</span></div>
<div id="LC490" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC491" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-c># Fetch frontpage if not cached</span></div>
<div id="LC492" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-k>if</span> <span class=pl-s1>frontpage_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC493" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-en>print</span>(<span class=pl-s>f&quot;Loading cached frontpage from <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>frontpage_file</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC494" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>frontpage_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC495" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-s1>articles</span> <span class=pl-c1>=</span> [<span class=pl-en>Article</span>(<span class=pl-c1>**</span><span class=pl-s1>a</span>) <span class=pl-k>for</span> <span class=pl-s1>a</span> <span class=pl-c1>in</span> <span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>)]</div>
<div id="LC496" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-k>else</span>:</div>
<div id="LC497" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>articles</span> <span class=pl-c1>=</span> <span class=pl-en>fetch_frontpage</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC498" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>frontpage_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC499" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-s1>json</span>.<span class=pl-c1>dump</span>([<span class=pl-en>asdict</span>(<span class=pl-s1>a</span>) <span class=pl-k>for</span> <span class=pl-s1>a</span> <span class=pl-c1>in</span> <span class=pl-s1>articles</span>], <span class=pl-s1>f</span>, <span class=pl-s1>indent</span><span class=pl-c1>=</span><span class=pl-c1>2</span>)</div>
<div id="LC500" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-en>print</span>(<span class=pl-s>f&quot;Saved frontpage to <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>frontpage_file</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC501" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC502" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-k>if</span> <span class=pl-s1>limit</span>:</div>
<div id="LC503" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>articles</span> <span class=pl-c1>=</span> <span class=pl-s1>articles</span>[:<span class=pl-s1>limit</span>]</div>
<div id="LC504" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC505" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;<span class=pl-cce>\n</span>Fetching data for <span class=pl-s1><span class=pl-kos>{</span><span class=pl-en>len</span>(<span class=pl-s1>articles</span>)<span class=pl-kos>}</span></span> articles...&quot;</span>)</div>
<div id="LC506" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC507" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">    <span class=pl-k>for</span> <span class=pl-s1>article</span> <span class=pl-c1>in</span> <span class=pl-s1>articles</span>:</div>
<div id="LC508" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>article_dir</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s1>article</span>.<span class=pl-c1>item_id</span></div>
<div id="LC509" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>article_dir</span>.<span class=pl-c1>mkdir</span>(<span class=pl-s1>exist_ok</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</div>
<div id="LC510" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC511" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-c># Save article metadata</span></div>
<div id="LC512" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>meta_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;meta.json&quot;</span></div>
<div id="LC513" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>meta_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC514" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>meta_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC515" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">                <span class=pl-s1>json</span>.<span class=pl-c1>dump</span>(<span class=pl-en>asdict</span>(<span class=pl-s1>article</span>), <span class=pl-s1>f</span>, <span class=pl-s1>indent</span><span class=pl-c1>=</span><span class=pl-c1>2</span>)</div>
<div id="LC516" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC517" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-c># Fetch article content</span></div>
<div id="LC518" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>article_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;article.txt&quot;</span></div>
<div id="LC519" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>error_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;article_error.txt&quot;</span></div>
<div id="LC520" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>article_file</span>.<span class=pl-c1>exists</span>() <span class=pl-c1>and</span> <span class=pl-c1>not</span> <span class=pl-s1>error_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC521" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-s1>text</span>, <span class=pl-s1>error</span> <span class=pl-c1>=</span> <span class=pl-en>fetch_article_content</span>(<span class=pl-s1>article</span>.<span class=pl-c1>url</span>)</div>
<div id="LC522" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-k>if</span> <span class=pl-s1>error</span>:</div>
<div id="LC523" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">                <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>error_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC524" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">                    <span class=pl-s1>f</span>.<span class=pl-c1>write</span>(<span class=pl-s1>error</span>)</div>
<div id="LC525" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-k>else</span>:</div>
<div id="LC526" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">                <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>article_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC527" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">                    <span class=pl-s1>f</span>.<span class=pl-c1>write</span>(<span class=pl-s1>text</span>)</div>
<div id="LC528" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-s1>time</span>.<span class=pl-c1>sleep</span>(<span class=pl-c1>0.5</span>)  <span class=pl-c># Be nice</span></div>
<div id="LC529" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC530" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-c># Fetch comments</span></div>
<div id="LC531" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-s1>comments_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;comments.json&quot;</span></div>
<div id="LC532" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>comments_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC533" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-s1>comments</span> <span class=pl-c1>=</span> <span class=pl-en>fetch_comments</span>(<span class=pl-s1>article</span>.<span class=pl-c1>item_id</span>)</div>
<div id="LC534" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>comments_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC535" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">                <span class=pl-s1>json</span>.<span class=pl-c1>dump</span>([<span class=pl-s1>c</span>.<span class=pl-c1>to_dict</span>() <span class=pl-k>for</span> <span class=pl-s1>c</span> <span class=pl-c1>in</span> <span class=pl-s1>comments</span>], <span class=pl-s1>f</span>, <span class=pl-s1>indent</span><span class=pl-c1>=</span><span class=pl-c1>2</span>)</div>
<div id="LC536" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">            <span class=pl-s1>time</span>.<span class=pl-c1>sleep</span>(<span class=pl-c1>0.2</span>)  <span class=pl-c># Be nice</span></div>
<div id="LC537" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-483 ">
</div>
<div id="LC538" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;<span class=pl-cce>\n</span>Fetch complete. Data saved to <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>data_dir</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC539" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC540" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC541" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>stage_prompt</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>):</div>
<div id="LC542" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">    <span class=pl-s>&quot;&quot;&quot;Stage 2: Generate prompts for all articles.&quot;&quot;&quot;</span></div>
<div id="LC543" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">    <span class=pl-s1>data_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC544" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC545" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">    <span class=pl-k>for</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>in</span> <span class=pl-en>sorted</span>(<span class=pl-s1>data_dir</span>.<span class=pl-c1>iterdir</span>()):</div>
<div id="LC546" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>article_dir</span>.<span class=pl-c1>is_dir</span>():</div>
<div id="LC547" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-k>continue</span></div>
<div id="LC548" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC549" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-s1>prompt_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;prompt.md&quot;</span></div>
<div id="LC550" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>if</span> <span class=pl-s1>prompt_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC551" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-k>continue</span></div>
<div id="LC552" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC553" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-s1>meta_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;meta.json&quot;</span></div>
<div id="LC554" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>meta_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC555" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-k>continue</span></div>
<div id="LC556" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC557" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>meta_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC558" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article</span> <span class=pl-c1>=</span> <span class=pl-en>Article</span>(<span class=pl-c1>**</span><span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>))</div>
<div id="LC559" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC560" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-c># Load article content</span></div>
<div id="LC561" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-s1>article_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;article.txt&quot;</span></div>
<div id="LC562" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-s1>error_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;article_error.txt&quot;</span></div>
<div id="LC563" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>if</span> <span class=pl-s1>article_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC564" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article_text</span> <span class=pl-c1>=</span> <span class=pl-s1>article_file</span>.<span class=pl-c1>read_text</span>()</div>
<div id="LC565" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article_error</span> <span class=pl-c1>=</span> <span class=pl-c1>None</span></div>
<div id="LC566" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>elif</span> <span class=pl-s1>error_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC567" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article_text</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC568" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article_error</span> <span class=pl-c1>=</span> <span class=pl-s1>error_file</span>.<span class=pl-c1>read_text</span>()</div>
<div id="LC569" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>else</span>:</div>
<div id="LC570" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article_text</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC571" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>article_error</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;Not fetched&quot;</span></div>
<div id="LC572" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC573" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-c># Load comments</span></div>
<div id="LC574" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-s1>comments_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;comments.json&quot;</span></div>
<div id="LC575" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>if</span> <span class=pl-s1>comments_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC576" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>comments_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC577" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">                <span class=pl-s1>comments</span> <span class=pl-c1>=</span> [<span class=pl-v>Comment</span>.<span class=pl-c1>from_dict</span>(<span class=pl-s1>c</span>) <span class=pl-k>for</span> <span class=pl-s1>c</span> <span class=pl-c1>in</span> <span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>)]</div>
<div id="LC578" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>else</span>:</div>
<div id="LC579" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>comments</span> <span class=pl-c1>=</span> []</div>
<div id="LC580" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC581" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-c># Generate prompt</span></div>
<div id="LC582" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-s1>prompt</span> <span class=pl-c1>=</span> <span class=pl-en>generate_prompt</span>(<span class=pl-s1>article</span>, <span class=pl-s1>article_text</span>, <span class=pl-s1>article_error</span>, <span class=pl-s1>comments</span>)</div>
<div id="LC583" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>prompt_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC584" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">            <span class=pl-s1>f</span>.<span class=pl-c1>write</span>(<span class=pl-s1>prompt</span>)</div>
<div id="LC585" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC586" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">        <span class=pl-en>print</span>(<span class=pl-s>f&quot;Generated prompt for <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>item_id</span><span class=pl-kos>}</span></span>: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>title</span>[:<span class=pl-c1>50</span>]<span class=pl-kos>}</span></span>...&quot;</span>)</div>
<div id="LC587" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-540 ">
</div>
<div id="LC588" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;<span class=pl-cce>\n</span>Prompts generated in <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>data_dir</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC589" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC590" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC591" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>stage_analyze</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>, <span class=pl-s1>model</span>: <span class=pl-smi>str</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;gpt-5.1&quot;</span>, <span class=pl-s1>max_workers</span>: <span class=pl-smi>int</span> <span class=pl-c1>=</span> <span class=pl-c1>5</span>):</div>
<div id="LC592" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-s>&quot;&quot;&quot;Stage 3: Run LLM analysis on all prompts.&quot;&quot;&quot;</span></div>
<div id="LC593" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>from</span> <span class=pl-s1>concurrent</span>.<span class=pl-s1>futures</span> <span class=pl-k>import</span> <span class=pl-v>ThreadPoolExecutor</span>, <span class=pl-s1>as_completed</span></div>
<div id="LC594" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>from</span> <span class=pl-s1>dotenv</span> <span class=pl-k>import</span> <span class=pl-s1>load_dotenv</span></div>
<div id="LC595" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>from</span> <span class=pl-s1>openai</span> <span class=pl-k>import</span> <span class=pl-v>OpenAI</span></div>
<div id="LC596" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC597" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-en>load_dotenv</span>()</div>
<div id="LC598" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-s1>client</span> <span class=pl-c1>=</span> <span class=pl-en>OpenAI</span>()</div>
<div id="LC599" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-s1>data_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC600" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC601" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-c># Collect articles to analyze</span></div>
<div id="LC602" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-s1>to_analyze</span> <span class=pl-c1>=</span> []</div>
<div id="LC603" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>for</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>in</span> <span class=pl-en>sorted</span>(<span class=pl-s1>data_dir</span>.<span class=pl-c1>iterdir</span>()):</div>
<div id="LC604" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>article_dir</span>.<span class=pl-c1>is_dir</span>():</div>
<div id="LC605" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-k>continue</span></div>
<div id="LC606" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC607" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-s1>prompt_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;prompt.md&quot;</span></div>
<div id="LC608" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-s1>response_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;response.md&quot;</span></div>
<div id="LC609" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC610" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>prompt_file</span>.<span class=pl-c1>exists</span>() <span class=pl-c1>or</span> <span class=pl-s1>response_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC611" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-k>continue</span></div>
<div id="LC612" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC613" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-s1>meta_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;meta.json&quot;</span></div>
<div id="LC614" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>meta_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC615" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-s1>article</span> <span class=pl-c1>=</span> <span class=pl-en>Article</span>(<span class=pl-c1>**</span><span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>))</div>
<div id="LC616" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC617" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-s1>to_analyze</span>.<span class=pl-c1>append</span>((<span class=pl-s1>article_dir</span>, <span class=pl-s1>article</span>, <span class=pl-s1>prompt_file</span>.<span class=pl-c1>read_text</span>()))</div>
<div id="LC618" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC619" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>to_analyze</span>:</div>
<div id="LC620" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-en>print</span>(<span class=pl-s>&quot;No articles to analyze.&quot;</span>)</div>
<div id="LC621" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-k>return</span></div>
<div id="LC622" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC623" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;Analyzing <span class=pl-s1><span class=pl-kos>{</span><span class=pl-en>len</span>(<span class=pl-s1>to_analyze</span>)<span class=pl-kos>}</span></span> articles with <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>max_workers</span><span class=pl-kos>}</span></span> workers...&quot;</span>)</div>
<div id="LC624" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC625" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>def</span> <span class=pl-en>analyze_one</span>(<span class=pl-s1>item</span>):</div>
<div id="LC626" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">        <span class=pl-s1>article_dir</span>, <span class=pl-s1>article</span>, <span class=pl-s1>prompt</span> <span class=pl-c1>=</span> <span class=pl-s1>item</span></div>
<div id="LC627" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">        <span class=pl-s1>response_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;response.md&quot;</span></div>
<div id="LC628" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">        <span class=pl-k>try</span>:</div>
<div id="LC629" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">            <span class=pl-s1>response</span> <span class=pl-c1>=</span> <span class=pl-s1>client</span>.<span class=pl-c1>responses</span>.<span class=pl-c1>create</span>(</div>
<div id="LC630" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">                <span class=pl-s1>model</span><span class=pl-c1>=</span><span class=pl-s1>model</span>,</div>
<div id="LC631" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">                <span class=pl-s1>input</span><span class=pl-c1>=</span><span class=pl-s1>prompt</span>,</div>
<div id="LC632" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">                <span class=pl-s1>reasoning</span><span class=pl-c1>=</span>{<span class=pl-s>&quot;effort&quot;</span>: <span class=pl-s>&quot;medium&quot;</span>},</div>
<div id="LC633" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">                <span class=pl-s1>text</span><span class=pl-c1>=</span>{<span class=pl-s>&quot;verbosity&quot;</span>: <span class=pl-s>&quot;medium&quot;</span>},</div>
<div id="LC634" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">            )</div>
<div id="LC635" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">            <span class=pl-s1>result</span> <span class=pl-c1>=</span> <span class=pl-s1>response</span>.<span class=pl-c1>output_text</span></div>
<div id="LC636" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">            <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>response_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC637" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">                <span class=pl-s1>f</span>.<span class=pl-c1>write</span>(<span class=pl-s1>result</span>)</div>
<div id="LC638" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">            <span class=pl-k>return</span> (<span class=pl-s1>article</span>.<span class=pl-c1>item_id</span>, <span class=pl-s1>article</span>.<span class=pl-c1>title</span>[:<span class=pl-c1>50</span>], <span class=pl-en>len</span>(<span class=pl-s1>result</span>), <span class=pl-c1>None</span>)</div>
<div id="LC639" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 child-of-line-624 ">        <span class=pl-k>except</span> <span class=pl-v>Exception</span> <span class=pl-k>as</span> <span class=pl-s1>e</span>:</div>
<div id="LC640" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-k>return</span> (<span class=pl-s1>article</span>.<span class=pl-c1>item_id</span>, <span class=pl-s1>article</span>.<span class=pl-c1>title</span>[:<span class=pl-c1>50</span>], <span class=pl-c1>0</span>, <span class=pl-en>str</span>(<span class=pl-s1>e</span>))</div>
<div id="LC641" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC642" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">    <span class=pl-k>with</span> <span class=pl-en>ThreadPoolExecutor</span>(<span class=pl-s1>max_workers</span><span class=pl-c1>=</span><span class=pl-s1>max_workers</span>) <span class=pl-k>as</span> <span class=pl-s1>executor</span>:</div>
<div id="LC643" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-s1>futures</span> <span class=pl-c1>=</span> {<span class=pl-s1>executor</span>.<span class=pl-c1>submit</span>(<span class=pl-s1>analyze_one</span>, <span class=pl-s1>item</span>): <span class=pl-s1>item</span> <span class=pl-k>for</span> <span class=pl-s1>item</span> <span class=pl-c1>in</span> <span class=pl-s1>to_analyze</span>}</div>
<div id="LC644" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">        <span class=pl-k>for</span> <span class=pl-s1>future</span> <span class=pl-c1>in</span> <span class=pl-en>as_completed</span>(<span class=pl-s1>futures</span>):</div>
<div id="LC645" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-s1>item_id</span>, <span class=pl-s1>title</span>, <span class=pl-s1>chars</span>, <span class=pl-s1>error</span> <span class=pl-c1>=</span> <span class=pl-s1>future</span>.<span class=pl-c1>result</span>()</div>
<div id="LC646" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-k>if</span> <span class=pl-s1>error</span>:</div>
<div id="LC647" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">                <span class=pl-en>print</span>(<span class=pl-s>f&quot;  <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>item_id</span><span class=pl-kos>}</span></span>: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>title</span><span class=pl-kos>}</span></span>... Error: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>error</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC648" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">            <span class=pl-k>else</span>:</div>
<div id="LC649" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">                <span class=pl-en>print</span>(<span class=pl-s>f&quot;  <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>item_id</span><span class=pl-kos>}</span></span>: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>title</span><span class=pl-kos>}</span></span>... Done (<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>chars</span><span class=pl-kos>}</span></span> chars)&quot;</span>)</div>
<div id="LC650" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-590 ">
</div>
<div id="LC651" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;<span class=pl-cce>\n</span>Analysis complete. Results in <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>data_dir</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC652" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC653" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC654" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>stage_parse</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>):</div>
<div id="LC655" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-s>&quot;&quot;&quot;Stage 4: Parse grades from all responses.&quot;&quot;&quot;</span></div>
<div id="LC656" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-s1>data_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC657" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-s1>all_grades</span> <span class=pl-c1>=</span> {}  <span class=pl-c># username -&gt; list of {grade, rationale, article}</span></div>
<div id="LC658" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC659" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-k>for</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>in</span> <span class=pl-en>sorted</span>(<span class=pl-s1>data_dir</span>.<span class=pl-c1>iterdir</span>()):</div>
<div id="LC660" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>article_dir</span>.<span class=pl-c1>is_dir</span>():</div>
<div id="LC661" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-k>continue</span></div>
<div id="LC662" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC663" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>response_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;response.md&quot;</span></div>
<div id="LC664" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>grades_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;grades.json&quot;</span></div>
<div id="LC665" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>score_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;score.json&quot;</span></div>
<div id="LC666" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC667" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>response_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC668" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-k>continue</span></div>
<div id="LC669" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC670" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>response</span> <span class=pl-c1>=</span> <span class=pl-s1>response_file</span>.<span class=pl-c1>read_text</span>()</div>
<div id="LC671" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>grades</span> <span class=pl-c1>=</span> <span class=pl-en>parse_grades</span>(<span class=pl-s1>response</span>)  <span class=pl-c># Now returns {username: {grade, rationale}}</span></div>
<div id="LC672" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>score</span> <span class=pl-c1>=</span> <span class=pl-en>parse_interestingness_score</span>(<span class=pl-s1>response</span>)</div>
<div id="LC673" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC674" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>grades_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC675" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-s1>json</span>.<span class=pl-c1>dump</span>(<span class=pl-s1>grades</span>, <span class=pl-s1>f</span>, <span class=pl-s1>indent</span><span class=pl-c1>=</span><span class=pl-c1>2</span>)</div>
<div id="LC676" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC677" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>score_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC678" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-s1>json</span>.<span class=pl-c1>dump</span>({<span class=pl-s>&quot;interestingness&quot;</span>: <span class=pl-s1>score</span>}, <span class=pl-s1>f</span>, <span class=pl-s1>indent</span><span class=pl-c1>=</span><span class=pl-c1>2</span>)</div>
<div id="LC679" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC680" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>item_id</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span>.<span class=pl-c1>name</span></div>
<div id="LC681" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>for</span> <span class=pl-s1>username</span>, <span class=pl-s1>grade_info</span> <span class=pl-c1>in</span> <span class=pl-s1>grades</span>.<span class=pl-c1>items</span>():</div>
<div id="LC682" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-k>if</span> <span class=pl-s1>username</span> <span class=pl-c1><span class=pl-c1>not</span> <span class=pl-c1>in</span></span> <span class=pl-s1>all_grades</span>:</div>
<div id="LC683" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">                <span class=pl-s1>all_grades</span>[<span class=pl-s1>username</span>] <span class=pl-c1>=</span> []</div>
<div id="LC684" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-s1>all_grades</span>[<span class=pl-s1>username</span>].<span class=pl-c1>append</span>({</div>
<div id="LC685" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">                <span class=pl-s>&quot;grade&quot;</span>: <span class=pl-s1>grade_info</span>[<span class=pl-s>&quot;grade&quot;</span>],</div>
<div id="LC686" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">                <span class=pl-s>&quot;rationale&quot;</span>: <span class=pl-s1>grade_info</span>[<span class=pl-s>&quot;rationale&quot;</span>],</div>
<div id="LC687" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">                <span class=pl-s>&quot;article&quot;</span>: <span class=pl-s1>item_id</span></div>
<div id="LC688" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            })</div>
<div id="LC689" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC690" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>score_str</span> <span class=pl-c1>=</span> <span class=pl-s>f&quot;, score=<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>score</span><span class=pl-kos>}</span></span>&quot;</span> <span class=pl-k>if</span> <span class=pl-s1>score</span> <span class=pl-c1><span class=pl-c1>is</span> <span class=pl-c1>not</span></span> <span class=pl-c1>None</span> <span class=pl-k>else</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC691" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-en>print</span>(<span class=pl-s>f&quot;Parsed <span class=pl-s1><span class=pl-kos>{</span><span class=pl-en>len</span>(<span class=pl-s1>grades</span>)<span class=pl-kos>}</span></span> grades from <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>item_id</span><span class=pl-kos>}</span></span><span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>score_str</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC692" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC693" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-c># Save aggregated grades</span></div>
<div id="LC694" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-s1>agg_file</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;all_grades.json&quot;</span></div>
<div id="LC695" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>agg_file</span>, <span class=pl-s>&#39;w&#39;</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC696" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>json</span>.<span class=pl-c1>dump</span>(<span class=pl-s1>all_grades</span>, <span class=pl-s1>f</span>, <span class=pl-s1>indent</span><span class=pl-c1>=</span><span class=pl-c1>2</span>)</div>
<div id="LC697" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC698" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;<span class=pl-cce>\n</span>Parsed grades saved to <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>agg_file</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC699" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC700" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-c># Print summary</span></div>
<div id="LC701" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">    <span class=pl-k>if</span> <span class=pl-s1>all_grades</span>:</div>
<div id="LC702" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-en>print</span>(<span class=pl-s>&quot;<span class=pl-cce>\n</span>--- Grade Summary ---&quot;</span>)</div>
<div id="LC703" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>user_gpas</span> <span class=pl-c1>=</span> []</div>
<div id="LC704" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>for</span> <span class=pl-s1>username</span>, <span class=pl-s1>grades_list</span> <span class=pl-c1>in</span> <span class=pl-s1>all_grades</span>.<span class=pl-c1>items</span>():</div>
<div id="LC705" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-s1>gpas</span> <span class=pl-c1>=</span> [<span class=pl-en>grade_to_numeric</span>(<span class=pl-s1>g</span>[<span class=pl-s>&quot;grade&quot;</span>]) <span class=pl-k>for</span> <span class=pl-s1>g</span> <span class=pl-c1>in</span> <span class=pl-s1>grades_list</span>]</div>
<div id="LC706" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-s1>avg_gpa</span> <span class=pl-c1>=</span> <span class=pl-en>sum</span>(<span class=pl-s1>gpas</span>) <span class=pl-c1>/</span> <span class=pl-en>len</span>(<span class=pl-s1>gpas</span>)</div>
<div id="LC707" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">            <span class=pl-s1>user_gpas</span>.<span class=pl-c1>append</span>((<span class=pl-s1>username</span>, <span class=pl-s1>avg_gpa</span>, <span class=pl-en>len</span>(<span class=pl-s1>grades_list</span>)))</div>
<div id="LC708" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">
</div>
<div id="LC709" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-s1>user_gpas</span>.<span class=pl-c1>sort</span>(<span class=pl-s1>key</span><span class=pl-c1>=</span><span class=pl-k>lambda</span> <span class=pl-s1>x</span>: <span class=pl-s1>x</span>[<span class=pl-c1>1</span>], <span class=pl-s1>reverse</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</div>
<div id="LC710" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-653 ">        <span class=pl-k>for</span> <span class=pl-s1>username</span>, <span class=pl-s1>gpa</span>, <span class=pl-s1>count</span> <span class=pl-c1>in</span> <span class=pl-s1>user_gpas</span>[:<span class=pl-c1>10</span>]:</div>
<div id="LC711" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">            <span class=pl-en>print</span>(<span class=pl-s>f&quot;  <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>username</span><span class=pl-kos>}</span></span>: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>gpa</span>:.2f<span class=pl-kos>}</span></span> (<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>count</span><span class=pl-kos>}</span></span> articles)&quot;</span>)</div>
<div id="LC712" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC713" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC714" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>stage_clean</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>, <span class=pl-s1>stage</span>: <span class=pl-s1>str</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span> <span class=pl-c1>=</span> <span class=pl-c1>None</span>, <span class=pl-s1>article_id</span>: <span class=pl-s1>str</span> <span class=pl-c1>|</span> <span class=pl-c1>None</span> <span class=pl-c1>=</span> <span class=pl-c1>None</span>):</div>
<div id="LC715" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s>&quot;&quot;&quot;Clean cached data for a date, optionally filtered by stage or article.&quot;&quot;&quot;</span></div>
<div id="LC716" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>data_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC717" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC718" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>data_dir</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC719" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-en>print</span>(<span class=pl-s>f&quot;No data directory for <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>target_date</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC720" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>return</span></div>
<div id="LC721" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC722" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-c># Define what files each stage produces</span></div>
<div id="LC723" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>stage_files</span> <span class=pl-c1>=</span> {</div>
<div id="LC724" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s>&quot;fetch&quot;</span>: [<span class=pl-s>&quot;meta.json&quot;</span>, <span class=pl-s>&quot;article.txt&quot;</span>, <span class=pl-s>&quot;article_error.txt&quot;</span>, <span class=pl-s>&quot;comments.json&quot;</span>],</div>
<div id="LC725" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s>&quot;prompt&quot;</span>: [<span class=pl-s>&quot;prompt.md&quot;</span>],</div>
<div id="LC726" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s>&quot;analyze&quot;</span>: [<span class=pl-s>&quot;response.md&quot;</span>],</div>
<div id="LC727" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s>&quot;parse&quot;</span>: [<span class=pl-s>&quot;grades.json&quot;</span>, <span class=pl-s>&quot;score.json&quot;</span>],</div>
<div id="LC728" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    }</div>
<div id="LC729" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC730" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-c># Stages and their downstream dependencies</span></div>
<div id="LC731" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>stage_order</span> <span class=pl-c1>=</span> [<span class=pl-s>&quot;fetch&quot;</span>, <span class=pl-s>&quot;prompt&quot;</span>, <span class=pl-s>&quot;analyze&quot;</span>, <span class=pl-s>&quot;parse&quot;</span>, <span class=pl-s>&quot;render&quot;</span>]</div>
<div id="LC732" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC733" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-c># Determine which stages to clean</span></div>
<div id="LC734" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>if</span> <span class=pl-s1>stage</span>:</div>
<div id="LC735" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>if</span> <span class=pl-s1>stage</span> <span class=pl-c1><span class=pl-c1>not</span> <span class=pl-c1>in</span></span> <span class=pl-s1>stage_order</span>:</div>
<div id="LC736" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-en>print</span>(<span class=pl-s>f&quot;Unknown stage: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>stage</span><span class=pl-kos>}</span></span>&quot;</span>)</div>
<div id="LC737" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-k>return</span></div>
<div id="LC738" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-c># Clean this stage and all downstream stages</span></div>
<div id="LC739" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>stage_idx</span> <span class=pl-c1>=</span> <span class=pl-s1>stage_order</span>.<span class=pl-c1>index</span>(<span class=pl-s1>stage</span>)</div>
<div id="LC740" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>stages_to_clean</span> <span class=pl-c1>=</span> <span class=pl-s1>stage_order</span>[<span class=pl-s1>stage_idx</span>:<span class=pl-c1>-</span><span class=pl-c1>1</span>]  <span class=pl-c># exclude render (it&#39;s just summary.html)</span></div>
<div id="LC741" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>else</span>:</div>
<div id="LC742" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>stages_to_clean</span> <span class=pl-c1>=</span> <span class=pl-s1>stage_order</span>[:<span class=pl-c1>-</span><span class=pl-c1>1</span>]  <span class=pl-c># all except render</span></div>
<div id="LC743" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC744" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>files_to_delete</span> <span class=pl-c1>=</span> <span class=pl-en>set</span>()</div>
<div id="LC745" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>for</span> <span class=pl-s1>s</span> <span class=pl-c1>in</span> <span class=pl-s1>stages_to_clean</span>:</div>
<div id="LC746" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>files_to_delete</span>.<span class=pl-c1>update</span>(<span class=pl-s1>stage_files</span>.<span class=pl-c1>get</span>(<span class=pl-s1>s</span>, []))</div>
<div id="LC747" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC748" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-c># Get article directories to clean</span></div>
<div id="LC749" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>if</span> <span class=pl-s1>article_id</span>:</div>
<div id="LC750" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>article_dirs</span> <span class=pl-c1>=</span> [<span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s1>article_id</span>]</div>
<div id="LC751" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>article_dirs</span>[<span class=pl-c1>0</span>].<span class=pl-c1>exists</span>():</div>
<div id="LC752" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-en>print</span>(<span class=pl-s>f&quot;Article <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article_id</span><span class=pl-kos>}</span></span> not found&quot;</span>)</div>
<div id="LC753" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-k>return</span></div>
<div id="LC754" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>else</span>:</div>
<div id="LC755" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>article_dirs</span> <span class=pl-c1>=</span> [<span class=pl-s1>d</span> <span class=pl-k>for</span> <span class=pl-s1>d</span> <span class=pl-c1>in</span> <span class=pl-s1>data_dir</span>.<span class=pl-c1>iterdir</span>() <span class=pl-k>if</span> <span class=pl-s1>d</span>.<span class=pl-c1>is_dir</span>()]</div>
<div id="LC756" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC757" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-c># Clean files</span></div>
<div id="LC758" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>deleted_count</span> <span class=pl-c1>=</span> <span class=pl-c1>0</span></div>
<div id="LC759" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>for</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>in</span> <span class=pl-s1>article_dirs</span>:</div>
<div id="LC760" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>for</span> <span class=pl-s1>filename</span> <span class=pl-c1>in</span> <span class=pl-s1>files_to_delete</span>:</div>
<div id="LC761" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-s1>filepath</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s1>filename</span></div>
<div id="LC762" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-k>if</span> <span class=pl-s1>filepath</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC763" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>filepath</span>.<span class=pl-c1>unlink</span>()</div>
<div id="LC764" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>deleted_count</span> <span class=pl-c1>+=</span> <span class=pl-c1>1</span></div>
<div id="LC765" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC766" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-c># If cleaning fetch, remove the entire article directory if empty</span></div>
<div id="LC767" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>if</span> <span class=pl-s>&quot;fetch&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>stages_to_clean</span>:</div>
<div id="LC768" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-k>if</span> <span class=pl-s1>article_dir</span>.<span class=pl-c1>exists</span>() <span class=pl-c1>and</span> <span class=pl-c1>not</span> <span class=pl-en>any</span>(<span class=pl-s1>article_dir</span>.<span class=pl-c1>iterdir</span>()):</div>
<div id="LC769" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>article_dir</span>.<span class=pl-c1>rmdir</span>()</div>
<div id="LC770" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC771" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-c># Clean top-level files</span></div>
<div id="LC772" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>article_id</span>:</div>
<div id="LC773" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>if</span> <span class=pl-s>&quot;fetch&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>stages_to_clean</span>:</div>
<div id="LC774" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-s1>frontpage</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;frontpage.json&quot;</span></div>
<div id="LC775" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-k>if</span> <span class=pl-s1>frontpage</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC776" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>frontpage</span>.<span class=pl-c1>unlink</span>()</div>
<div id="LC777" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>deleted_count</span> <span class=pl-c1>+=</span> <span class=pl-c1>1</span></div>
<div id="LC778" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC779" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>if</span> <span class=pl-s>&quot;parse&quot;</span> <span class=pl-c1>in</span> <span class=pl-s1>stages_to_clean</span>:</div>
<div id="LC780" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-s1>all_grades</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;all_grades.json&quot;</span></div>
<div id="LC781" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-k>if</span> <span class=pl-s1>all_grades</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC782" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>all_grades</span>.<span class=pl-c1>unlink</span>()</div>
<div id="LC783" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">                <span class=pl-s1>deleted_count</span> <span class=pl-c1>+=</span> <span class=pl-c1>1</span></div>
<div id="LC784" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC785" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-c># Always clean summary.html if cleaning any stage</span></div>
<div id="LC786" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-s1>summary</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;summary.html&quot;</span></div>
<div id="LC787" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">        <span class=pl-k>if</span> <span class=pl-s1>summary</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC788" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-s1>summary</span>.<span class=pl-c1>unlink</span>()</div>
<div id="LC789" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">            <span class=pl-s1>deleted_count</span> <span class=pl-c1>+=</span> <span class=pl-c1>1</span></div>
<div id="LC790" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">
</div>
<div id="LC791" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>stage_desc</span> <span class=pl-c1>=</span> <span class=pl-s>f&quot;stage &#39;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>stage</span><span class=pl-kos>}</span></span>&#39; and downstream&quot;</span> <span class=pl-k>if</span> <span class=pl-s1>stage</span> <span class=pl-k>else</span> <span class=pl-s>&quot;all stages&quot;</span></div>
<div id="LC792" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-713 ">    <span class=pl-s1>article_desc</span> <span class=pl-c1>=</span> <span class=pl-s>f&quot; for article <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article_id</span><span class=pl-kos>}</span></span>&quot;</span> <span class=pl-k>if</span> <span class=pl-s1>article_id</span> <span class=pl-k>else</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC793" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-en>print</span>(<span class=pl-s>f&quot;Cleaned <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>stage_desc</span><span class=pl-kos>}</span></span><span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article_desc</span><span class=pl-kos>}</span></span>: <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>deleted_count</span><span class=pl-kos>}</span></span> files deleted&quot;</span>)</div>
<div id="LC794" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC795" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC796" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>get_all_output_dates</span>() <span class=pl-c1>-&gt;</span> <span class=pl-s1>list</span>[<span class=pl-smi>str</span>]:</div>
<div id="LC797" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">    <span class=pl-s>&quot;&quot;&quot;Get all dates that have been rendered to output directory.&quot;&quot;&quot;</span></div>
<div id="LC798" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">    <span class=pl-s1>output_base</span> <span class=pl-c1>=</span> <span class=pl-en>get_output_dir</span>()</div>
<div id="LC799" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">    <span class=pl-k>if</span> <span class=pl-c1>not</span> <span class=pl-s1>output_base</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC800" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">        <span class=pl-k>return</span> []</div>
<div id="LC801" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">    <span class=pl-s1>dates</span> <span class=pl-c1>=</span> []</div>
<div id="LC802" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">    <span class=pl-k>for</span> <span class=pl-s1>d</span> <span class=pl-c1>in</span> <span class=pl-s1>output_base</span>.<span class=pl-c1>iterdir</span>():</div>
<div id="LC803" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">        <span class=pl-k>if</span> <span class=pl-s1>d</span>.<span class=pl-c1>is_dir</span>() <span class=pl-c1>and</span> (<span class=pl-s1>d</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;index.html&quot;</span>).<span class=pl-c1>exists</span>():</div>
<div id="LC804" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-795 ">            <span class=pl-s1>dates</span>.<span class=pl-c1>append</span>(<span class=pl-s1>d</span>.<span class=pl-c1>name</span>)</div>
<div id="LC805" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">    <span class=pl-k>return</span> <span class=pl-en>sorted</span>(<span class=pl-s1>dates</span>)</div>
<div id="LC806" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC807" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div ">
</div>
<div id="LC808" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div "><span class=pl-k>def</span> <span class=pl-en>stage_render</span>(<span class=pl-s1>target_date</span>: <span class=pl-smi>str</span>, <span class=pl-s1>update_index</span>: <span class=pl-smi>bool</span> <span class=pl-c1>=</span> <span class=pl-c1>True</span>):</div>
<div id="LC809" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s>&quot;&quot;&quot;Stage 5: Render HTML summary to output directory.&quot;&quot;&quot;</span></div>
<div id="LC810" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>data_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_data_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC811" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>output_dir</span> <span class=pl-c1>=</span> <span class=pl-en>get_output_dir</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC812" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>output_dir</span>.<span class=pl-c1>mkdir</span>(<span class=pl-s1>parents</span><span class=pl-c1>=</span><span class=pl-c1>True</span>, <span class=pl-s1>exist_ok</span><span class=pl-c1>=</span><span class=pl-c1>True</span>)</div>
<div id="LC813" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC814" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-c># Load frontpage</span></div>
<div id="LC815" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>frontpage_file</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;frontpage.json&quot;</span></div>
<div id="LC816" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>frontpage_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC817" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>articles</span> <span class=pl-c1>=</span> [<span class=pl-en>Article</span>(<span class=pl-c1>**</span><span class=pl-s1>a</span>) <span class=pl-k>for</span> <span class=pl-s1>a</span> <span class=pl-c1>in</span> <span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>)]</div>
<div id="LC818" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC819" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-c># Collect all article data</span></div>
<div id="LC820" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>articles_data</span> <span class=pl-c1>=</span> []</div>
<div id="LC821" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-k>for</span> <span class=pl-s1>article</span> <span class=pl-c1>in</span> <span class=pl-s1>articles</span>:</div>
<div id="LC822" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>article_dir</span> <span class=pl-c1>=</span> <span class=pl-s1>data_dir</span> <span class=pl-c1>/</span> <span class=pl-s1>article</span>.<span class=pl-c1>item_id</span></div>
<div id="LC823" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC824" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-c># Load response if available</span></div>
<div id="LC825" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>response_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;response.md&quot;</span></div>
<div id="LC826" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>response</span> <span class=pl-c1>=</span> <span class=pl-s1>response_file</span>.<span class=pl-c1>read_text</span>() <span class=pl-k>if</span> <span class=pl-s1>response_file</span>.<span class=pl-c1>exists</span>() <span class=pl-k>else</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC827" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC828" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-c># Load prompt if available</span></div>
<div id="LC829" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>prompt_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;prompt.md&quot;</span></div>
<div id="LC830" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>prompt</span> <span class=pl-c1>=</span> <span class=pl-s1>prompt_file</span>.<span class=pl-c1>read_text</span>() <span class=pl-k>if</span> <span class=pl-s1>prompt_file</span>.<span class=pl-c1>exists</span>() <span class=pl-k>else</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC831" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC832" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-c># Load interestingness score if available</span></div>
<div id="LC833" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>score_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;score.json&quot;</span></div>
<div id="LC834" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>score</span> <span class=pl-c1>=</span> <span class=pl-c1>None</span></div>
<div id="LC835" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-k>if</span> <span class=pl-s1>score_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC836" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>score_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC837" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">                <span class=pl-s1>score_data</span> <span class=pl-c1>=</span> <span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>)</div>
<div id="LC838" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">                <span class=pl-s1>score</span> <span class=pl-c1>=</span> <span class=pl-s1>score_data</span>.<span class=pl-c1>get</span>(<span class=pl-s>&quot;interestingness&quot;</span>)</div>
<div id="LC839" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC840" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-c># Load grades if available</span></div>
<div id="LC841" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>grades_file</span> <span class=pl-c1>=</span> <span class=pl-s1>article_dir</span> <span class=pl-c1>/</span> <span class=pl-s>&quot;grades.json&quot;</span></div>
<div id="LC842" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>grades</span> <span class=pl-c1>=</span> {}</div>
<div id="LC843" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-k>if</span> <span class=pl-s1>grades_file</span>.<span class=pl-c1>exists</span>():</div>
<div id="LC844" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-k>with</span> <span class=pl-en>open</span>(<span class=pl-s1>grades_file</span>) <span class=pl-k>as</span> <span class=pl-s1>f</span>:</div>
<div id="LC845" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">                <span class=pl-s1>grades</span> <span class=pl-c1>=</span> <span class=pl-s1>json</span>.<span class=pl-c1>load</span>(<span class=pl-s1>f</span>)</div>
<div id="LC846" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC847" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>articles_data</span>.<span class=pl-c1>append</span>({</div>
<div id="LC848" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s>&quot;article&quot;</span>: <span class=pl-s1>article</span>,</div>
<div id="LC849" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s>&quot;response&quot;</span>: <span class=pl-s1>response</span>,</div>
<div id="LC850" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s>&quot;prompt&quot;</span>: <span class=pl-s1>prompt</span>,</div>
<div id="LC851" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s>&quot;score&quot;</span>: <span class=pl-s1>score</span>,</div>
<div id="LC852" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s>&quot;grades&quot;</span>: <span class=pl-s1>grades</span>,</div>
<div id="LC853" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        })</div>
<div id="LC854" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC855" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-c># Get all dates for navigation</span></div>
<div id="LC856" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>all_dates</span> <span class=pl-c1>=</span> <span class=pl-en>get_all_output_dates</span>()</div>
<div id="LC857" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-c># Add current date if not yet in list (we&#39;re about to render it)</span></div>
<div id="LC858" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-k>if</span> <span class=pl-s1>target_date</span> <span class=pl-c1><span class=pl-c1>not</span> <span class=pl-c1>in</span></span> <span class=pl-s1>all_dates</span>:</div>
<div id="LC859" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>all_dates</span> <span class=pl-c1>=</span> <span class=pl-en>sorted</span>(<span class=pl-s1>all_dates</span> <span class=pl-c1>+</span> [<span class=pl-s1>target_date</span>])</div>
<div id="LC860" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>current_idx</span> <span class=pl-c1>=</span> <span class=pl-s1>all_dates</span>.<span class=pl-c1>index</span>(<span class=pl-s1>target_date</span>)</div>
<div id="LC861" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>prev_date</span> <span class=pl-c1>=</span> <span class=pl-s1>all_dates</span>[<span class=pl-s1>current_idx</span> <span class=pl-c1>-</span> <span class=pl-c1>1</span>] <span class=pl-k>if</span> <span class=pl-s1>current_idx</span> <span class=pl-c1>&gt;</span> <span class=pl-c1>0</span> <span class=pl-k>else</span> <span class=pl-c1>None</span></div>
<div id="LC862" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>next_date</span> <span class=pl-c1>=</span> <span class=pl-s1>all_dates</span>[<span class=pl-s1>current_idx</span> <span class=pl-c1>+</span> <span class=pl-c1>1</span>] <span class=pl-k>if</span> <span class=pl-s1>current_idx</span> <span class=pl-c1>&lt;</span> <span class=pl-en>len</span>(<span class=pl-s1>all_dates</span>) <span class=pl-c1>-</span> <span class=pl-c1>1</span> <span class=pl-k>else</span> <span class=pl-c1>None</span></div>
<div id="LC863" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC864" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-c># Build HTML</span></div>
<div id="LC865" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>html_parts</span> <span class=pl-c1>=</span> [<span class=pl-s>f&quot;&quot;&quot;&lt;!DOCTYPE html&gt;</span></div>
<div id="LC866" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>&lt;html&gt;</span></div>
<div id="LC867" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>&lt;head&gt;</span></div>
<div id="LC868" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;meta charset=&quot;utf-8&quot;&gt;</span></div>
<div id="LC869" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;title&gt;HN Time Capsule - <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>target_date</span><span class=pl-kos>}</span></span>&lt;/title&gt;</span></div>
<div id="LC870" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;style&gt;</span></div>
<div id="LC871" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        * {{ box-sizing: border-box; }}</span></div>
<div id="LC872" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        body {{ font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, sans-serif;</span></div>
<div id="LC873" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>               margin: 0; padding: 0; line-height: 1.6; height: 100vh; overflow: hidden; }}</span></div>
<div id="LC874" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .container {{ display: flex; height: 100vh; }}</span></div>
<div id="LC875" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s></span></div>
<div id="LC876" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        /* Sidebar */</span></div>
<div id="LC877" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .sidebar {{ width: 350px; min-width: 350px; background: #f5f5f5; border-right: 1px solid #ddd;</span></div>
<div id="LC878" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                   overflow-y: auto; padding: 15px; }}</span></div>
<div id="LC879" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .sidebar h1 {{ color: #ff6600; font-size: 1.3em; margin: 0 0 5px 0; }}</span></div>
<div id="LC880" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .sidebar h1 a {{ color: #ff6600; text-decoration: none; }}</span></div>
<div id="LC881" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .sidebar h1 a:hover {{ text-decoration: underline; }}</span></div>
<div id="LC882" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .sidebar h2 {{ font-size: 0.95em; color: #666; margin: 0 0 8px 0; font-weight: normal; }}</span></div>
<div id="LC883" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .nav {{ display: flex; gap: 10px; margin-bottom: 15px; font-size: 0.85em; }}</span></div>
<div id="LC884" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .nav a {{ color: #0066cc; text-decoration: none; }}</span></div>
<div id="LC885" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .nav a:hover {{ text-decoration: underline; }}</span></div>
<div id="LC886" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .nav .disabled {{ color: #ccc; }}</span></div>
<div id="LC887" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item {{ padding: 10px; margin-bottom: 8px; background: #fff; border-radius: 6px;</span></div>
<div id="LC888" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                        cursor: pointer; border: 2px solid transparent; transition: all 0.15s;</span></div>
<div id="LC889" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                        display: flex; align-items: flex-start; gap: 10px; }}</span></div>
<div id="LC890" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item:hover {{ border-color: #ff6600; }}</span></div>
<div id="LC891" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item.selected {{ border-color: #ff6600; background: #fff5f0; }}</span></div>
<div id="LC892" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box {{ width: 36px; height: 36px; border-radius: 6px; display: flex;</span></div>
<div id="LC893" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                                   align-items: center; justify-content: center; font-weight: bold;</span></div>
<div id="LC894" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                                   font-size: 0.85em; flex-shrink: 0; }}</span></div>
<div id="LC895" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-10 {{ background: #c2410c; color: white; }}</span></div>
<div id="LC896" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-9 {{ background: #ea580c; color: white; }}</span></div>
<div id="LC897" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-8 {{ background: #f97316; color: white; }}</span></div>
<div id="LC898" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-7 {{ background: #fb923c; color: #333; }}</span></div>
<div id="LC899" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-6 {{ background: #fdba74; color: #333; }}</span></div>
<div id="LC900" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-5 {{ background: #fed7aa; color: #333; }}</span></div>
<div id="LC901" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-4 {{ background: #e5e7eb; color: #666; }}</span></div>
<div id="LC902" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-3 {{ background: #d1d5db; color: #666; }}</span></div>
<div id="LC903" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-2 {{ background: #9ca3af; color: white; }}</span></div>
<div id="LC904" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-1 {{ background: #6b7280; color: white; }}</span></div>
<div id="LC905" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-0 {{ background: #4b5563; color: white; }}</span></div>
<div id="LC906" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .score-box.score-none {{ background: #eee; color: #999; font-size: 0.7em; }}</span></div>
<div id="LC907" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .content {{ flex: 1; min-width: 0; }}</span></div>
<div id="LC908" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .title {{ font-size: 0.9em; font-weight: 500; margin-bottom: 4px; color: #333; }}</span></div>
<div id="LC909" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .article-item .meta {{ font-size: 0.75em; color: #888; }}</span></div>
<div id="LC910" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score {{ display: inline-block; padding: 2px 6px; border-radius: 10px; font-weight: bold;</span></div>
<div id="LC911" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                 font-size: 0.7em; margin-left: 6px; vertical-align: middle; }}</span></div>
<div id="LC912" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-10 {{ background: #c2410c; color: white; }}</span></div>
<div id="LC913" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-9 {{ background: #ea580c; color: white; }}</span></div>
<div id="LC914" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-8 {{ background: #f97316; color: white; }}</span></div>
<div id="LC915" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-7 {{ background: #fb923c; color: #333; }}</span></div>
<div id="LC916" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-6 {{ background: #fdba74; color: #333; }}</span></div>
<div id="LC917" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-5 {{ background: #fed7aa; color: #333; }}</span></div>
<div id="LC918" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-4 {{ background: #e5e7eb; color: #666; }}</span></div>
<div id="LC919" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-3 {{ background: #d1d5db; color: #666; }}</span></div>
<div id="LC920" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-2 {{ background: #9ca3af; color: white; }}</span></div>
<div id="LC921" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-1 {{ background: #6b7280; color: white; }}</span></div>
<div id="LC922" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .score.score-0 {{ background: #4b5563; color: white; }}</span></div>
<div id="LC923" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s></span></div>
<div id="LC924" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        /* Main content */</span></div>
<div id="LC925" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .main {{ flex: 1; overflow-y: auto; padding: 30px 40px; background: #fff; }}</span></div>
<div id="LC926" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .main-inner {{ max-width: 800px; }}</span></div>
<div id="LC927" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .main h1 {{ margin-top: 0; font-size: 1.5em; color: #333; }}</span></div>
<div id="LC928" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .main .article-meta {{ color: #666; font-size: 0.9em; margin-bottom: 20px; padding-bottom: 15px;</span></div>
<div id="LC929" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                              border-bottom: 1px solid #eee; }}</span></div>
<div id="LC930" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .main .article-meta a {{ color: #0066cc; }}</span></div>
<div id="LC931" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis {{ font-size: 0.95em; line-height: 1.5; }}</span></div>
<div id="LC932" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .grades-section {{ background: #f9f9f9; padding: 15px; border-radius: 6px; margin-top: 20px; }}</span></div>
<div id="LC933" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .grade {{ display: inline-block; padding: 2px 8px; margin: 2px; border-radius: 3px; font-size: 0.8em; }}</span></div>
<div id="LC934" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .grade-a {{ background: #c6efce; color: #006100; }}</span></div>
<div id="LC935" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .grade-b {{ background: #ffeb9c; color: #9c5700; }}</span></div>
<div id="LC936" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .grade-c {{ background: #ffc7ce; color: #9c0006; }}</span></div>
<div id="LC937" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .grade-d, .grade-f {{ background: #f4cccc; color: #990000; }}</span></div>
<div id="LC938" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .prompt-section {{ margin-top: 20px; }}</span></div>
<div id="LC939" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .prompt-section summary {{ cursor: pointer; color: #0066cc; font-size: 0.9em; }}</span></div>
<div id="LC940" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .prompt-content {{ white-space: pre-wrap; font-size: 0.85em; background: #f5f5f5;</span></div>
<div id="LC941" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                          padding: 15px; border-radius: 4px; margin-top: 10px; max-height: 400px; overflow-y: auto; }}</span></div>
<div id="LC942" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .placeholder {{ color: #999; text-align: center; margin-top: 100px; }}</span></div>
<div id="LC943" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s></span></div>
<div id="LC944" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        /* Markdown content styling */</span></div>
<div id="LC945" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis h1, .analysis h2, .analysis h3 {{ margin-top: 1.2em; margin-bottom: 0.4em; color: #333; }}</span></div>
<div id="LC946" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis h1 {{ font-size: 1.3em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }}</span></div>
<div id="LC947" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis h2 {{ font-size: 1.15em; }}</span></div>
<div id="LC948" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis h3 {{ font-size: 1.05em; }}</span></div>
<div id="LC949" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis p {{ margin: 0.6em 0; }}</span></div>
<div id="LC950" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis ul, .analysis ol {{ margin: 0.6em 0; padding-left: 1.5em; }}</span></div>
<div id="LC951" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis li {{ margin: 0.25em 0; }}</span></div>
<div id="LC952" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis strong {{ color: #333; }}</span></div>
<div id="LC953" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis blockquote {{ border-left: 3px solid #ff6600; margin: 0.8em 0; padding-left: 1em; color: #555; }}</span></div>
<div id="LC954" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis code {{ background: #f5f5f5; padding: 0.15em 0.4em; border-radius: 3px; font-size: 0.9em; }}</span></div>
<div id="LC955" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis pre {{ background: #f5f5f5; padding: 0.8em; border-radius: 4px; overflow-x: auto; margin: 0.6em 0; }}</span></div>
<div id="LC956" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis pre code {{ background: none; padding: 0; }}</span></div>
<div id="LC957" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        .analysis hr {{ border: none; border-top: 1px solid #eee; margin: 1em 0; }}</span></div>
<div id="LC958" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;/style&gt;</span></div>
<div id="LC959" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/marked/marked.min.js&quot;&gt;&lt;/script&gt;</span></div>
<div id="LC960" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>&lt;/head&gt;</span></div>
<div id="LC961" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>&lt;body&gt;</span></div>
<div id="LC962" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;div class=&quot;container&quot;&gt;</span></div>
<div id="LC963" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        &lt;div class=&quot;sidebar&quot;&gt;</span></div>
<div id="LC964" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;h1&gt;&lt;a href=&quot;../index.html&quot;&gt;HN Time Capsule&lt;/a&gt;&lt;/h1&gt;</span></div>
<div id="LC965" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;h2&gt;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>target_date</span><span class=pl-kos>}</span></span> (10 years ago)&lt;/h2&gt;</span></div>
<div id="LC966" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;div class=&quot;nav&quot;&gt;</span></div>
<div id="LC967" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s>f&#39;&lt;a href=&quot;../<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>prev_date</span><span class=pl-kos>}</span></span>/index.html&quot;&gt;&amp;larr; <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>prev_date</span><span class=pl-kos>}</span></span>&lt;/a&gt;&#39;</span> <span class=pl-k>if</span> <span class=pl-s1>prev_date</span> <span class=pl-k>else</span> <span class=pl-s>&#39;&lt;span class=&quot;disabled&quot;&gt;&amp;larr; prev&lt;/span&gt;&#39;</span><span class=pl-kos>}</span></span></span></div>
<div id="LC968" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                &lt;span&gt;|&lt;/span&gt;</span></div>
<div id="LC969" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s>f&#39;&lt;a href=&quot;../<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>next_date</span><span class=pl-kos>}</span></span>/index.html&quot;&gt;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>next_date</span><span class=pl-kos>}</span></span> &amp;rarr;&lt;/a&gt;&#39;</span> <span class=pl-k>if</span> <span class=pl-s1>next_date</span> <span class=pl-k>else</span> <span class=pl-s>&#39;&lt;span class=&quot;disabled&quot;&gt;next &amp;rarr;&lt;/span&gt;&#39;</span><span class=pl-kos>}</span></span></span></div>
<div id="LC970" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;/div&gt;</span></div>
<div id="LC971" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>&quot;&quot;&quot;</span>]</div>
<div id="LC972" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC973" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-c># Sidebar items</span></div>
<div id="LC974" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-k>for</span> <span class=pl-s1>i</span>, <span class=pl-s1>data</span> <span class=pl-c1>in</span> <span class=pl-en>enumerate</span>(<span class=pl-s1>articles_data</span>):</div>
<div id="LC975" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>article</span> <span class=pl-c1>=</span> <span class=pl-s1>data</span>[<span class=pl-s>&quot;article&quot;</span>]</div>
<div id="LC976" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>score</span> <span class=pl-c1>=</span> <span class=pl-s1>data</span>[<span class=pl-s>&quot;score&quot;</span>]</div>
<div id="LC977" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-k>if</span> <span class=pl-s1>score</span> <span class=pl-c1><span class=pl-c1>is</span> <span class=pl-c1>not</span></span> <span class=pl-c1>None</span>:</div>
<div id="LC978" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s1>score_class</span> <span class=pl-c1>=</span> <span class=pl-s>f&quot;score-<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>score</span><span class=pl-kos>}</span></span>&quot;</span></div>
<div id="LC979" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s1>score_box</span> <span class=pl-c1>=</span> <span class=pl-s>f&#39;&lt;div class=&quot;score-box <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>score_class</span><span class=pl-kos>}</span></span>&quot;&gt;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>score</span><span class=pl-kos>}</span></span>&lt;/div&gt;&#39;</span></div>
<div id="LC980" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-k>else</span>:</div>
<div id="LC981" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">            <span class=pl-s1>score_box</span> <span class=pl-c1>=</span> <span class=pl-s>&#39;&lt;div class=&quot;score-box score-none&quot;&gt;--&lt;/div&gt;&#39;</span></div>
<div id="LC982" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC983" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>selected</span> <span class=pl-c1>=</span> <span class=pl-s>&quot;selected&quot;</span> <span class=pl-k>if</span> <span class=pl-s1>i</span> <span class=pl-c1>==</span> <span class=pl-c1>0</span> <span class=pl-k>else</span> <span class=pl-s>&quot;&quot;</span></div>
<div id="LC984" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">        <span class=pl-s1>html_parts</span>.<span class=pl-c1>append</span>(<span class=pl-s>f&quot;&quot;&quot;</span></div>
<div id="LC985" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;div class=&quot;article-item <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>selected</span><span class=pl-kos>}</span></span>&quot; id=&quot;article-<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>item_id</span><span class=pl-kos>}</span></span>&quot; onclick=&quot;selectArticle(<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>i</span><span class=pl-kos>}</span></span>)&quot;&gt;</span></div>
<div id="LC986" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>score_box</span><span class=pl-kos>}</span></span></span></div>
<div id="LC987" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                &lt;div class=&quot;content&quot;&gt;</span></div>
<div id="LC988" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                    &lt;div class=&quot;title&quot;&gt;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>rank</span><span class=pl-kos>}</span></span>. <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>html</span>.<span class=pl-c1>escape</span>(<span class=pl-s1>article</span>.<span class=pl-c1>title</span>)<span class=pl-kos>}</span></span>&lt;/div&gt;</span></div>
<div id="LC989" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                    &lt;div class=&quot;meta&quot;&gt;<span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>points</span><span class=pl-kos>}</span></span> pts &amp;middot; <span class=pl-s1><span class=pl-kos>{</span><span class=pl-s1>article</span>.<span class=pl-c1>comment_count</span><span class=pl-kos>}</span></span> comments&lt;/div&gt;</span></div>
<div id="LC990" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                &lt;/div&gt;</span></div>
<div id="LC991" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;/div&gt;&quot;&quot;&quot;</span>)</div>
<div id="LC992" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">
</div>
<div id="LC993" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 ">    <span class=pl-s1>html_parts</span>.<span class=pl-c1>append</span>(<span class=pl-s>&quot;&quot;&quot;</span></div>
<div id="LC994" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        &lt;/div&gt;</span></div>
<div id="LC995" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        &lt;div class=&quot;main&quot;&gt;</span></div>
<div id="LC996" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;div class=&quot;main-inner&quot; id=&quot;main-content&quot;&gt;</span></div>
<div id="LC997" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>                &lt;div class=&quot;placeholder&quot;&gt;Select an article from the sidebar&lt;/div&gt;</span></div>
<div id="LC998" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>            &lt;/div&gt;</span></div>
<div id="LC999" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>        &lt;/div&gt;</span></div>
<div id="LC1000" class="react-code-text react-code-line-contents-no-virtualization react-file-line html-div child-of-line-807 "><span class=pl-s>    &lt;/div&gt;</span></div>





































































































































































































































































































































































































































































































</div><div class="Box-sc-62in7e-0 gihqdQ"><a class="prc-Link-Link-9ZwDx" href="https://github.com/karpathy/hn-time-capsule/raw/refs/heads/master/pipeline.py">View remainder of file in raw view</a></div></div></div></div><div id="copilot-button-container"></div></div><div id="highlighted-line-menu-container"></div></div></div><button hidden="" data-testid="hotkey-button" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button></section></div></div></div> <!-- --> <!-- --> </div></div></div></div></div></div></div><div id="find-result-marks-container" class="Box-sc-62in7e-0 vdPNv"></div><button hidden="" data-testid="" data-hotkey-scope="read-only-cursor-text-area"></button><button hidden=""></button></div> <!-- --> <!-- --> <script type="application/json" id="__PRIMER_DATA__R_0___">{"resolvedServerColorMode":"day"}</script></div>
</react-app>
</turbo-frame>



  </div>

</turbo-frame>

    </main>
  </div>

  </div>

          <footer class="footer pt-7 pb-6 f6 color-fg-muted color-border-subtle p-responsive" role="contentinfo" >
  <h2 class='sr-only'>Footer</h2>

  


  <div class="d-flex flex-justify-center flex-items-center flex-column-reverse flex-lg-row flex-wrap flex-lg-nowrap">
    <div class="d-flex flex-items-center flex-shrink-0 mx-2">
      <a aria-label="GitHub Homepage" class="footer-octicon mr-2" href="https://github.com">
        <svg aria-hidden="true" height="24" viewBox="0 0 24 24" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github">
    <path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path>
</svg>
</a>
      <span>
        &copy; 2026 GitHub,&nbsp;Inc.
      </span>
    </div>

    <nav aria-label="Footer">
      <h3 class="sr-only" id="sr-footer-heading">Footer navigation</h3>

      <ul class="list-style-none d-flex flex-justify-center flex-wrap mb-2 mb-lg-0" aria-labelledby="sr-footer-heading">

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Terms&quot;,&quot;label&quot;:&quot;text:terms&quot;}" href="https://docs.github.com/site-policy/github-terms/github-terms-of-service" data-view-component="true" class="Link--secondary Link">Terms</a>
          </li>

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;}" href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement" data-view-component="true" class="Link--secondary Link">Privacy</a>
          </li>

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to security&quot;,&quot;label&quot;:&quot;text:security&quot;}" href="https://github.com/security" data-view-component="true" class="Link--secondary Link">Security</a>
          </li>

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to status&quot;,&quot;label&quot;:&quot;text:status&quot;}" href="https://www.githubstatus.com/" data-view-component="true" class="Link--secondary Link">Status</a>
          </li>

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to community&quot;,&quot;label&quot;:&quot;text:community&quot;}" href="https://github.community/" data-view-component="true" class="Link--secondary Link">Community</a>
          </li>

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to docs&quot;,&quot;label&quot;:&quot;text:docs&quot;}" href="https://docs.github.com/" data-view-component="true" class="Link--secondary Link">Docs</a>
          </li>

          <li class="mx-2">
            <a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;}" href="https://support.github.com?tags=dotcom-footer" data-view-component="true" class="Link--secondary Link">Contact</a>
          </li>

          <li class="mx-2" >
  <cookie-consent-link>
    <button
      type="button"
      class="Link--secondary underline-on-hover border-0 p-0 color-bg-transparent"
      data-action="click:cookie-consent-link#showConsentManagement"
      data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;cookies&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;cookies_link_subfooter_footer&quot;}"
    >
       Manage cookies
    </button>
  </cookie-consent-link>
</li>

<li class="mx-2">
  <cookie-consent-link>
    <button
      type="button"
      class="Link--secondary underline-on-hover border-0 p-0 color-bg-transparent text-left"
      data-action="click:cookie-consent-link#showConsentManagement"
      data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;dont_share_info&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;dont_share_info_link_subfooter_footer&quot;}"
    >
      Do not share my personal information
    </button>
  </cookie-consent-link>
</li>

      </ul>
    </nav>
  </div>
</footer>



    <ghcc-consent id="ghcc" class="position-fixed bottom-0 left-0" style="z-index: 999999"
      data-locale="en"
      data-initial-cookie-consent-allowed=""
      data-cookie-consent-required="false"
    ></ghcc-consent>




  <div id="ajax-error-message" class="ajax-error-message flash flash-error" hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path>
</svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
    </button>
    You can’t perform that action at this time.
  </div>

    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path d="M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box color-shadow-large" style="width:360px;">
  </div>
</div>

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>
<template id="snippet-clipboard-copy-button-unpositioned">
  <div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>


    <style>
      .user-mention[href$="/Muhammad-Faizaan"] {
        color: var(--color-user-mention-fg);
        background-color: var(--bgColor-attention-muted, var(--color-attention-subtle));
        border-radius: 2px;
        margin-left: -2px;
        margin-right: -2px;
      }
      .user-mention[href$="/Muhammad-Faizaan"]:before,
      .user-mention[href$="/Muhammad-Faizaan"]:after {
        content: '';
        display: inline-block;
        width: 2px;
      }
    </style>


    </div>
    <div id="js-global-screen-reader-notice" class="sr-only mt-n1" aria-live="polite" aria-atomic="true" ></div>
    <div id="js-global-screen-reader-notice-assertive" class="sr-only mt-n1" aria-live="assertive" aria-atomic="true"></div>
  </body>
</html>

